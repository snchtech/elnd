–û—Å—å –æ–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è `openDetail(mode, start, end, department)` –¥–ª—è Oracle APEX, —è–∫–∞:

1. **–ü—Ä–∏–π–º–∞—î –ø–∞—Ä–∞–º–µ—Ç—Ä–∏**:

   * `mode` ‚Äî –∑–Ω–∞—á–µ–Ω–Ω—è `NOW`, `DAY`, `SHIFT` (–∞–±–æ –ø–æ—Ä–æ–∂–Ω—î).
   * `start` / `end` ‚Äî –¥–∞—Ç–∏ —É —Ñ–æ—Ä–º–∞—Ç—ñ ISO (`'YYYY-MM-DD HH24:MI:SS'`) –∞–±–æ –ø—É—Å—Ç—ñ.
   * `department` ‚Äî –∫–æ–¥ –≤—ñ–¥–¥—ñ–ª—É.

2. **–í–∏–∑–Ω–∞—á–∞—î —Ä–µ–∂–∏–º**:

   * –Ø–∫—â–æ `mode` –∑–∞–¥–∞–Ω–∏–π ‚Üí –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —á–∞—Å–æ–≤–∞ –ª–æ–≥—ñ–∫–∞.
   * –Ü–Ω–∞–∫—à–µ, —è–∫—â–æ –∑–∞–¥–∞–Ω—ñ `start` —Ç–∞ `end`, ‚Üí –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —è–∫ –¥—ñ–∞–ø–∞–∑–æ–Ω.

3. **–ó–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ APEX AJAX callback `GEN_DETAIL_URL`**, —è–∫–∏–π –≥–µ–Ω–µ—Ä—É—î `f?p=...` URL —ñ –ø–æ–≤–µ—Ä—Ç–∞—î –π–æ–≥–æ.

4. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `apex.navigation.redirect()` –¥–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏.**

---

### ‚úÖ JavaScript —Ñ—É–Ω–∫—Ü—ñ—è `openDetail`

```js
function openDetail(department, mode, start, end) {
  // –í–∏–∑–Ω–∞—á–∞—î–º–æ, —è–∫—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è
  const useMode = mode && mode.trim() !== "";
  const usePeriod = start && end;

  // –ü–µ—Ä–µ–¥–∞—î–º–æ —á–µ—Ä–µ–∑ AJAX Processing
  apex.server.process("GEN_DETAIL_URL", {
    x01: department,
    x02: useMode ? mode : '',
    x03: usePeriod ? start : '',
    x04: usePeriod ? end : ''
  }, {
    dataType: "text",
    success: function (url) {
      if (url) {
        apex.navigation.redirect(url);
      } else {
        apex.message.alert("–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ URL –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥—É.");
      }
    },
    error: function () {
      apex.message.alert("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ URL.");
    }
  });
}
```

---

### ‚úÖ –°–µ—Ä–≤–µ—Ä–Ω–∏–π –ø—Ä–æ—Ü–µ—Å `GEN_DETAIL_URL` (AJAX Callback)

```plsql
DECLARE
  l_url VARCHAR2(4000);
BEGIN
  -- –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
  DECLARE
    l_department    VARCHAR2(100) := apex_application.g_x01;
    l_time_mode     VARCHAR2(10)  := apex_application.g_x02;
    l_time_start    VARCHAR2(100) := apex_application.g_x03;
    l_time_end      VARCHAR2(100) := apex_application.g_x04;
  BEGIN
    -- –ü–æ–±—É–¥–æ–≤–∞ URL –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ä–µ–∂–∏–º—É
    IF l_time_mode IS NOT NULL THEN
      l_url := APEX_PAGE.GET_URL(
        p_page        => 15,  -- –∑–∞–º—ñ–Ω–∏ –Ω–∞ —Å–≤—ñ–π –Ω–æ–º–µ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏
        p_clear_cache => '15',
        p_items       => 'P15_DEPARTMENT,P15_TIME_MODE',
        p_values      => l_department || ',' || l_time_mode
      );
    ELSIF l_time_start IS NOT NULL AND l_time_end IS NOT NULL THEN
      l_url := APEX_PAGE.GET_URL(
        p_page        => 15,
        p_clear_cache => '15',
        p_items       => 'P15_DEPARTMENT,P15_TIME_START,P15_TIME_END',
        p_values      => l_department || ',' || l_time_start || ',' || l_time_end
      );
    ELSE
      l_url := NULL;
    END IF;
  END;

  -- –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è URL
  htp.p(l_url);
END;
```

---

### üü¢ –ü–µ—Ä–µ–≤–∞–≥–∏ –ø—ñ–¥—Ö–æ–¥—É:

* –ë–µ–∑–ø–µ—á–Ω–µ —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è URL –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ.
* –ì–Ω—É—á–∫–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ª–æ–≥—ñ–∫–æ—é (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏).
* –ü—Ä–æ—Å—Ç–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏.

–•–æ—á–µ—à ‚Äî –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ —â–µ –π –¥–æ–¥–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –¥–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –≤ **–º–æ–¥–∞–ª—å–Ω–æ–º—É –≤—ñ–∫–Ω—ñ** –∑–∞–º—ñ—Å—Ç—å redirect.
