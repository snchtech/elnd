–©–æ–± —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –æ–ø–∏—Å–∞–Ω—É –ª–æ–≥—ñ–∫—É, –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ—î–¥–Ω–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ —Ä–µ—á–µ–π:

---

## ‚úÖ –©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:

1. **–ü—ñ–∫—Ç–æ–≥—Ä–∞–º–∞ –≤ –ø–µ—Ä—à—ñ–π –∫–æ–ª–æ–Ω—Ü—ñ** –∑–≤—ñ—Ç—É.
2. –ü—Ä–∏ –∫–ª—ñ–∫—É –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:

   * `department` (–∑ —Ä—è–¥–∫–∞, –∞–±–æ `P0_CURRENT_DEPARTMENT`, —è–∫—â–æ —î).
   * `P_TIME_MODE` –∞–±–æ `P_TIME_START` + `P_TIME_END`.
3. **–§–æ—Ä–º—É—î—Ç—å—Å—è URL** –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥—É –Ω–∞ —ñ–Ω—à—É —Å—Ç–æ—Ä—ñ–Ω–∫—É/–º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ.

---

## üõ† –ß–∞—Å—Ç–∏–Ω–∞ 1: –ö–æ–ª–æ–Ω–∫–∞ –∑ —ñ–∫–æ–Ω–∫–æ—é

–£ SQL –∑–≤—ñ—Ç—É –¥–æ–¥–∞–π –∫–æ–ª–æ–Ω–∫—É (–≤ –∫—ñ–Ω—Ü—ñ –∞–±–æ –Ω–∞ –ø–æ—á–∞—Ç–∫—É):

```sql
'<a href="javascript:void(0);" onclick="openDetail(''' 
|| CASE 
     WHEN :P0_CURRENT_DEPARTMENT IS NOT NULL THEN :P0_CURRENT_DEPARTMENT 
     ELSE department 
   END || ''',''' 
|| :P_TIME_MODE || ''','''
|| NVL(TO_CHAR(:P_TIME_START, 'YYYY-MM-DD"T"HH24:MI:SS'), '') || ''','''
|| NVL(TO_CHAR(:P_TIME_END, 'YYYY-MM-DD"T"HH24:MI:SS'), '') || ''')">
  <span class="fa fa-search-plus" title="–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –¥–µ—Ç–∞–ª—ñ"></span></a>' AS view_icon
```

> üî∏ –ü—Ä–∏–º—ñ—Ç–∫–∞: `view_icon` ‚Äî —Ü–µ –∫–æ–ª–æ–Ω–∫–∞, —è–∫—É —Ç–∏ –≤—ñ–¥–æ–±—Ä–∞–∑–∏—à —è–∫ HTML —É –∑–≤—ñ—Ç—ñ.

---

## üõ† –ß–∞—Å—Ç–∏–Ω–∞ 2: JavaScript-—Ñ—É–Ω–∫—Ü—ñ—è `openDetail`

–î–æ–¥–∞–π —É –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ > Function and Global Variable Declaration:

```js
function openDetail(department, timeMode, timeStart, timeEnd) {
  let url;

  if (timeMode) {
    url = apex.util.makeApplicationUrl({
      pageId: 101,  // –ó–∞–º—ñ–Ω–∏ –Ω–∞ ID —Ü—ñ–ª—å–æ–≤–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏
      clearCache: "101",
      itemNames: ["P101_DEPARTMENT", "P101_TIME_MODE"],
      itemValues: [department, timeMode]
    });
  } else {
    url = apex.util.makeApplicationUrl({
      pageId: 101,
      clearCache: "101",
      itemNames: ["P101_DEPARTMENT", "P101_TIME_START", "P101_TIME_END"],
      itemValues: [department, timeStart, timeEnd]
    });
  }

  apex.navigation.redirect(url); // –∞–±–æ .dialog.open –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ
}
```

---

## üßæ –Ø–∫ –≤—Ä–∞—Ö—É–≤–∞—Ç–∏ —Ü–µ —É `WHERE` —É –∑–≤—ñ—Ç—ñ (–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ 101):

```sql
WHERE 1=1
  AND (
    :P101_DEPARTMENT IS NULL OR department = :P101_DEPARTMENT
  )
  AND (
    (:P101_TIME_MODE = 'NOW' AND status_start_date < SYSDATE AND status_end_date IS NULL)
    OR (:P101_TIME_MODE = 'DAY' AND status_start_date < SYSDATE AND (status_end_date IS NULL OR status_end_date >= TRUNC(SYSDATE)))
    OR (:P101_TIME_MODE = 'SHIFT' AND status_start_date < SYSDATE AND (status_end_date IS NULL OR status_end_date >= :P_SHIFT_START))
    OR (
      :P101_TIME_MODE IS NULL AND
      :P101_TIME_START IS NOT NULL AND
      :P101_TIME_END IS NOT NULL AND
      status_start_date <= :P101_TIME_END AND
      (status_end_date IS NULL OR :P101_TIME_START < status_end_date)
    )
  )
```

---

## üß© –î–æ–¥–∞—Ç–∫–æ–≤–æ:

* –ö–æ–ª–æ–Ω–∫—É `view_icon` –≤—ñ–¥–æ–±—Ä–∞–∂–∞–π —É –∑–≤—ñ—Ç—ñ —è–∫ **HTML Expression**:
  –í APEX: `Column Formatting ‚Üí Escape special characters ‚Üí No`

* –ú–æ–∂–µ—à —Ç–∞–∫–æ–∂ –¥–æ–¥–∞—Ç–∏ Dynamic Action –Ω–∞ `apex.navigation.redirect` ‚Üí `modal` –∑–∞–º—ñ—Å—Ç—å redirect.

---

–•–æ—á–µ—à, —â–æ–± —è –∞–¥–∞–ø—Ç—É–≤–∞–≤ —Ü–µ –æ–¥—Ä–∞–∑—É –ø—ñ–¥ **–º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ** —á–µ—Ä–µ–∑ `apex.navigation.dialog.open`?
