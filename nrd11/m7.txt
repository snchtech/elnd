–¢–∞–∫, –∑–≤—ñ—Å–Ω–æ. –©–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –ø—Ä–æ–±–ª–µ–º —ñ–∑ `apex.util.makeApplicationUrl` (—è–∫–∏–π –Ω–µ –ø—Ä–∞—Ü—é—î, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É –¥–µ—è–∫–∏—Ö —Ä–µ–∂–∏–º–∞—Ö –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ –∞–±–æ –ø—Ä–∏ —Å–∫–ª–∞–¥–Ω–∏—Ö –∫–µ—à—É–≤–∞–Ω–Ω—è—Ö), –∫—Ä–∞—â–µ —Å—Ñ–æ—Ä–º—É–≤–∞—Ç–∏ URL **–Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ —á–µ—Ä–µ–∑ Ajax Callback** —ñ **–æ—Ç—Ä–∏–º–∞—Ç–∏ –π–æ–≥–æ –≤ JS —á–µ—Ä–µ–∑ `apex.server.process`**.

---

## ‚úÖ –©–æ –º–∏ –∑—Ä–æ–±–∏–º–æ:

1. –°—Ç–≤–æ—Ä–∏–º–æ Ajax Callback `GEN_DETAIL_URL`.
2. –ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ —Å—Ñ–æ—Ä–º—É—î–º–æ `APEX_PAGE.GET_URL(...)`.
3. –£ JS –æ—Ç—Ä–∏–º–∞—î–º–æ —Ü–µ–π URL ‚Üí –≤—ñ–¥–∫—Ä–∏—î–º–æ –π–æ–≥–æ —á–µ—Ä–µ–∑ `apex.navigation.redirect(...)` –∞–±–æ `.dialog.open(...)`.

---

### üîß –ö—Ä–æ–∫ 1. Ajax Callback `GEN_DETAIL_URL`

–£ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ —Å—Ç–≤–æ—Ä—é—î–º–æ **Ajax Callback** –∑ –Ω–∞—Å—Ç—É–ø–Ω–∏–º –∫–æ–¥–æ–º:

```plsql
DECLARE
  v_url VARCHAR2(4000);
BEGIN
  -- –§–æ—Ä–º—É—î–º–æ URL
  v_url := APEX_PAGE.GET_URL(
    p_page        => 101, -- ID —Ü—ñ–ª—å–æ–≤–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏
    p_clear_cache => '101',
    p_items       => 'P101_DEPARTMENT,P101_TIME_MODE,P101_TIME_START,P101_TIME_END',
    p_values      => apex_application.g_x01 || ',' ||
                     apex_application.g_x02 || ',' ||
                     apex_application.g_x03 || ',' ||
                     apex_application.g_x04
  );

  -- –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ
  htp.p(v_url);
END;
```

---

### üí° –ö—Ä–æ–∫ 2. JS-—Ñ—É–Ω–∫—Ü—ñ—è `openDetail(...)`

```js
function openDetail(department, timeMode, timeStart, timeEnd) {
  apex.server.process("GEN_DETAIL_URL", {
    x01: department,
    x02: timeMode,
    x03: timeStart,
    x04: timeEnd
  }, {
    dataType: "text",
    success: function(pUrl) {
      // –í—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ —è–∫ redirect –∞–±–æ dialog
      apex.navigation.redirect(pUrl);
      // –∞–±–æ:
      // apex.navigation.dialog.open(pUrl, {title: "–î–µ—Ç–∞–ª—ñ"});
    },
    error: function() {
      apex.message.alert("–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ URL.");
    }
  });
}
```

---

### üß™ –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–ª–∏–∫—É:

–£ –∑–≤—ñ—Ç—ñ –≤ –∫–æ–ª–æ–Ω—Ü—ñ:

```sql
'<a href="javascript:void(0);" onclick="openDetail(''' 
|| CASE WHEN :P0_CURRENT_DEPARTMENT IS NOT NULL THEN :P0_CURRENT_DEPARTMENT ELSE department END || ''','''
|| :P_TIME_MODE || ''','''
|| NVL(TO_CHAR(:P_TIME_START, 'YYYY-MM-DD"T"HH24:MI:SS'), '') || ''','''
|| NVL(TO_CHAR(:P_TIME_END, 'YYYY-MM-DD"T"HH24:MI:SS'), '') || ''')">
  <span class="fa fa-search-plus" title="–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –¥–µ—Ç–∞–ª—ñ"></span></a>' AS view_icon
```

---

–•–æ—á–µ—à, —â–æ–± –º–∏ –∞–¥–∞–ø—Ç—É–≤–∞–ª–∏ —Ü–µ –æ–¥—Ä–∞–∑—É **–¥–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —É –º–æ–¥–∞–ª—å–Ω–æ–º—É –≤—ñ–∫–Ω—ñ** (—á–µ—Ä–µ–∑ `apex.navigation.dialog.open`) –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏?
