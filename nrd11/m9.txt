–¢–∞–∫, —Ç–∏ –º–æ–∂–µ—à **–∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –¥–≤—ñ —Ä—ñ–∑–Ω—ñ –≤–∞—Ä—ñ–∞—Ü—ñ—ó –∫–æ–¥—É** ‚Äî –æ–¥–Ω–∞ –¥–ª—è `P_TIME_MODE`, —ñ–Ω—à–∞ –¥–ª—è `P_TIME_START`/`P_TIME_END`. –î–ª—è —Ü—å–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤ SQL **–≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —É–º–æ–≤–Ω—É –ª–æ–≥—ñ–∫—É** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —á–µ—Ä–µ–∑ `CASE` –∞–±–æ –¥–≤—ñ –æ–∫—Ä–µ–º—ñ –∫–æ–ª–æ–Ω–∫–∏ –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ —Ä–µ–∂–∏–º—É).

---

### ‚úÖ –í–∞—Ä—ñ–∞–Ω—Ç 1: –û–¥–∏–Ω —Ä—è–¥–æ–∫ –∑ —É–º–æ–≤–Ω–∏–º `CASE` (—É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–æ)

```sql
CASE 
  WHEN :P_TIME_MODE IS NOT NULL THEN 
    '<a href="javascript:void(0);" onclick="openDetail(''' 
    || REPLACE(NVL(:P0_CURRENT_DEPARTMENT, department), '''', '') || ''','''
    || :P_TIME_MODE || ''',''' || ''',''' || ''')">'
    || '<span class="fa fa-clock" title="–ó–∞ —á–∞—Å–æ–≤–∏–º —Ä–µ–∂–∏–º–æ–º"></span></a>'
    
  WHEN :P_TIME_START IS NOT NULL OR :P_TIME_END IS NOT NULL THEN 
    '<a href="javascript:void(0);" onclick="openDetail(''' 
    || REPLACE(NVL(:P0_CURRENT_DEPARTMENT, department), '''', '') || ''',''' || ''','''
    || NVL(TO_CHAR(:P_TIME_START, 'YYYY-MM-DD HH24:MI:SS'), '') || ''','''
    || NVL(TO_CHAR(:P_TIME_END, 'YYYY-MM-DD HH24:MI:SS'), '') || ''')">'
    || '<span class="fa fa-calendar" title="–ó–∞ –¥—ñ–∞–ø–∞–∑–æ–Ω–æ–º –¥–∞—Ç"></span></a>'
    
  ELSE NULL
END AS view_icon
```

---

### ‚úÖ –í–∞—Ä—ñ–∞–Ω—Ç 2: –î–≤—ñ –æ–∫—Ä–µ–º—ñ –∫–æ–ª–æ–Ω–∫–∏ (–¥–ª—è –¥–≤–æ—Ö —Ç–∏–ø—ñ–≤ –ø–µ—Ä–µ–≥–ª—è–¥—É)

#### 1. **–ö–Ω–æ–ø–∫–∞ –¥–ª—è TIME\_MODE**

```sql
'<a href="javascript:void(0);" onclick="openDetail(''' 
|| REPLACE(NVL(:P0_CURRENT_DEPARTMENT, department), '''', '') || ''','''
|| :P_TIME_MODE || ''',''' || ''',''' || ''')">'
|| '<span class="fa fa-clock" title="–†–µ–∂–∏–º —á–∞—Å—É"></span></a>' AS view_icon_mode
```

#### 2. **–ö–Ω–æ–ø–∫–∞ –¥–ª—è TIME\_START/END**

```sql
'<a href="javascript:void(0);" onclick="openDetail(''' 
|| REPLACE(NVL(:P0_CURRENT_DEPARTMENT, department), '''', '') || ''',''' || ''','''
|| NVL(TO_CHAR(:P_TIME_START, 'YYYY-MM-DD HH24:MI:SS'), '') || ''','''
|| NVL(TO_CHAR(:P_TIME_END, 'YYYY-MM-DD HH24:MI:SS'), '') || ''')">'
|| '<span class="fa fa-calendar" title="–î—ñ–∞–ø–∞–∑–æ–Ω –¥–∞—Ç"></span></a>' AS view_icon_period
```

> **–£–≤–∞–≥–∞**: –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Å—è, —â–æ —Ç–∏ —É–≤—ñ–º–∫–Ω—É–≤ `Escape special characters = No` –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—ó –∫–æ–ª–æ–Ω–∫–∏ –≤ APEX.

---

### üìå –ü—Ä–∏–º—ñ—Ç–∫–∞

–£ —Ñ—É–Ω–∫—Ü—ñ—ó `openDetail` –ø–µ—Ä–µ–≤—ñ—Ä—è–π –ª–æ–≥—ñ–∫—É, —â–æ–±:

* –Ø–∫—â–æ `mode !== ''` ‚Äî –ø—Ä–∞—Ü—é—î —Ä–µ–∂–∏–º `TIME_MODE`
* –Ü–Ω–∞–∫—à–µ ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è `start` / `end`.

–•–æ—á–µ—à ‚Äî –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ –∑ JS —Ñ—É–Ω–∫—Ü—ñ—î—é `openDetail(...)`, —è–∫–∞ —Ü–µ –æ–±—Ä–æ–±–ª—è—î.
