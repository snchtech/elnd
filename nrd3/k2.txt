–¶–µ –¥—É–∂–µ —Å–ª—É—à–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è üëç

---

## üìå –í—ñ–¥–ø–æ–≤—ñ–¥—å:

### üîπ –¢–∞–∫, Oracle 12.1 **–º–æ–∂–µ –≤–∏–∫–æ–Ω–∞—Ç–∏** `apex_string.split(...)`,  
**–∞–ª–µ –ª–∏—à–µ —è–∫—â–æ:**
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π Oracle APEX (–ø—Ä–∏–Ω–∞–π–º–Ω—ñ –≤–µ—Ä—Å—ñ—è APEX 5.1+)
- –°–µ—Å—ñ—è –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –≤ **APEX environment** –∞–±–æ –ø—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º, —è–∫–∏–π –º–∞—î –¥–æ—Å—Ç—É–ø –¥–æ `APEX_STRING` –ø–∞–∫–µ—Ç—É

---

## üî¥ –Ø–∫—â–æ `APEX_STRING` –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π:

–ù–∞ –¥–µ—è–∫–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö (–æ—Å–æ–±–ª–∏–≤–æ –Ω–µ APEX-enabled —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞—Ö, –∞–±–æ PL/SQL –ø–æ–∑–∞ APEX) –±—É–¥–µ –ø–æ–º–∏–ª–∫–∞:
> `PLS-00201: identifier 'APEX_STRING.SPLIT' must be declared`

---

## ‚úÖ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –±–µ–∑ APEX: —Å—Ç–≤–æ—Ä–∏—Ç–∏ –≤–ª–∞—Å–Ω—É split-—Ñ—É–Ω–∫—Ü—ñ—é

### üîß –ö—Ä–æ–∫ 1: —Å—Ç–≤–æ—Ä–∏—Ç–∏ –≤–ª–∞—Å–Ω–∏–π —Ç–∏–ø
```sql
CREATE OR REPLACE TYPE t_varchar2_tab IS TABLE OF VARCHAR2(4000);
```

### üîß –ö—Ä–æ–∫ 2: —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é `split_string`
```sql
CREATE OR REPLACE FUNCTION split_string (
  p_string IN VARCHAR2,
  p_delim  IN VARCHAR2 := ':'
) RETURN t_varchar2_tab IS
  v_result t_varchar2_tab := t_varchar2_tab();
  v_start PLS_INTEGER := 1;
  v_end   PLS_INTEGER;
  v_index PLS_INTEGER := 1;
BEGIN
  LOOP
    v_end := INSTR(p_string, p_delim, v_start);
    EXIT WHEN v_end = 0;
    v_result.EXTEND;
    v_result(v_index) := SUBSTR(p_string, v_start, v_end - v_start);
    v_index := v_index + 1;
    v_start := v_end + LENGTH(p_delim);
  END LOOP;

  IF v_start <= LENGTH(p_string) THEN
    v_result.EXTEND;
    v_result(v_index) := SUBSTR(p_string, v_start);
  END IF;

  RETURN v_result;
END;
```

---

### üîÑ –¢–µ–ø–µ—Ä –º–æ–∂–µ—à –ø–∏—Å–∞—Ç–∏ —Ç–∞–∫:

```plsql
v_dep_tbl t_varchar2_tab := split_string(p_departments, ':');
```

–Ü –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤ `MEMBER OF`:

```sql
AND (p_departments IS NULL OR department MEMBER OF v_dep_tbl)
```

---

## ‚úÖ –ü–µ—Ä–µ–≤–∞–≥–∏ —Ü—å–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É:

| –ü–µ—Ä–µ–≤–∞–≥–∞                  | –ü–æ—è—Å–Ω–µ–Ω–Ω—è                          |
|---------------------------|------------------------------------|
| ‚úî –ü—Ä–∞—Ü—é—î —É **–±—É–¥—å-—è–∫—ñ–π** Oracle DB | –ù–∞–≤—ñ—Ç—å –±–µ–∑ APEX |
| ‚úî –ü–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å         | –ú–æ–∂–Ω–∞ –ª–µ–≥–∫–æ –º–æ–¥–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ |
| ‚úî –ü—Ä–æ—Å—Ç–∏–π —Ç–∏–ø –¥–∞–Ω–∏—Ö       | –ë–µ–∑ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ `APEX_APPLICATION_GLOBAL.VC_ARR2` |

---

üîß –Ø–∫—â–æ —Ö–æ—á–µ—à ‚Äî —è –º–æ–∂—É –∑—ñ–±—Ä–∞—Ç–∏ –ø–æ–≤–Ω—É –≤–µ—Ä—Å—ñ—é —Ñ—É–Ω–∫—Ü—ñ—ó `get_unit_quick_stats` **–±–µ–∑ APEX**, –∑ —Ü–∏–º `split_string`. –ù–∞–ø–∏—Å–∞—Ç–∏?