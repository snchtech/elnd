–¢–∞–∫, —Ç–∏ –º–æ–∂–µ—à **–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Ü–µ–π –∫–æ–¥ –Ω–∞ –º–æ–¥–∞–ª—å–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ —É "Pre-Rendering" –µ—Ç–∞–ø—ñ** ‚Äî –∞–ª–µ –Ω–µ —É –≤–∏–≥–ª—è–¥—ñ `RETURN` —è–∫ —É —Ñ—É–Ω–∫—Ü—ñ—ó, –∞ —è–∫ –∑–≤–∏—á–∞–π–Ω–∏–π **PL/SQL Process**, —è–∫–∏–π –ø—Ä–∏–∑–Ω–∞—á–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è `:P_SHIFT_START`.

---

## ‚úÖ –Ø–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ü–µ –∑—Ä–æ–±–∏—Ç–∏:

### üî∏ **1. –°—Ç–≤–æ—Ä–∏ Hidden item `P_SHIFT_START`** –Ω–∞ –º–æ–¥–∞–ª—å–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ  
(–º–æ–∂–µ—à –∑—Ä–æ–±–∏—Ç–∏ –Ω–µ–≤–∏–¥–∏–º–∏–º)

### üî∏ **2. –°—Ç–≤–æ—Ä–∏ `Before Header` –ø—Ä–æ—Ü–µ—Å**

**Processing ‚Üí Create ‚Üí PL/SQL ‚Üí Type: `Before Header`**

- –ù–∞–∑–≤–∏: `Init P_SHIFT_START`
- –ö–æ–¥:

```plsql
DECLARE
  v_shift_start DATE;
BEGIN
  IF TO_CHAR(SYSDATE, 'HH24:MI') BETWEEN '06:00' AND '13:59' THEN
    v_shift_start := TRUNC(SYSDATE) + 6/24;
  ELSIF TO_CHAR(SYSDATE, 'HH24:MI') BETWEEN '14:00' AND '21:59' THEN
    v_shift_start := TRUNC(SYSDATE) + 14/24;
  ELSIF TO_CHAR(SYSDATE, 'HH24:MI') >= '22:00' THEN
    v_shift_start := TRUNC(SYSDATE) + 22/24;
  ELSE
    v_shift_start := TRUNC(SYSDATE - 1) + 22/24;
  END IF;

  :P_SHIFT_START := v_shift_start;
END;
```

> ‚ùó **–ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π `RETURN`**, –±–æ —Ü–µ –Ω–µ —Ñ—É–Ω–∫—Ü—ñ—è, –∞ –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–∏–π –∫–æ–¥.

---

## üìå –ö–æ–ª–∏ —Ü–µ–π –ø—Ä–æ—Ü–µ—Å –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è?

- **–î–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É —Ä–µ–≥—ñ–æ–Ω—ñ–≤**
- –ó–Ω–∞—á–µ–Ω–Ω—è `:P_SHIFT_START` –≤–∂–µ –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–µ –≤ SQL –∑–∞–ø–∏—Ç–∞—Ö –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É –∑–≤—ñ—Ç—ñ)

---

## üß† –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞

–Ø–∫—â–æ `:P_SHIFT_START` –≤–∂–µ –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –∑ –æ—Å–Ω–æ–≤–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ —á–µ—Ä–µ–∑ `OPEN_MODAL` ‚Äî —Ç–æ–¥—ñ —Ç–∞–∫–∏–π –ø—Ä–æ—Ü–µ—Å –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω.

> –ê–ª–µ! –¶–µ–π –≤–∞—Ä—ñ–∞–Ω—Ç –∑ `Before Header` –∑—Ä—É—á–Ω–∏–π, —è–∫—â–æ:
- –•–æ—á–µ—à, —â–æ–± –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ **–∞–≤—Ç–æ–Ω–æ–º–Ω–æ** –≤–∏–∑–Ω–∞—á–∞–ª–æ –∑–º—ñ–Ω—É
- –ù–µ —Ö–æ—á–µ—à –∑–∞–ª–µ–∂–∞—Ç–∏ –≤—ñ–¥ –∑–Ω–∞—á–µ–Ω–Ω—è, –ø–µ—Ä–µ–¥–∞–Ω–æ–≥–æ —á–µ—Ä–µ–∑ JS

---

## üîö –ü—ñ–¥—Å—É–º–æ–∫

| –í–∞—Ä—ñ–∞–Ω—Ç                  | –ü–µ—Ä–µ–≤–∞–≥–∞                                       |
|--------------------------|------------------------------------------------|
| `P_SHIFT_START` –∑ `openUnitModal()` | –ü–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —è–≤–Ω–æ –∑ –≥–æ–ª–æ–≤–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ |
| `Before Header` PL/SQL    | –†–æ–∑—Ä–∞—Ö–æ–≤—É—î—Ç—å—Å—è –ø—Ä—è–º–æ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º—É –≤—ñ–∫–Ω—ñ        |

üîß –ú–æ–∂–µ—à –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±—É–¥—å-—è–∫–∏–π –ø—ñ–¥—Ö—ñ–¥, –∞–±–æ –Ω–∞–≤—ñ—Ç—å **–æ–±–∏–¥–≤–∞ ‚Äî –∑ —É–º–æ–≤–æ—é `IF P_SHIFT_START IS NULL THEN ...`** –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –≤–∞—Ä—ñ–∞–Ω—Ç—É.