–î—É–∂–µ –¥–æ–±—Ä–µ ‚Äî —Ç–æ–¥—ñ —Ä–æ–∑–±–µ—Ä–µ–º–æ—Å—è, —á–æ–º—É –≤ —Ç–µ–±–µ SQL-–∑–≤—ñ—Ç –Ω–µ –æ–Ω–æ–≤–ª—é—î –¥–∞–Ω—ñ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥—ñ –º—ñ–∂ —Ä–µ–∂–∏–º–∞–º–∏ `NOW`, `DAY`, `SHIFT`.

---

## ‚úÖ –ü—Ä–∏–∫–ª–∞–¥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ SQL –¥–ª—è `Classic Report` (SQL Report Region)

```sql
SELECT *
FROM v_outfit_pivot_base
WHERE 1=1
  AND (
    :P_MODAL_DEPARTMENTS IS NULL 
    OR department IN (
      SELECT column_value FROM TABLE(split_string(:P_MODAL_DEPARTMENTS, ':'))
    )
  )
  AND (
    (:P_MODAL_TIMEMODE = 'NOW'   AND status_start_date < SYSDATE AND status_end_date IS NULL)
    OR (:P_MODAL_TIMEMODE = 'DAY'   AND status_start_date < SYSDATE AND NVL(status_end_date, SYSDATE + 1) >= TRUNC(SYSDATE))
    OR (:P_MODAL_TIMEMODE = 'SHIFT' AND status_start_date < SYSDATE AND NVL(status_end_date, SYSDATE + 1) >= :P_SHIFT_START)
  )
```

### üîé –ü–æ—è—Å–Ω–µ–Ω–Ω—è:

- `:P_MODAL_TIMEMODE = 'NOW'` ‚Äî –ø–æ–∫–∞–∑—É—î –ª–∏—à–µ —Ç—ñ, —â–æ **–ø–æ—á–∞–ª–∏—Å—è** —ñ —â–µ **–Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—è**.
- `:P_MODAL_TIMEMODE = 'DAY'` ‚Äî –ø–æ–∫–∞–∑—É—î –≤—Å—ñ, —è–∫—ñ –±—É–ª–∏ –∞–∫—Ç–∏–≤–Ω—ñ **—Å—å–æ–≥–æ–¥–Ω—ñ**.
- `:P_MODAL_TIMEMODE = 'SHIFT'` ‚Äî –ø–æ–∫–∞–∑—É—î –≤—Å—ñ, —è–∫—ñ –∞–∫—Ç–∏–≤–Ω—ñ **–∑ –ø–æ—á–∞—Ç–∫—É –∑–º—ñ–Ω–∏**.

---

## üí° –Ø–∫ –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—å, —â–æ –ø—Ä–∞—Ü—é—î?

### 1. –ü–µ—Ä–µ–≤—ñ—Ä, —á–∏ `:P_MODAL_TIMEMODE` ‚Äî —Ü–µ **page item** (–Ω–∞ —Ç—ñ–π –∂–µ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ).
- –ú–∞—î –±—É—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω–æ –Ω–∞ –º–æ–¥–∞–ª—å–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ.
- –ú–∞—î –±—É—Ç–∏ `Text (Hidden)` –∞–±–æ `Text Field`, —è–∫—â–æ —Ç—Ä–µ–±–∞ –±–∞—á–∏—Ç–∏.

### 2. –Ø–∫—â–æ —Ç–∏ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—à –º–æ–¥–∞–ª—å–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É —á–µ—Ä–µ–∑ JS (—á–µ—Ä–µ–∑ `apex.navigation.redirect(...)`), —Ç–æ:

üîß **URL –ø–æ–≤–∏–Ω–µ–Ω –≤–∫–ª—é—á–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏**. –ü—Ä–∏–∫–ª–∞–¥:
```js
const url = 'f?p=' + $v('pFlowId') + ':4:' + $v('pInstance') + '::NO::' +
  'P_MODAL_TIMEMODE,P_MODAL_UNIT,P_MODAL_DEPARTMENTS,P_SHIFT_START:' +
  mode + ',' + unit + ',' + departments + ',' + shift_start;

apex.navigation.redirect(url);
```

üìå –ü—ñ—Å–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ **–º–∞—é—Ç—å –æ–ø–∏–Ω–∏—Ç–∏—Å—è –≤ page items**, —Ç–æ–¥—ñ SQL report –ø–æ–±–∞—á–∏—Ç—å —ó—Ö.

---

## üß™ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É

1. **–£–≤—ñ–º–∫–Ω–∏ Debug —Ä–µ–∂–∏–º –≤ APEX (—á–µ—Ä–µ–∑ `?p_debug=yes`)**, –≤—ñ–¥–∫—Ä–∏–π —Å—Ç–æ—Ä—ñ–Ω–∫—É —ñ –≤ **APEX Debug ‚Üí Bind Variables** –ø–µ—Ä–µ–≤—ñ—Ä:
   - –ß–∏ –º–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è `:P_MODAL_TIMEMODE`
   - –ß–∏ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è `WHERE` —É–º–æ–≤–∞ –∑–≥—ñ–¥–Ω–æ –∑ –Ω–∏–º

2. –£ SQL Query —Ç–∏–º—á–∞—Å–æ–≤–æ –¥–æ–¥–∞–π:
```sql
:P_MODAL_TIMEMODE as current_mode
```
—â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ –≤ –∑–≤—ñ—Ç—ñ, —â–æ —Å–∞–º–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç—å.

---

üîÅ –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ, —è –º–æ–∂—É –æ–¥—Ä–∞–∑—É –ø—ñ–¥–≥–æ—Ç—É–≤–∞—Ç–∏ –ø–æ–≤–Ω–∏–π JavaScript-–∫–æ–¥ –¥–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∞–±–æ SQL-–∑–∞–ø–∏—Ç –ø—ñ–¥ debug. –•–æ—á–µ—à?