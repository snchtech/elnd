–î–æ–¥–∞–≤–∞—Ç–∏ `template_id` –¥–æ `SCHEME_VERSION` –º–∞—î —Å–µ–Ω—Å **—É –ø–µ–≤–Ω–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö**, –∞–ª–µ –Ω–µ –∑–∞–≤–∂–¥–∏. –î–∞–≤–∞–π —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ –ø–ª—é—Å–∏ —ñ –º—ñ–Ω—É—Å–∏ —Ü—å–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É, —â–æ–± –≤–∏—Ä—ñ—à–∏—Ç–∏, —á–∏ —Ü–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ —É —Ç–≤–æ—î–º—É –≤–∏–ø–∞–¥–∫—É.

---

## ‚úÖ **–ö–æ–ª–∏ –º–∞—î —Å–µ–Ω—Å –¥–æ–¥–∞–≤–∞—Ç–∏ `template_id` —É `SCHEME_VERSION`?**
1. **–Ø–∫—â–æ —à–∞–±–ª–æ–Ω –º–æ–∂–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏—Å—è –º—ñ–∂ –≤–µ—Ä—Å—ñ—è–º–∏**  
   - –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –ø–æ—Ç–æ—á–Ω–∞ –≤–µ—Ä—Å—ñ—è —Å—Ö–µ–º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –æ–¥–∏–Ω —à–∞–±–ª–æ–Ω (`content`), –∞ –Ω–æ–≤–∞ –≤–µ—Ä—Å—ñ—è –±—É–¥–µ –∑ —ñ–Ω—à–∏–º (`cover`).  
   - –í —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É **–ª–æ–≥—ñ—á–Ω–æ –ø—Ä–∏–≤‚Äô—è–∑–∞—Ç–∏ —à–∞–±–ª–æ–Ω –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó**, –∞ –Ω–µ –¥–æ –≤—Å—ñ—î—ó —Å—Ö–µ–º–∏ –∑–∞–≥–∞–ª–æ–º.

2. **–Ø–∫—â–æ —Ö–æ—á–µ—à –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é –∑–º—ñ–Ω —à–∞–±–ª–æ–Ω—É**  
   - –Ø–∫—â–æ —É —Å—Ç–∞—Ä–∏—Ö –≤–µ—Ä—Å—ñ—è—Ö —Å—Ö–µ–º–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–ª–∞ –æ–¥–∏–Ω —à–∞–±–ª–æ–Ω, –∞ —É –Ω–æ–≤–∏—Ö ‚Äì —ñ–Ω—à–∏–π, –º–æ–∂–Ω–∞ –ª–µ–≥–∫–æ –ø—Ä–æ—Å—Ç–µ–∂–∏—Ç–∏ –∑–º—ñ–Ω–∏.

3. **–Ø–∫—â–æ –≤–µ—Ä—Å—ñ—ó –º–∞—é—Ç—å –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ —Ä—ñ–∑–Ω—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —Å—Ç–æ—Ä—ñ–Ω–æ–∫**  
   - –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —É –≤–µ—Ä—Å—ñ—ó `1.0` —Å—Ö–µ–º–∞ –º–æ–∂–µ –±—É—Ç–∏ –ø—Ä–æ—Å—Ç–æ—é —Ç–∞–±–ª–∏—Ü–µ—é (`default`), –∞ —É `2.0` ‚Äì –∫–æ–º–ø–ª–µ–∫—Å–Ω–∏–º –≥—Ä–∞—Ñ—ñ—á–Ω–∏–º –µ–ª–µ–º–µ–Ω—Ç–æ–º (`custom`).

---

## ‚ùå **–ö–æ–ª–∏ –ù–ï –º–∞—î —Å–µ–Ω—Å—É –¥–æ–¥–∞–≤–∞—Ç–∏ `template_id` —É `SCHEME_VERSION`?**
1. **–Ø–∫—â–æ —à–∞–±–ª–æ–Ω –∑–∞–≤–∂–¥–∏ –ø—Ä–∏–≤‚Äô—è–∑–∞–Ω–∏–π –¥–æ –≤—Å—ñ—î—ó —Å—Ö–µ–º–∏ (`SCHEME`)**  
   - –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ —Ç–∏—Ç—É–ª—å–Ω–∏–π –ª–∏—Å—Ç –∑–∞–≤–∂–¥–∏ –Ω–∞–ª–µ–∂–∏—Ç—å –æ–¥–Ω—ñ–π —Å—Ö–µ–º—ñ —ñ –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è –º—ñ–∂ –≤–µ—Ä—Å—ñ—è–º–∏.

2. **–Ø–∫—â–æ —à–∞–±–ª–æ–Ω –≤–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è –Ω–∞ —Ä—ñ–≤–Ω—ñ –∞–ª—å–±–æ–º—É –∞–±–æ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—É**  
   - –Ø–∫—â–æ `template_id` –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è –¥–ª—è –∫–æ–∂–Ω–æ—ó –æ–∫—Ä–µ–º–æ—ó –≤–µ—Ä—Å—ñ—ó, –∞ –Ω–∞—Å–ª—ñ–¥—É—î—Ç—å—Å—è –≤—ñ–¥ —Å—Ö–µ–º–∏.

3. **–Ø–∫—â–æ –∑–∞–π–≤–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –Ω–µ –≤–∏–ø—Ä–∞–≤–¥–∞–Ω–∞**  
   - –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è `template_id` —É –∫–æ–∂–Ω—ñ–π –≤–µ—Ä—Å—ñ—ó **–º–æ–∂–µ —É—Å–∫–ª–∞–¥–Ω–∏—Ç–∏ –ª–æ–≥—ñ–∫—É**, —è–∫—â–æ –∑–º—ñ–Ω–∏ —à–∞–±–ª–æ–Ω—É –º—ñ–∂ –≤–µ—Ä—Å—ñ—è–º–∏ —Ñ–∞–∫—Ç–∏—á–Ω–æ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è.

---

## üî• **–û–ø—Ç–∏–º–∞–ª—å–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ –¥–ª—è —Ç–≤–æ–≥–æ –≤–∏–ø–∞–¥–∫—É**
–û—Å–∫—ñ–ª—å–∫–∏ **SCHEME** –≤–∂–µ –º—ñ—Å—Ç–∏—Ç—å `template_id`, –º–æ–∂–µ—à **–Ω–µ –¥–æ–¥–∞–≤–∞—Ç–∏ –π–æ–≥–æ —É `SCHEME_VERSION`**, —è–∫—â–æ —à–∞–±–ª–æ–Ω –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è –º—ñ–∂ –≤–µ—Ä—Å—ñ—è–º–∏.

–ê–ª–µ —è–∫—â–æ —à–∞–±–ª–æ–Ω –º–æ–∂–µ –≤—ñ–¥—Ä—ñ–∑–Ω—è—Ç–∏—Å—è –º—ñ–∂ –≤–µ—Ä—Å—ñ—è–º–∏, –∫—Ä–∞—â–µ –∑–∞–ª–∏—à–∏—Ç–∏ `template_id` —É `SCHEME_VERSION`, –∞ —É Next.js —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ª–æ–≥—ñ–∫—É:

1. **–Ø–∫—â–æ —É –≤–µ—Ä—Å—ñ—ó (`SCHEME_VERSION`) `template_id` —î**, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –π–æ–≥–æ.  
2. **–Ø–∫—â–æ `template_id` —É –≤–µ—Ä—Å—ñ—ó `NULL`**, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∑–Ω–∞—á–µ–Ω–Ω—è –∑ –æ—Å–Ω–æ–≤–Ω–æ—ó —Ç–∞–±–ª–∏—Ü—ñ `SCHEME`.  

–¢–æ–¥—ñ SQL-–∑–∞–ø–∏—Ç –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —à–∞–±–ª–æ–Ω—É –≤–∏–≥–ª—è–¥–∞—Ç–∏–º–µ —Ç–∞–∫:

```sql
SELECT COALESCE(sv.template_id, s.template_id) AS template_id
FROM SCHEME_VERSION sv
JOIN SCHEME s ON sv.scheme_id = s.id
WHERE sv.id = :version_id;
```

–¶–µ –¥–æ–∑–≤–æ–ª—è—î –º–∞—Ç–∏ **—É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω—É –ª–æ–≥—ñ–∫—É**, –¥–µ —à–∞–±–ª–æ–Ω –º–æ–∂–Ω–∞ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —è–∫ –Ω–∞ —Ä—ñ–≤–Ω—ñ —Å—Ö–µ–º–∏, —Ç–∞–∫ —ñ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —É –≤–µ—Ä—Å—ñ—è—Ö –ø—Ä–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ.

---

## üöÄ **–í–∏—Å–Ω–æ–≤–æ–∫**
üîπ **–ù–µ –¥–æ–¥–∞–≤–∞–π `template_id` —É `SCHEME_VERSION`, —è–∫—â–æ —à–∞–±–ª–æ–Ω –æ–¥–Ω–∞–∫–æ–≤–∏–π –¥–ª—è –≤—Å—ñ—Ö –≤–µ—Ä—Å—ñ–π —Å—Ö–µ–º–∏.**  
üîπ **–î–æ–¥–∞–≤–∞–π `template_id` —É `SCHEME_VERSION`, —è–∫—â–æ —Ö–æ—á–µ—à –¥–æ–∑–≤–æ–ª–∏—Ç–∏ –∑–º—ñ–Ω—É —à–∞–±–ª–æ–Ω—É –º—ñ–∂ –≤–µ—Ä—Å—ñ—è–º–∏.**  
üîπ **–û–ø—Ç–∏–º–∞–ª—å–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π `COALESCE(sv.template_id, s.template_id)`, —â–æ–± –≤—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ –æ–±–∏–¥–≤–∞ –≤–∏–ø–∞–¥–∫–∏.

–¢–æ–±—Ç–æ, —è–∫—â–æ —Ç–∏ –ø–ª–∞–Ω—É—î—à —É –º–∞–π–±—É—Ç–Ω—å–æ–º—É –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —à–∞–±–ª–æ–Ω–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –≤–µ—Ä—Å—ñ–π ‚Äì –¥–æ–¥–∞–π `template_id` —É `SCHEME_VERSION`. –Ø–∫—â–æ –Ω—ñ ‚Äì –Ω–µ —É—Å–∫–ª–∞–¥–Ω—é–π –ª–æ–≥—ñ–∫—É —ñ –ø—Ä–∞—Ü—é–π —ñ–∑ `template_id` —É `SCHEME`. üöÄ