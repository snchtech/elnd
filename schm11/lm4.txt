–©–æ–± –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–¥–∞–≤–∞—Ç–∏ **JWT —Ç–æ–∫–µ–Ω** –¥–æ –≤—Å—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ API, –Ω–∞–π–∫—Ä–∞—â–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ **—É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π HTTP-–∫–ª—ñ—î–Ω—Ç**. –¶–µ —Å–ø—Ä–æ—Å—Ç–∏—Ç—å –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω–æ–º —ñ –∑–∞–ø–∏—Ç–∞–º–∏.

### üî• **–†—ñ—à–µ–Ω–Ω—è: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ HTTP-–∫–ª—ñ—î–Ω—Ç–∞**

---

### üìÇ **1. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ñ–∞–π–ª—É API –∫–ª—ñ—î–Ω—Ç–∞**

üîπ **`utils/apiClient.js`**

```javascript
const API_URL = 'http://localhost:5000/api';

/**
 * –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞ –∑ localStorage
 */
const getToken = () => {
  return localStorage.getItem('token');
};

/**
 * –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è GET-–∑–∞–ø–∏—Ç—ñ–≤
 */
export const apiGet = async (endpoint) => {
  const token = getToken();

  try {
    const response = await fetch(`${API_URL}${endpoint}`, {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        Authorization: `Bearer ${token}`,  // ‚úÖ –î–æ–¥–∞—î–º–æ —Ç–æ–∫–µ–Ω –¥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞
      },
    });

    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }

    return await response.json();
  } catch (error) {
    console.error('‚ùå API GET Error:', error);
    throw error;
  }
};

/**
 * –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è POST-–∑–∞–ø–∏—Ç—ñ–≤
 */
export const apiPost = async (endpoint, body) => {
  const token = getToken();

  try {
    const response = await fetch(`${API_URL}${endpoint}`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        Authorization: `Bearer ${token}`,  // ‚úÖ –î–æ–¥–∞—î–º–æ —Ç–æ–∫–µ–Ω –¥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞
      },
      body: JSON.stringify(body),
    });

    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }

    return await response.json();
  } catch (error) {
    console.error('‚ùå API POST Error:', error);
    throw error;
  }
};
```

---

### üîÑ **2. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è API –∫–ª—ñ—î–Ω—Ç–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ**

–¢–µ–ø–µ—Ä —Å–ø—Ä–æ—Å—Ç–∏–º–æ –∑–∞–ø–∏—Ç–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ.

üîπ **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ `useEffect`:**

```javascript
import { useEffect, useState } from 'react';
import { apiGet } from '../utils/apiClient';

const DepartmentUnitLoader = () => {
  const [departments, setDepartments] = useState([]);
  const [units, setUnits] = useState([]);

  useEffect(() => {
    const fetchData = async () => {
      try {
        const departmentsData = await apiGet('/departments');
        setDepartments(departmentsData);

        const unitsData = await apiGet('/units');
        setUnits(unitsData);
      } catch (error) {
        console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö:', error);
      }
    };

    fetchData();
  }, []);

  return (
    <div>
      <h2>–í—ñ–¥–¥—ñ–ª–∏</h2>
      <ul>
        {departments.map((dep) => (
          <li key={dep.id}>{dep.name}</li>
        ))}
      </ul>

      <h2>–ü—É–Ω–∫—Ç–∏</h2>
      <ul>
        {units.map((unit) => (
          <li key={unit.id}>{unit.name}</li>
        ))}
      </ul>
    </div>
  );
};

export default DepartmentUnitLoader;
```

---

### üîë **3. –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞ –ø—ñ—Å–ª—è –ª–æ–≥—ñ–Ω—É**

–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ—ó –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–±–µ—Ä–µ–≥—Ç–∏ —Ç–æ–∫–µ–Ω —É **`localStorage`**.

üîπ **–õ–æ–≥—ñ–∫–∞ –ª–æ–≥—ñ–Ω—É:**

```javascript
import { useState } from 'react';

const LoginPage = () => {
  const [username, setUsername] = useState('');
  const [password, setPassword] = useState('');

  const handleLogin = async () => {
    try {
      const response = await fetch('http://localhost:5000/api/login', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ username, password }),
      });

      const data = await response.json();

      if (data.status === 'validated') {
        localStorage.setItem('token', data.token);  // ‚úÖ –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —Ç–æ–∫–µ–Ω
        alert('‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è —É—Å–ø—ñ—à–Ω–∞!');
      } else {
        alert('‚ùå –ü–æ–º–∏–ª–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó');
      }
    } catch (error) {
      console.error('‚ùå –õ–æ–≥—ñ–Ω –ø–æ–º–∏–ª–∫–∞:', error);
    }
  };

  return (
    <div>
      <h2>–õ–æ–≥—ñ–Ω</h2>
      <input
        type="text"
        placeholder="–õ–æ–≥—ñ–Ω"
        value={username}
        onChange={(e) => setUsername(e.target.value)}
      />
      <input
        type="password"
        placeholder="–ü–∞—Ä–æ–ª—å"
        value={password}
        onChange={(e) => setPassword(e.target.value)}
      />
      <button onClick={handleLogin}>–í—Ö—ñ–¥</button>
    </div>
  );
};

export default LoginPage;
```

---

### üîç **4. –í–∞–∂–ª–∏–≤—ñ –º–æ–º–µ–Ω—Ç–∏**

1. **üõ° –ë–µ–∑–ø–µ–∫–∞**  
   - –£ —Ä–µ–∞–ª—å–Ω–æ–º—É –ø—Ä–æ–µ–∫—Ç—ñ –∫—Ä–∞—â–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Ç–æ–∫–µ–Ω –≤ **HTTP-only cookie**, –∞ –Ω–µ –≤ **`localStorage`**, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ XSS-–∞—Ç–∞–∫.

2. **üì§ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞**  
   - –Ø–∫—â–æ —î **refresh —Ç–æ–∫–µ–Ω**, –π–æ–≥–æ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è **access —Ç–æ–∫–µ–Ω–∞**.

3. **üõ† –ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å**  
   - –Ø–∫—â–æ –∑–∞–ø–∏—Ç—ñ–≤ –±–∞–≥–∞—Ç–æ, –≤–∞—Ä—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏, —è–∫-–æ—Ç **Axios**, —è–∫–∞ –¥–æ–∑–≤–æ–ª—è—î –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —ñ–Ω—Ç–µ—Ä—Å–µ–ø—Ç–æ—Ä–∏ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤.

---

### ‚úÖ **–ü–µ—Ä–µ–≤–∞–≥–∏ —Ç–∞–∫–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É**

- **–Ñ–¥–∏–Ω–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º** –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞ –¥–æ –≤—Å—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤.  
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞** –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è (–ª–µ–≥–∫–æ –¥–æ–¥–∞—Ç–∏ PUT, DELETE).  
- **–ì–Ω—É—á–∫—ñ—Å—Ç—å** (–º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞).

–¢–µ–ø–µ—Ä –∫–æ–∂–µ–Ω –∑–∞–ø–∏—Ç –¥–æ **API** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ—Ç—Ä–∏–º—É—î **JWT —Ç–æ–∫–µ–Ω**!