### üîß **1. –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏ `component definition is missing display name`**

–¶—è –ø–æ–º–∏–ª–∫–∞ –≤–∏–Ω–∏–∫–∞—î, –∫–æ–ª–∏ –∞–Ω–æ–Ω—ñ–º–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —è–∫ React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç. React —Ä–µ–∫–æ–º–µ–Ω–¥—É—î –∑–∞–¥–∞–≤–∞—Ç–∏ **displayName** –¥–ª—è –∑—Ä—É—á–Ω–æ—Å—Ç—ñ –≤ –¥–µ–±–∞–≥—ñ–Ω–≥—É.

### ‚úÖ **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∫–æ–¥ `withAuth.js`**

```javascript
'use client';
import { useAuth } from '../context/AuthContext';
import { useRouter } from 'next/navigation';
import { useEffect } from 'react';

const withAuth = (WrappedComponent, requiredRole) => {
  const ComponentWithAuth = (props) => {
    const { user } = useAuth();
    const router = useRouter();

    useEffect(() => {
      if (!user) {
        router.push('/login');  // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –ª–æ–≥—ñ–Ω—É
      } else if (requiredRole && !user.roles.includes(requiredRole)) {
        router.push('/');  // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –Ω–∞ –≥–æ–ª–æ–≤–Ω—É, —è–∫—â–æ –Ω–µ–º–∞—î –¥–æ—Å—Ç—É–ø—É
      }
    }, [user]);

    if (!user || (requiredRole && !user.roles.includes(requiredRole))) {
      return null;
    }

    return <WrappedComponent {...props} />;
  };

  ComponentWithAuth.displayName = `withAuth(${WrappedComponent.displayName || WrappedComponent.name || 'Component'})`;

  return ComponentWithAuth;
};

export default withAuth;
```

üîé **–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—å?**
- –î–æ–¥–∞–Ω–æ —ñ–º'—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `ComponentWithAuth` –∑–∞–º—ñ—Å—Ç—å –∞–Ω–æ–Ω—ñ–º–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó.  
- –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ **displayName** –¥–ª—è –∫—Ä–∞—â–æ–≥–æ –¥–µ–±–∞–≥—ñ–Ω–≥—É.

---

### üîí **2. –Ø–∫ –ø—Ä–∞—Ü—é—î `<AuthProvider>` —ñ –¥–µ –π–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏?**

üì¶ **`AuthProvider`** ‚Äî —Ü–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç, —è–∫–∏–π –∑–±–µ—Ä—ñ–≥–∞—î –¥–∞–Ω—ñ –ø—Ä–æ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (—Ç–æ–∫–µ–Ω, —Ä–æ–ª—ñ, –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞).

### üìå **–ü—Ä–∏–∫–ª–∞–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –ø—Ä–æ–µ–∫—Ç—É:**

```
/app
  ‚îú‚îÄ‚îÄ /components
  ‚îÇ     ‚îú‚îÄ‚îÄ ProtectedPage.js
  ‚îÇ     ‚îî‚îÄ‚îÄ Navbar.js
  ‚îú‚îÄ‚îÄ /context
  ‚îÇ     ‚îî‚îÄ‚îÄ AuthContext.js
  ‚îú‚îÄ‚îÄ /pages
  ‚îÇ     ‚îú‚îÄ‚îÄ _app.js
  ‚îÇ     ‚îú‚îÄ‚îÄ index.js
  ‚îÇ     ‚îî‚îÄ‚îÄ login.js
```

### üì• **`AuthContext.js`**

```javascript
'use client';
import { createContext, useContext, useEffect, useState } from 'react';

const AuthContext = createContext();

export const AuthProvider = ({ children }) => {
  const [user, setUser] = useState(null);

  useEffect(() => {
    const storedUser = JSON.parse(localStorage.getItem('user'));
    if (storedUser) {
      setUser(storedUser);
    }
  }, []);

  const login = (userData) => {
    localStorage.setItem('user', JSON.stringify(userData));
    setUser(userData);
  };

  const logout = () => {
    localStorage.removeItem('user');
    setUser(null);
  };

  return (
    <AuthContext.Provider value={{ user, login, logout }}>
      {children}
    </AuthContext.Provider>
  );
};

export const useAuth = () => useContext(AuthContext);
```

üîë **–©–æ —Ç—É—Ç –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è?**
- **user** –∑–±–µ—Ä—ñ–≥–∞—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.  
- **login(userData)** –∑–±–µ—Ä—ñ–≥–∞—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ `localStorage` —ñ –æ–Ω–æ–≤–ª—é—î —Å—Ç–∞–Ω.  
- **logout()** –æ—á–∏—â–∞—î —Å–µ—Å—ñ—é.  

---

### üõ† **3. –î–µ —ñ —è–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `<AuthProvider>`**

### üìÑ **`_app.js` (–ì–ª–æ–±–∞–ª—å–Ω–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è)**

```javascript
'use client';
import { AuthProvider } from '../context/AuthContext';

export default function App({ Component, pageProps }) {
  return (
    <AuthProvider>
      <Component {...pageProps} />
    </AuthProvider>
  );
}
```

üìå **–©–æ —Ü–µ –¥–∞—î?**  
–¢–µ–ø–µ—Ä **—É—Å—ñ** —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ—Ç—Ä–∏–º—É—é—Ç—å –¥–æ—Å—Ç—É–ø –¥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ `useAuth()`.

---

### üîó **4. –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è –∑–∞—Ö–∏—â–µ–Ω–∏—Ö —Å—Ç–æ—Ä—ñ–Ω–æ–∫**

### üìÑ **–ü—Ä–∏–∫–ª–∞–¥ –∑–∞—Ö–∏—â–µ–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ `pages/protected.js`**

```javascript
'use client';
import withAuth from '../middleware/withAuth';

const ProtectedPage = () => {
  return <h1>–¶–µ –∑–∞—Ö–∏—â–µ–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –¥–ª—è —Ä–æ–ª—ñ Editor</h1>;
};

export default withAuth(ProtectedPage, 'Editor');
```

üìå **–©–æ —Ç—É—Ç –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è?**  
- **`withAuth`** –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Ä–æ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.  
- –Ø–∫—â–æ —Ä–æ–ª—å **Editor** —î ‚Üí –¥–æ—Å—Ç—É–ø –¥–æ–∑–≤–æ–ª–µ–Ω–∏–π.  
- –Ø–∫—â–æ –Ω—ñ ‚Üí —Ä–µ–¥—ñ—Ä–µ–∫—Ç –Ω–∞ –≥–æ–ª–æ–≤–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É.

---

### üåê **5. –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ç–æ–∫–µ–Ω —É fetch-–∑–∞–ø–∏—Ç–∞—Ö**

### üì• **–ì–ª–æ–±–∞–ª—å–Ω–∏–π fetch —ñ–∑ —Ç–æ–∫–µ–Ω–æ–º (`utils/fetchWithAuth.js`)**

```javascript
'use client';

export const fetchWithAuth = async (url, options = {}) => {
  const token = localStorage.getItem('accessToken');

  const headers = {
    ...options.headers,
    Authorization: `Bearer ${token}`,
    'Content-Type': 'application/json',
  };

  const res = await fetch(url, { ...options, headers });

  if (res.status === 401) {
    console.warn('Unauthorized. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –ª–æ–≥—ñ–Ω—É.');
    window.location.href = '/login';
  }

  return res.json();
};
```

---

### üìÑ **–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è fetch**

```javascript
'use client';
import { useEffect, useState } from 'react';
import { fetchWithAuth } from '../utils/fetchWithAuth';

const Departments = () => {
  const [departments, setDepartments] = useState([]);

  useEffect(() => {
    const loadDepartments = async () => {
      try {
        const data = await fetchWithAuth('http://localhost:5000/api/departments');
        setDepartments(data);
      } catch (error) {
        console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è:', error);
      }
    };

    loadDepartments();
  }, []);

  return (
    <div>
      <h2>–í—ñ–¥–¥—ñ–ª–∏</h2>
      <ul>
        {departments.map(dep => (
          <li key={dep.id}>{dep.name}</li>
        ))}
      </ul>
    </div>
  );
};

export default Departments;
```

---

### üì¶ **–í–∏—Å–Ω–æ–≤–æ–∫**

1. **–ü–æ–º–∏–ª–∫—É `displayName`** –º–∏ –≤–∏–ø—Ä–∞–≤–∏–ª–∏, –∑—Ä–æ–±–∏–≤—à–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —ñ–º–µ–Ω–æ–≤–∞–Ω–∏–º.  
2. **`<AuthProvider>`** –¥–æ–¥–∞–Ω–æ –≤ `_app.js`, —â–æ –¥–æ–∑–≤–æ–ª—è—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—î—é —É –≤—Å—ñ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö.  
3. **–ó–∞–ø–∏—Ç–∏ `fetch`** —Ç–µ–ø–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–¥–∞—é—Ç—å **JWT Token** –¥–æ –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤.  
4. **–ó–∞—Ö–∏—â–µ–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏** –æ–±–º–µ–∂—É—é—Ç—å –¥–æ—Å—Ç—É–ø –∑–∞ —Ä–æ–ª—è–º–∏.

–¢–∞–∫–∏–π –ø—ñ–¥—Ö—ñ–¥ —î –±–µ–∑–ø–µ—á–Ω–∏–º —ñ –∑—Ä—É—á–Ω–∏–º –¥–ª—è –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É.