–©–æ–± —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ **–∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø—É –Ω–∞ —Ä—ñ–≤–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–æ–∫ —ñ –æ–∫—Ä–µ–º–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤** –≤ Next.js —á–µ—Ä–µ–∑ HOC (`withAuth`), –ø–æ—Ç—Ä—ñ–±–Ω–æ:

1. **–û–±–º–µ–∂–∏—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ —Å—Ç–æ—Ä—ñ–Ω–æ–∫** ‚Äì —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –º–∞—î –ø–æ—Ç—Ä—ñ–±–Ω–æ—ó —Ä–æ–ª—ñ, –π–æ–≥–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –ª–æ–≥—ñ–Ω—É –∞–±–æ —ñ–Ω—à—É –≤–∏–∑–Ω–∞—á–µ–Ω—É.
2. **–ü—Ä–∏—Ö–æ–≤—É–≤–∞—Ç–∏ –æ–∫—Ä–µ–º—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏** ‚Äì —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –º–∞—î –¥–æ–∑–≤–æ–ª–µ–Ω–æ—ó —Ä–æ–ª—ñ, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–æ—Å—Ç–æ –Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è.

---

### üîπ **–û–Ω–æ–≤–ª–µ–Ω–∏–π `withAuth.js` –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É —Å—Ç–æ—Ä—ñ–Ω–æ–∫**
```javascript
'use client';

import { useAuth } from '../context/AuthContext';
import { useRouter } from 'next/navigation';
import { useEffect, useState } from 'react';

// –ú–∞–ø–∞ —Ä–æ–ª–µ–π (—è–∫—â–æ —Ç—Ä–µ–±–∞ —Ä–æ–∑—à–∏—Ä–∏—Ç–∏ –¥–æ—Å—Ç—É–ø, —Ä–µ–¥–∞–≥—É—î–º–æ —Ç—É—Ç)
const ROLE_HIERARCHY = {
  viewer: ['viewer'],
  editor: ['editor', 'viewer'],
  creator: ['creator', 'editor', 'viewer'],
  admin: ['admin', 'creator', 'editor', 'viewer'],
};

const withAuth = (WrappedComponent, requiredRole = null) => {
  const AuthHOC = (props) => {
    const { authStatus, user, setUser } = useAuth();
    const router = useRouter();
    const [loading, setLoading] = useState(true);

    useEffect(() => {
      const fetchUserData = async () => {
        try {
          const response = await fetch('/api/getUserData', {
            method: 'GET',
            credentials: 'include',
            headers: { 'Content-Type': 'application/json' },
          });

          if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
          }

          const data = await response.json();
          if (data.userData) {
            setUser(data.userData);
          } else {
            throw new Error('No user data');
          }
        } catch (error) {
          console.error('Error fetching user data:', error);
          router.push('/login'); // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –Ω–∞ –ª–æ–≥—ñ–Ω
        } finally {
          setLoading(false);
        }
      };

      fetchUserData();
    }, []);

    if (loading) {
      return <p>Loading...</p>;
    }

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–ª—ñ
    if (requiredRole && (!user || !ROLE_HIERARCHY[requiredRole]?.includes(user.role))) {
      return <p>Access Denied</p>; // –ê–±–æ –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ —Ä–µ–¥—ñ—Ä–µ–∫—Ç, –∞–±–æ –ø–æ–∫–∞–∑–∞—Ç–∏ –∫–∞—Å—Ç–æ–º–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
    }

    return <WrappedComponent {...props} />;
  };

  AuthHOC.displayName = `withAuth(${WrappedComponent.displayName || WrappedComponent.name || 'Component'})`;

  return AuthHOC;
};

export default withAuth;
```

---
### üîπ **–§—É–Ω–∫—Ü—ñ—è `CanAccess` –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—é –¥–æ—Å—Ç—É–ø—É –¥–æ –æ–∫—Ä–µ–º–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤**
–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ **–ø—Ä–∏—Ö–æ–≤–∞—Ç–∏ –∫–Ω–æ–ø–∫–∏, –ø–∞–Ω–µ–ª—ñ —á–∏ –±–ª–æ–∫–∏** –¥–ª—è –ø–µ–≤–Ω–∏—Ö —Ä–æ–ª–µ–π, –∫—Ä–∞—â–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–∫—Ä–µ–º–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç.

#### **`CanAccess.js`**
```javascript
const CanAccess = ({ role, userRole, children }) => {
  if (!userRole || !ROLE_HIERARCHY[userRole]?.includes(role)) {
    return null; // –Ø–∫—â–æ –Ω–µ–º–∞—î –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É ‚Äì –Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏–º–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
  }
  return children;
};

export default CanAccess;
```

---
### üîπ **–Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `withAuth` –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É —Å—Ç–æ—Ä—ñ–Ω–æ–∫**
```javascript
import withAuth from '../hoc/withAuth';

const EditorPage = () => {
  return <h1>Welcome to the Editor Page</h1>;
};

export default withAuth(EditorPage, 'editor');
```

–¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ —Ç—ñ–ª—å–∫–∏ **editor —Ç–∞ –≤–∏—â—ñ —Ä–æ–ª—ñ** –º–æ–∂—É—Ç—å –≤—ñ–¥–∫—Ä–∏—Ç–∏ —Ü—é —Å—Ç–æ—Ä—ñ–Ω–∫—É.

---
### üîπ **–Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `CanAccess` –¥–ª—è –ø—Ä–∏—Ö–æ–≤—É–≤–∞–Ω–Ω—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤**
```javascript
import CanAccess from '../hoc/CanAccess';
import { useAuth } from '../context/AuthContext';

const SomeComponent = () => {
  const { user } = useAuth();

  return (
    <div>
      <h1>Welcome!</h1>

      {/* –ü—Ä–∏—Ö–æ–≤—É—î–º–æ –∫–Ω–æ–ø–∫—É –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –±–µ–∑ —Ä–æ–ª—ñ admin */}
      <CanAccess role="admin" userRole={user?.role}>
        <button>Delete Data</button>
      </CanAccess>
    </div>
  );
};

export default SomeComponent;
```

---
### **‚úÖ –ü—ñ–¥—Å—É–º–æ–∫**
‚úî **withAuth** ‚Üí –ó–∞–±–µ–∑–ø–µ—á—É—î –¥–æ—Å—Ç—É–ø –¥–æ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –ª–∏—à–µ –¥–ª—è –¥–æ–∑–≤–æ–ª–µ–Ω–∏—Ö —Ä–æ–ª–µ–π.<br>
‚úî **CanAccess** ‚Üí –ü—Ä–∏—Ö–æ–≤—É—î –æ–∫—Ä–µ–º—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–Ω–æ–ø–∫–∏, –ø–∞–Ω–µ–ª—ñ) –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –±–µ–∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –ø—Ä–∞–≤.<br>
‚úî **–ì–Ω—É—á–∫—ñ—Å—Ç—å** ‚Üí –õ–µ–≥–∫–æ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–ª—è –Ω–æ–≤–∏—Ö —Ä–æ–ª–µ–π —É `ROLE_HIERARCHY`.<br>

üîπ –¢–µ–ø–µ—Ä —Ç–∏ –º–æ–∂–µ—à **–≥–Ω—É—á–∫–æ –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ –¥–æ—Å—Ç—É–ø —è–∫ –¥–æ —Å—Ç–æ—Ä—ñ–Ω–æ–∫, —Ç–∞–∫ —ñ –¥–æ –æ–∫—Ä–µ–º–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤** —É Next.js! üöÄ