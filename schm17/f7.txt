### ‚úÖ **–ê–Ω–∞–ª—ñ–∑ –¥–≤–æ—Ö –ø—ñ–¥—Ö–æ–¥—ñ–≤ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó —Ç–æ–∫–µ–Ω—ñ–≤**
–¢–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—ñ–¥–º—ñ—Ç–∏–≤ –ø—Ä–æ–±–ª–µ–º—É –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ–≥–æ **—Ä–æ–∑—Å–∏–Ω—Ö—Ä–æ–Ω—É —Ç–æ–∫–µ–Ω—ñ–≤** –º—ñ–∂ Next.js API —Ç–∞ —Å—Ç–æ—Ä–æ–Ω–Ω—ñ–º API. –î–∞–≤–∞–π —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ –æ–±–∏–¥–≤–∞ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ —Ç–∞ —ó—Ö –ø–ª—é—Å–∏/–º—ñ–Ω—É—Å–∏.

---

## **üîπ –í–∞—Ä—ñ–∞–Ω—Ç 1: –§—ñ–∫—Å–æ–≤–∞–Ω–∏–π —á–∞—Å –∂–∏—Ç—Ç—è —Ç–æ–∫–µ–Ω—ñ–≤**
üìå **–©–æ —Ç–∏ –ø—Ä–æ–ø–æ–Ω—É—î—à?**
- `refreshToken` —ñ `refreshTokenEtls` –∂–∏–≤—É—Ç—å **12 –≥–æ–¥–∏–Ω**.
- `accessToken` –∂–∏–≤–µ **10 —Ö–≤–∏–ª–∏–Ω**.
- `accessTokenEtls` –∂–∏–≤–µ **30-40 —Ö–≤–∏–ª–∏–Ω**.
- **–ö–æ–∂–Ω—ñ 30-40 —Ö–≤–∏–ª–∏–Ω –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è `accessTokenEtls` —á–µ—Ä–µ–∑ `refreshTokenEtls`**.

üìå **–ü—Ä–æ–±–ª–µ–º–∞ –∑ —Ü–∏–º –ø—ñ–¥—Ö–æ–¥–æ–º**  
- **–†–∏–∑–∏–∫ —Ä–æ–∑—Å–∏–Ω—Ö—Ä–æ–Ω—É**: —è–∫—â–æ `refreshToken` –Ω–∞ API –≤–∂–µ –Ω–µ–¥—ñ–π—Å–Ω–∏–π (–∑–∞–∫—ñ–Ω—á–∏–≤—Å—è —á–µ—Ä–µ–∑ 12 –≥–æ–¥–∏–Ω), –∞ `refreshTokenEtls` —â–µ –∂–∏–≤–∏–π, —Ç–æ –≤ Next.js –≤—ñ–Ω –±—É–¥–µ —â–µ **–¥–µ—è–∫–∏–π —á–∞—Å –≤–∞–ª—ñ–¥–Ω–∏–º**, —â–æ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –ø–æ–º–∏–ª–∫–∏ –ø—Ä–∏ —Å–ø—Ä–æ–±—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è `accessTokenEtls`.
- **–û–Ω–æ–≤–ª–µ–Ω–Ω—è `accessTokenEtls` –Ω–µ –∑–∞–≤–∂–¥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–µ**: –Ø–∫—â–æ `accessTokenEtls` –∂–∏–≤–µ 40 —Ö–≤, —Ç–æ –≤–æ–Ω–æ –º–æ–∂–µ –Ω–µ –∑–±—ñ–≥–∞—Ç–∏—Å—è –∑ –∂–∏—Ç—Ç—î–≤–∏–º —Ü–∏–∫–ª–æ–º `refreshToken`.

üìå **–ö–æ–ª–∏ —Ü–µ–π –≤–∞—Ä—ñ–∞–Ω—Ç –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ –¥–æ–±—Ä–µ?**  
- –Ø–∫—â–æ **–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∞–∫—Ç–∏–≤–Ω–æ –∫–æ—Ä–∏—Å—Ç—É—î—Ç—å—Å—è –¥–æ–¥–∞—Ç–∫–æ–º**, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –±—É–¥–µ –≤—ñ–¥–±—É–≤–∞—Ç–∏—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ, —ñ —Ç–∏ –Ω–µ –ø–æ–º—ñ—Ç–∏—à –ø—Ä–æ–±–ª–µ–º.
- –ê–ª–µ —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á **–¥–æ–≤–≥–æ –Ω–µ –∑–∞—Ö–æ–¥–∏–≤**, –π–æ–≥–æ `refreshTokenEtls` –º–æ–∂–µ –±—É—Ç–∏ —â–µ –≤–∞–ª—ñ–¥–Ω–∏–º, –∞ `refreshToken` –Ω–∞ API ‚Äì –Ω—ñ. 

**üîπ –í–∏—Å–Ω–æ–≤–æ–∫:** ‚ùå **–†–∏–∑–∏–∫ —Ä–æ–∑—Å–∏–Ω—Ö—Ä–æ–Ω—É –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è**.

---

## **üîπ –í–∞—Ä—ñ–∞–Ω—Ç 2: –î–∏–Ω–∞–º—ñ—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è `accessTokenEtls` –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ `refreshExpireIn`**
üìå **–©–æ —Ç–∏ –ø—Ä–æ–ø–æ–Ω—É—î—à?**
- –ü—Ä–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ `accessTokenEtls` –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏:
  1. `accessTokenEtlsExp < refreshExpireIn`
  2. `refreshExpireIn - refreshEtlsExpireIn < 2 –≥–æ–¥–∏–Ω–∏`
- –Ø–∫—â–æ —Ü—ñ —É–º–æ–≤–∏ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è ‚Üí –æ–Ω–æ–≤–ª—é—î–º–æ `refreshTokenEtls` —Ç–∞ `accessTokenEtls`.

üìå **–ü–µ—Ä–µ–≤–∞–≥–∏ —Ü—å–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É:**
- **–ö—Ä–∞—â–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –º—ñ–∂ —Ç–æ–∫–µ–Ω–∞–º–∏**: `refreshTokenEtls` –Ω–µ –ø—Ä–æ–¥–æ–≤–∂—É—î—Ç—å—Å—è –¥–æ–≤—à–µ, –Ω—ñ–∂ `refreshToken` –Ω–∞ API.
- **–ó–º–µ–Ω—à–µ–Ω–Ω—è –∑–∞–π–≤–∏—Ö –æ–Ω–æ–≤–ª–µ–Ω—å**: –æ–Ω–æ–≤–ª–µ–Ω–Ω—è `refreshTokenEtls` –±—É–¥–µ —Ç—ñ–ª—å–∫–∏ –≤ —Ä–∞–∑—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ.

üìå **–ú–æ–∂–ª–∏–≤–∞ –ø—Ä–æ–±–ª–µ–º–∞:**
- **–ß–∞—Å—Ç–æ—Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ `refreshExpireIn`**: —Ç–∏ –º—É—Å–∏—à –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Ü–µ –∑–Ω–∞—á–µ–Ω–Ω—è **–ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É –æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ `accessTokenEtls`**, —â–æ –º–æ–∂–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –∑–∞–π–≤—ñ –∑–∞–ø–∏—Ç–∏ –¥–æ API.

**üîπ –í–∏—Å–Ω–æ–≤–æ–∫:** ‚úÖ **–ö—Ä–∞—â–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç, –±–æ –∫–æ–Ω—Ç—Ä–æ–ª—é—î —Ä–æ–∑—Å–∏–Ω—Ö—Ä–æ–Ω**.

---

## **üîπ –¢—Ä–µ—Ç—ñ–π (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π) –≤–∞—Ä—ñ–∞–Ω—Ç**
üìå **–ú—ñ–π –≤–∞—Ä—ñ–∞–Ω—Ç —Ä—ñ—à–µ–Ω–Ω—è:**
- –ü—Ä–∏ **–∫–æ–∂–Ω–æ–º—É –æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ `accessTokenEtls`**, –≤–∏–∫–æ–Ω—É—î–º–æ **–æ–∫—Ä–µ–º–∏–π –∑–∞–ø–∏—Ç** –¥–æ API:
  ```javascript
  const refreshInfo = await fetch(`${REMOTE_API}/token-info`, { method: "GET" });
  const { refreshExpireIn } = await refreshInfo.json();
  ```
- –Ø–∫—â–æ **refreshExpireIn ‚â§ refreshTokenEtlsExp**, —Ç–æ –≤–∏–∫–æ–Ω—É—î–º–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è **–æ–±–æ—Ö** —Ç–æ–∫–µ–Ω—ñ–≤ (`accessTokenEtls` —ñ `refreshTokenEtls`).
- –Ø–∫—â–æ **refreshExpireIn > refreshTokenEtlsExp**, —Ç–æ –æ–Ω–æ–≤–ª—é—î–º–æ –ª–∏—à–µ `accessTokenEtls`.

üìå **–ß–æ–º—É —Ü–µ —Ö–æ—Ä–æ—à–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç?**
‚úî **–ó–∞–≤–∂–¥–∏ –æ—Ç—Ä–∏–º—É—î–º–æ –∞–∫—Ç—É–∞–ª—å–Ω–∏–π —á–∞—Å –∂–∏—Ç—Ç—è `refreshToken` —ñ–∑ API**.  
‚úî **–ù–µ –∑–ª–æ–≤–∂–∏–≤–∞—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º `refreshTokenEtls` –±–µ–∑ –ø–æ—Ç—Ä–µ–±–∏**.  
‚úî **–ì–∞—Ä–∞–Ω—Ç—É—î, —â–æ `refreshTokenEtls` –Ω–µ –ø–µ—Ä–µ–≤–∏—â–∏—Ç—å —Ç–µ—Ä–º—ñ–Ω –¥—ñ—ó `refreshToken` API**.

**üîπ –í–∏—Å–Ω–æ–≤–æ–∫:** üî• **–ù–∞–π–∫—Ä–∞—â–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç, –æ—Å–∫—ñ–ª—å–∫–∏ —É—Å—É–≤–∞—î –ø—Ä–æ–±–ª–µ–º—É —Ä–æ–∑—Å–∏–Ω—Ö—Ä–æ–Ω—É –ø–æ–≤–Ω—ñ—Å—Ç—é.**  

---

## ‚úÖ **üìå –ü—ñ–¥—Å—É–º–æ–∫**
| –í–∞—Ä—ñ–∞–Ω—Ç | –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è | –ü—Ä–æ–±–ª–µ–º–∏ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è |
|---------|--------------|----------|--------------|
| **1. –§—ñ–∫—Å–æ–≤–∞–Ω—ñ —Ç–æ–∫–µ–Ω–∏** | ‚ùå –ù–µ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω—ñ | `refreshTokenEtls` –º–æ–∂–µ –±—É—Ç–∏ –≤–∞–ª—ñ–¥–Ω–∏–º, –∞ `refreshToken` ‚Äì –Ω—ñ | –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é |
| **2. –î–∏–Ω–∞–º—ñ—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è `accessTokenEtls`** | ‚úÖ –ö—Ä–∞—â–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è | –ü–æ—Ç—Ä—ñ–±–Ω–æ —â–æ—Ä–∞–∑—É –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ `refreshExpireIn` | –•–æ—Ä–æ—à–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç |
| **3. –û–∫—Ä–µ–º–∏–π –∑–∞–ø–∏—Ç –¥–æ API `token-info`** | üî• –Ü–¥–µ–∞–ª—å–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è | –î–æ–¥–∞—î –æ–¥–∏–Ω –∑–∞–π–≤–∏–π –∑–∞–ø–∏—Ç | –ù–∞–π–∫—Ä–∞—â–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç |

üîπ **–†–µ–∫–æ–º–µ–Ω–¥—É—é –ø—ñ–¥—Ö—ñ–¥ ‚Ññ3, –æ—Å–∫—ñ–ª—å–∫–∏ –≤—ñ–Ω –≤–∏—Ä—ñ—à—É—î –≤—Å—ñ –ø—Ä–æ–±–ª–µ–º–∏ —ñ –≥–∞—Ä–∞–Ω—Ç—É—î 100% —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—é —Ç–æ–∫–µ–Ω—ñ–≤ –º—ñ–∂ API —Ç–∞ Next.js. üöÄ**