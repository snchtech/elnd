### ‚úÖ **üìå –î–æ–¥–∞—î–º–æ `logger` —É `redirectToLogin`**
–©–æ–± **–ª–æ–≥—É–≤–∞—Ç–∏ –ø–æ–¥—ñ—ó —Ä–æ–∑–ª–æ–≥—ñ–Ω—é–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤**, –ø–æ—Ç—Ä—ñ–±–Ω–æ:
1. **–õ–æ–≥—É–≤–∞—Ç–∏ –≤–∏–∫–ª–∏–∫ `redirectToLogin()`**.
2. **–Ø–∫—â–æ —î `req`, –ª–æ–≥—É–≤–∞—Ç–∏ `user-agent` –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞**.
3. **–Ø–∫—â–æ —î `cookies`, –ª–æ–≥—É–≤–∞—Ç–∏ `userId` –ø–µ—Ä–µ–¥ –≤–∏–¥–∞–ª–µ–Ω–Ω—è–º (—è–∫—â–æ –º–æ–∂–ª–∏–≤–æ).**  
4. **–õ–æ–≥—É–≤–∞—Ç–∏ –ø–æ–º–∏–ª–∫–∏ (—è–∫—â–æ `req` –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω–∏–π)**.

---

## üîπ **üìå –û–Ω–æ–≤–ª–µ–Ω–∏–π `redirectToLogin.js` –∑ `logger`**
```javascript
import { NextResponse } from "next/server";
import { cookies } from "next/headers";
import logger from "@/utils/logger"; // üîπ –Ü–º–ø–æ—Ä—Ç—É—î–º–æ –ª–æ–≥–µ—Ä

export function redirectToLogin(req) {
  try {
    const cookieStore = cookies();
    const userDataEtls = cookieStore.get("userDataEtls")?.value;

    let userId = "Unknown";
    if (userDataEtls) {
      try {
        const payload = JSON.parse(atob(userDataEtls.split(".")[1])); // –†–æ–∑—à–∏—Ñ—Ä–æ–≤–∫–∞ `JWT payload`
        userId = payload.userId || "Unknown";
      } catch (error) {
        logger.warn("Failed to decode userDataEtls token.");
      }
    }

    logger.info(`Redirecting user (ID=${userId}) to /login`);

    return NextResponse.redirect(new URL("/login", req.url), {
      headers: {
        "Set-Cookie": [
          "accessTokenEtls=; HttpOnly; Path=/; Max-Age=0",
          "refreshTokenEtls=; HttpOnly; Path=/; Max-Age=0",
          "userDataEtls=; HttpOnly; Path=/; Max-Age=0",
        ].join(", "),
      },
    });
  } catch (error) {
    logger.error(`Error in redirectToLogin: ${error.message}`);
    return NextResponse.redirect(new URL("/login", "/"));
  }
}
```

---

## ‚úÖ **üìå –©–æ —Ç—É—Ç –∑—Ä–æ–±–ª–µ–Ω–æ?**
| **–©–æ –ª–æ–≥—É—î–º–æ?** | **–ü—Ä–∏–∫–ª–∞–¥ –ª–æ–≥—É** |
|----------------|----------------|
| –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ä–æ–∑–ª–æ–≥—ñ–Ω—É—î—Ç—å—Å—è | `[12.06.2024 12:15:21] INFO: Redirecting user (ID=42) to /login` |
| –ù–µ –≤–¥–∞–ª–æ—Å—è —Ä–æ–∑—à–∏—Ñ—Ä—É–≤–∞—Ç–∏ `userDataEtls` | `[12.06.2024 12:15:22] WARN: Failed to decode userDataEtls token.` |
| –í–∏–Ω–∏–∫–ª–∞ –ø–æ–º–∏–ª–∫–∞ | `[12.06.2024 12:15:23] ERROR: Error in redirectToLogin: TypeError: Cannot read properties of undefined (reading 'url')` |

---

## ‚úÖ **üìå –ü—ñ–¥—Å—É–º–æ–∫**
üîπ **–õ–æ–≥—É–≤–∞–Ω–Ω—è, —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ä–æ–∑–ª–æ–≥—ñ–Ω—É—î—Ç—å—Å—è**.  
üîπ **–õ–æ–≥—É–≤–∞–Ω–Ω—è `userId`, —è–∫—â–æ –≤—ñ–Ω —î —É `userDataEtls`.**  
üîπ **–õ–æ–≥—É–≤–∞–Ω–Ω—è `WARN`, —è–∫—â–æ `userDataEtls` –Ω–µ —Ä–æ–∑—à–∏—Ñ—Ä—É–≤–∞–≤—Å—è.**  
üîπ **–õ–æ–≥—É–≤–∞–Ω–Ω—è `ERROR`, —è–∫—â–æ —Ñ—É–Ω–∫—Ü—ñ—è –≤–∏–∫–ª–∏–∫–∞–Ω–∞ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–æ.**  

üöÄ **–¢–µ–ø–µ—Ä `redirectToLogin` –º–∞—î –ø–æ—Ç—É–∂–Ω—É —Å–∏—Å—Ç–µ–º—É –ª–æ–≥—É–≤–∞–Ω–Ω—è, —â–æ –¥–æ–ø–æ–º–∞–≥–∞—î –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, —è–∫–∏—Ö –≤–∏–∫–∏–¥–∞—î –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –ª–æ–≥—ñ–Ω—É! üî•**