-- Таблиця WORK_ORDER
CREATE TABLE WORK_ORDER (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    date_create DATE DEFAULT SYSDATE,
    status NUMBER(1),
    work_order_actions_id NUMBER,
    CONSTRAINT fk_work_order_actions FOREIGN KEY (work_order_actions_id) REFERENCES WORK_ORDER_ACTIONS(id)
);

-- Таблиця WORK_ORDER_ACTIONS
CREATE TABLE WORK_ORDER_ACTIONS (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR2(255),
    description VARCHAR2(1000),
    element_color NUMBER,
    text_element_color NUMBER,
    CONSTRAINT fk_work_order_actions_element_color FOREIGN KEY (element_color) REFERENCES SCHEME_COLORS(id),
    CONSTRAINT fk_work_order_actions_text_color FOREIGN KEY (text_element_color) REFERENCES SCHEME_COLORS(id)
);

-- Таблиця WORK_ORDER_ELEMENT для прив'язки робочих завдань до елементів
CREATE TABLE WORK_ORDER_ELEMENT (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    work_order_id NUMBER REFERENCES WORK_ORDER(id),
    element_id NUMBER REFERENCES ELEMENT(id),
    assigned_by NUMBER, -- Хто призначив завдання
    date_assigned DATE DEFAULT SYSDATE
);

-- Індекси для пришвидшення пошуку
CREATE INDEX idx_work_order_actions_id ON WORK_ORDER(work_order_actions_id);
CREATE INDEX idx_work_order_element_id ON WORK_ORDER_ELEMENT(element_id);
CREATE INDEX idx_work_order_element_order_id ON WORK_ORDER_ELEMENT(work_order_id);
