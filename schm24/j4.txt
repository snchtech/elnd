-- Таблиця ZVT (спеціальний графічний елемент)
CREATE TABLE ZVT (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    param_type_id NUMBER,
    location_id NUMBER,
    indicator_id NUMBER,
    ios_status NUMBER(1),
    x_position NUMBER, -- Координати X на схемі
    y_position NUMBER, -- Координати Y на схемі
    width NUMBER, -- Ширина графічного елемента
    height NUMBER, -- Висота графічного елемента
    color_id NUMBER, -- Колір графічного елемента
    created_at TIMESTAMP DEFAULT SYSTIMESTAMP, -- Час створення
    updated_at TIMESTAMP, -- Час останнього оновлення
    created_by NUMBER, -- Хто створив
    updated_by NUMBER, -- Хто оновив
    CONSTRAINT fk_zvt_param_type FOREIGN KEY (param_type_id) REFERENCES ZVT_PARAMETR(id),
    CONSTRAINT fk_zvt_location FOREIGN KEY (location_id) REFERENCES ZVT_LOCATION(id),
    CONSTRAINT fk_zvt_indicator FOREIGN KEY (indicator_id) REFERENCES ZVT_INDICATOR(id),
    CONSTRAINT fk_zvt_color FOREIGN KEY (color_id) REFERENCES SCHEME_COLORS(id)
);

-- Таблиця зв'язку ZVT з REF_ELEMENT
CREATE TABLE ZVT_REF_ELEMENT (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    zvt_id NUMBER REFERENCES ZVT(id),
    ref_element_id NUMBER REFERENCES REF_ELEMENT(id)
);

-- Таблиця зв'язку ZVT з ELEMENT
CREATE TABLE ZVT_ELEMENT (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    zvt_id NUMBER REFERENCES ZVT(id),
    element_id NUMBER REFERENCES ELEMENT(id)
);

-- Додаткові індекси для покращення швидкодії
CREATE INDEX idx_zvt_location ON ZVT(location_id);
CREATE INDEX idx_zvt_indicator ON ZVT(indicator_id);
CREATE INDEX idx_zvt_color ON ZVT(color_id);
CREATE INDEX idx_zvt_ref_element ON ZVT_REF_ELEMENT(zvt_id);
CREATE INDEX idx_zvt_element ON ZVT_ELEMENT(zvt_id);
