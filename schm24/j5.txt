ALTER TABLE WORK_ORDER ADD (
    is_active NUMBER(1) DEFAULT 0 -- 1 - режим активний, 0 - вимкнений
);

-- Таблиця для зв'язку WORK_ORDER з SCHEME (які схеми у режимі)
CREATE TABLE WORK_ORDER_SCHEME (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    work_order_id NUMBER REFERENCES WORK_ORDER(id),
    scheme_id NUMBER REFERENCES SCHEME(id),
    is_active NUMBER(1) DEFAULT 1, -- Відображає, чи схема зараз у режимі WORK_ORDER
    CONSTRAINT fk_work_order_scheme FOREIGN KEY (work_order_id) REFERENCES WORK_ORDER(id),
    CONSTRAINT fk_work_order_scheme_scheme FOREIGN KEY (scheme_id) REFERENCES SCHEME(id)
);

-- Таблиця для зв'язку WORK_ORDER з вибраними ELEMENT (підсвічені елементи)
CREATE TABLE WORK_ORDER_ELEMENT (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    work_order_id NUMBER REFERENCES WORK_ORDER(id),
    element_id NUMBER REFERENCES ELEMENT(id),
    highlight_color_id NUMBER REFERENCES SCHEME_COLORS(id), -- Колір підсвітки елемента
    assigned_by NUMBER, -- Хто додав елемент у робочий режим
    date_assigned TIMESTAMP DEFAULT SYSTIMESTAMP, -- Час додавання
    CONSTRAINT fk_work_order_element FOREIGN KEY (work_order_id) REFERENCES WORK_ORDER(id),
    CONSTRAINT fk_work_order_element_color FOREIGN KEY (highlight_color_id) REFERENCES SCHEME_COLORS(id)
);