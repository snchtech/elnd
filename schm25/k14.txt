### **–Ø–∫ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ –¥–ª—è —Å—Ö–µ–º–∏ –∑ —Ä—ñ–∑–Ω–∏–º–∏ –≤–µ—Ä—Å—ñ—è–º–∏?**

–Ø–∫—â–æ –º–∏ –∑–∞–º—ñ–Ω–∏–º–æ `scheme_id ‚Üí scheme_version_id`, –∫–æ–∂–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç –±—É–¥–µ –ø—Ä–∏–≤'—è–∑–∞–Ω–∏–π **–¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó —Å—Ö–µ–º–∏**, –∞ –Ω–µ –¥–æ —Å—Ö–µ–º–∏ —è–∫ —Å—É—Ç–Ω–æ—Å—Ç—ñ. –¶–µ –¥–æ–∑–≤–æ–ª–∏—Ç—å:
‚úÖ –í—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏, **—è–∫—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –±—É–ª–∏ –¥–æ–¥–∞–Ω—ñ/–∑–º—ñ–Ω–µ–Ω—ñ –≤ –∫–æ–∂–Ω—ñ–π –≤–µ—Ä—Å—ñ—ó**.  
‚úÖ **–ó–±–µ—Ä—ñ–≥–∞—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é –∑–º—ñ–Ω –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤** ‚Äì –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—ñ —Ñ–∞–π–ª–∏ –±—É–ª–∏ –≤ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –≤–µ—Ä—Å—ñ—è—Ö.  
‚úÖ **–ì–Ω—É—á–∫–æ –∫–µ—Ä—É–≤–∞—Ç–∏ –¥–æ—Å—Ç—É–ø–æ–º**, –ø–æ–∫–∞–∑—É—é—á–∏ –∞–∫—Ç—É–∞–ª—å–Ω—É –∞–±–æ —Å—Ç–∞—Ä—ñ –≤–µ—Ä—Å—ñ—ó –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤.

---

### **–Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é –≤—Å—ñ—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ –¥–ª—è —Å—Ö–µ–º–∏, –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –≤–µ—Ä—Å—ñ—ó?**
–Ø–∫—â–æ –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ **–≤—Å—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏, –ø–æ–≤‚Äô—è–∑–∞–Ω—ñ –∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—é —Å—Ö–µ–º–æ—é (–≤–∫–ª—é—á–∞—é—á–∏ –≤—Å—ñ –≤–µ—Ä—Å—ñ—ó)**, –º–æ–∂–Ω–∞ –≤–∏–∫–æ–Ω–∞—Ç–∏ SQL-–∑–∞–ø–∏—Ç:
```sql
SELECT d.*
FROM SCHEME_DOCUMENTS d
JOIN SCHEME_VERSION sv ON d.scheme_version_id = sv.id
WHERE sv.scheme_id = :scheme_id
ORDER BY sv.version_number DESC, d.date_update DESC;
```
‚úÖ –¶–µ –ø–æ–∫–∞–∂–µ –≤—Å—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –¥–ª—è –ø–µ–≤–Ω–æ—ó —Å—Ö–µ–º–∏ (`scheme_id`), –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –≤–æ–Ω–∏ –ø—Ä–∏–≤'—è–∑–∞–Ω—ñ –¥–æ —Ä—ñ–∑–Ω–∏—Ö –≤–µ—Ä—Å—ñ–π.

---

### **–Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –æ—Å—Ç–∞–Ω–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –¥–ª—è —Å—Ö–µ–º–∏ (–∞–∫—Ç—É–∞–ª—å–Ω—ñ —É —Å—Ç–∞–±—ñ–ª—å–Ω—ñ–π –≤–µ—Ä—Å—ñ—ó)?**
```sql
SELECT d.*
FROM SCHEME_DOCUMENTS d
JOIN SCHEME_VERSION sv ON d.scheme_version_id = sv.id
WHERE sv.scheme_id = :scheme_id AND sv.is_stable = 1
ORDER BY d.date_update DESC;
```
‚úÖ –¢–∞–∫ –º–∏ –æ—Ç—Ä–∏–º–∞—î–º–æ **—Ç—ñ–ª—å–∫–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ñ (—Å—Ç–∞–±—ñ–ª—å–Ω—ñ) –¥–æ–∫—É–º–µ–Ω—Ç–∏**, —è–∫—ñ –±–∞—á–∞—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ.

---

### **–Ø–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤ Next.js**
1. **–ü—Ä–∏ –ø–µ—Ä–µ–≥–ª—è–¥—ñ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ –¥–ª—è —Å—Ö–µ–º–∏**:
   - –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–∞ **—ñ—Å—Ç–æ—Ä—ñ—è** –≤—Å—ñ—Ö –≤–µ—Ä—Å—ñ–π:
     ```javascript
     const fetchAllDocuments = async (schemeId) => {
         const response = await fetch(`/api/schemes/${schemeId}/documents?allVersions=1`);
         return await response.json();
     };
     ```
   - –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω—ñ **–ª–∏—à–µ –∞–∫—Ç—É–∞–ª—å–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏**:
     ```javascript
     const fetchLatestDocuments = async (schemeId) => {
         const response = await fetch(`/api/schemes/${schemeId}/documents?stable=1`);
         return await response.json();
     };
     ```

2. **–ü—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∞**:
   - –î–æ–∫—É–º–µ–Ω—Ç –¥–æ–¥–∞—î—Ç—å—Å—è –¥–æ **–ø–æ—Ç–æ—á–Ω–æ—ó —Ä–µ–¥–∞–≥–æ–≤–∞–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó** (`scheme_version_id`):
     ```javascript
     const addDocument = async (schemeVersionId, documentData) => {
         await fetch(`/api/documents`, {
             method: 'POST',
             body: JSON.stringify({ scheme_version_id: schemeVersionId, ...documentData }),
         });
     };
     ```

3. **–ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ñ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è**:
   - –î–æ–∫—É–º–µ–Ω—Ç–∏ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç—å —É —Å—Ç–∞–±—ñ–ª—å–Ω—É –≤–µ—Ä—Å—ñ—é —Ä–∞–∑–æ–º —ñ–∑ —Å–∞–º–æ—é —Å—Ö–µ–º–æ—é.

---

### **–í–∏—Å–Ω–æ–≤–æ–∫**
üîπ **–Ø–∫—â–æ `scheme_documents` –ø—Ä–∏–≤'—è–∑–∞–Ω–µ –¥–æ `scheme_version_id`**, –º–∏ –æ—Ç—Ä–∏–º—É—î–º–æ –ø–æ–≤–Ω—É —ñ—Å—Ç–æ—Ä—ñ—é –∑–º—ñ–Ω.  
üîπ **–©–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ —Å—Ö–µ–º–∏ (–Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –≤–µ—Ä—Å—ñ—ó), –ø–æ—Ç—Ä—ñ–±–Ω–æ `JOIN` —ñ–∑ `SCHEME_VERSION`.**  
üîπ **Next.js API –¥–æ–∑–≤–æ–ª—è—î –æ—Ç—Ä–∏–º–∞—Ç–∏ –∞–±–æ —Ç—ñ–ª—å–∫–∏ –æ—Å—Ç–∞–Ω–Ω—é —Å—Ç–∞–±—ñ–ª—å–Ω—É –≤–µ—Ä—Å—ñ—é –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤, –∞–±–æ –≤—Å—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –ø–æ —ñ—Å—Ç–æ—Ä—ñ—ó.**

üöÄ –¶–µ –¥–∞—î **–≥–Ω—É—á–∫–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏** —Ç–∞ **–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∞–Ω–∞–ª—ñ–∑—É –∑–º—ñ–Ω**. –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —É—Ç–æ—á–Ω–µ–Ω–Ω—è ‚Äì –ø–∏—Ç–∞–π! üòä