### **–ß–∏ –º–∞—î —Ç–∞–±–ª–∏—Ü—è `SCHEME` —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –¥–ª—è —Å—É—Ç–Ω–æ—Å—Ç—ñ —Å—Ö–µ–º–∏?**
–¢–∞–∫, —Ç–∞–±–ª–∏—Ü—è `SCHEME` –º–∞—î —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π **`id`**, —è–∫–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫—É—î **—Å—Ö–µ–º—É —è–∫ —Å—É—Ç–Ω—ñ—Å—Ç—å** –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —ó—ó –≤–µ—Ä—Å—ñ–π.

–û—Å—å –æ–Ω–æ–≤–ª–µ–Ω–∏–π SQL-–∫–æ–¥ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ñ `SCHEME`, –≤—Ä–∞—Ö–æ–≤—É—é—á–∏ —Ç–µ, —â–æ **–≤–µ—Ä—Å—ñ—ó —Å—Ö–µ–º** –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `SCHEME_VERSION`:

```sql
-- –û—Å–Ω–æ–≤–Ω–∞ —Ç–∞–±–ª–∏—Ü—è SCHEME (—ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫—É—î —Å—Ö–µ–º—É —è–∫ —Å—É—Ç–Ω—ñ—Å—Ç—å, –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –≤–µ—Ä—Å—ñ–π)
CREATE TABLE SCHEME (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, -- –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —Å—É—Ç–Ω–æ—Å—Ç—ñ —Å—Ö–µ–º–∏
    name VARCHAR2(255) NOT NULL,
    album_id NUMBER,
    depart_id NUMBER,
    unit_id NUMBER,
    description CLOB,
    format VARCHAR2(50),
    system VARCHAR2(255),
    shifr VARCHAR2(255),
    CONSTRAINT fk_scheme_album FOREIGN KEY (album_id) REFERENCES ALBUM(id)
);

-- –¢–∞–±–ª–∏—Ü—è SCHEME_VERSION (–∑–±–µ—Ä—ñ–≥–∞—î –≤–µ—Ä—Å—ñ—ó —Å—Ö–µ–º)
CREATE TABLE SCHEME_VERSION (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    scheme_id NUMBER NOT NULL, -- –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ SCHEME (—ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —Å—É—Ç–Ω–æ—Å—Ç—ñ —Å—Ö–µ–º–∏)
    version_number NUMBER NOT NULL, -- –ù–æ–º–µ—Ä –≤–µ—Ä—Å—ñ—ó
    is_stable NUMBER(1) DEFAULT 0, -- 1 - —Å—Ç–∞–±—ñ–ª—å–Ω–∞, 0 - —Ä–µ–¥–∞–≥–æ–≤–∞–Ω–∞
    is_archived NUMBER(1) DEFAULT 0, -- 1 - –∞—Ä—Ö—ñ–≤–Ω–∞ –≤–µ—Ä—Å—ñ—è
    page_number NUMBER,
    created_at DATE DEFAULT SYSDATE,
    updated_at DATE,
    created_by NUMBER,
    updated_by NUMBER,
    CONSTRAINT fk_scheme_version_scheme FOREIGN KEY (scheme_id) REFERENCES SCHEME(id)
);
```

---

### **–Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó —Å—É—Ç–Ω–æ—Å—Ç—ñ —Å—Ö–µ–º–∏?**
–Ø–∫—â–æ –º–∏ —Ö–æ—á–µ–º–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ **–≤—Å—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏, —â–æ –±—É–ª–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ –≤ –±—É–¥—å-—è–∫—É –≤–µ—Ä—Å—ñ—é –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó —Å—Ö–µ–º–∏**, —Ç–æ–¥—ñ —Ä–æ–±–∏–º–æ `JOIN` –∑–∞ `scheme_id`:
```sql
SELECT d.*
FROM SCHEME_DOCUMENTS d
JOIN SCHEME_VERSION sv ON d.scheme_version_id = sv.id
WHERE sv.scheme_id = :scheme_id
ORDER BY sv.version_number DESC, d.date_update DESC;
```
**‚úÖ –©–æ —Ü–µ–π –∑–∞–ø–∏—Ç —Ä–æ–±–∏—Ç—å?**  
- –í—ñ–Ω –±–µ—Ä–µ –≤—Å—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ (`SCHEME_DOCUMENTS`)  
- –ü–æ—î–¥–Ω—É—î —ó—Ö —ñ–∑ –≤–µ—Ä—Å—ñ—è–º–∏ —Å—Ö–µ–º (`SCHEME_VERSION`)  
- –§—ñ–ª—å—Ç—Ä—É—î **–∑–∞ `scheme_id`**, —â–æ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫—É—î —Å—Ö–µ–º—É —è–∫ —Å—É—Ç–Ω—ñ—Å—Ç—å  
- –í–ø–æ—Ä—è–¥–∫–æ–≤—É—î **–∑–∞ –Ω–æ–º–µ—Ä–æ–º –≤–µ—Ä—Å—ñ—ó —Ç–∞ –¥–∞—Ç–æ—é –¥–æ–∫—É–º–µ–Ω—Ç–∞**  

–¢–∞–∫–∏–º —á–∏–Ω–æ–º, –º–∏ –±–∞—á–∏–º–æ **–≤—Å—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏, —è–∫—ñ –∫–æ–ª–∏-–Ω–µ–±—É–¥—å –±—É–ª–∏ –ø—Ä–∏–≤'—è–∑–∞–Ω—ñ –¥–æ —Ü—ñ—î—ó —Å—Ö–µ–º–∏**, –≤–∫–ª—é—á–∞—é—á–∏ —Å—Ç–∞—Ä—ñ –≤–µ—Ä—Å—ñ—ó.

---

### **–Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ñ (—Å—Ç–∞–±—ñ–ª—å–Ω—ñ) –¥–æ–∫—É–º–µ–Ω—Ç–∏?**
```sql
SELECT d.*
FROM SCHEME_DOCUMENTS d
JOIN SCHEME_VERSION sv ON d.scheme_version_id = sv.id
WHERE sv.scheme_id = :scheme_id AND sv.is_stable = 1
ORDER BY d.date_update DESC;
```
**‚úÖ –©–æ —Ü–µ–π –∑–∞–ø–∏—Ç —Ä–æ–±–∏—Ç—å?**  
- –í–∏–±–∏—Ä–∞—î **—Ç—ñ–ª—å–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –¥–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó (`is_stable = 1`)**  
- –í–∏–∫–ª—é—á–∞—î –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ –∞–±–æ —Ä–µ–¥–∞–≥–æ–≤–∞–Ω—ñ –≤–µ—Ä—Å—ñ—ó  

---

### **–í–∏—Å–Ω–æ–≤–æ–∫**
- **`SCHEME.id`** ‚Äì —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —Å—É—Ç–Ω–æ—Å—Ç—ñ —Å—Ö–µ–º–∏ (—î–¥–∏–Ω–∏–π –¥–ª—è –≤—Å—ñ—Ö —ó—ó –≤–µ—Ä—Å—ñ–π).
- **`SCHEME_VERSION.scheme_id`** ‚Äì –≤–∫–∞–∑—É—î, –¥–æ —è–∫–æ—ó —Å—É—Ç–Ω–æ—Å—Ç—ñ –Ω–∞–ª–µ–∂–∏—Ç—å —Ü—è –≤–µ—Ä—Å—ñ—è.
- **`SCHEME_DOCUMENTS.scheme_version_id`** ‚Äì –≤–∫–∞–∑—É—î, –≤ —è–∫—ñ–π –≤–µ—Ä—Å—ñ—ó –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —Ü–µ–π –¥–æ–∫—É–º–µ–Ω—Ç.

üöÄ **–¢–∞–∫–∏–º —á–∏–Ω–æ–º, –º–æ–∂–Ω–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ —è–∫ –≤—Å—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó —Å—Ö–µ–º–∏, —Ç–∞–∫ —ñ —Ç—ñ–ª—å–∫–∏ –¥–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó!** –Ø–∫—â–æ —î –ø–∏—Ç–∞–Ω–Ω—è, —É—Ç–æ—á–Ω—é–π! üòä