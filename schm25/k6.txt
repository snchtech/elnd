-- Таблиця ZVT_KV (прив'язка ZVT до місця)
CREATE TABLE ZVT_KV (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    zvt_id NUMBER NOT NULL,
    place_id NUMBER NOT NULL,
    CONSTRAINT fk_zvt_kv_zvt FOREIGN KEY (zvt_id) REFERENCES ZVT(id),
    CONSTRAINT fk_zvt_kv_place FOREIGN KEY (place_id) REFERENCES PLACE(id)
);

-- Таблиця IOS_SIGNAL (оновлена з додаванням адресата сигналу)
CREATE TABLE IOS_SIGNAL (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR2(255) NOT NULL,
    description VARCHAR2(1000),
    ios_signal_type_id NUMBER NOT NULL,
    signal_recipient VARCHAR2(255), -- Адресат сигналу
    CONSTRAINT fk_ios_signal_type FOREIGN KEY (ios_signal_type_id) REFERENCES IOS_SIGNAL_TYPE(id)
);

-- Таблиця IOS_SIGNAL_TYPE (словник типів сигналів)
CREATE TABLE IOS_SIGNAL_TYPE (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    mark VARCHAR2(100),
    info VARCHAR2(1000)
);

-- Таблиця ZVT_ACTION (позначення дії приладу + або -)
CREATE TABLE ZVT_ACTION (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    zvt_id NUMBER NOT NULL,
    action_mark VARCHAR2(1) CHECK (action_mark IN ('+', '-')), -- Позначення дії
    CONSTRAINT fk_zvt_action_zvt FOREIGN KEY (zvt_id) REFERENCES ZVT(id)
);

-- Додаткові індекси для покращення швидкодії
CREATE INDEX idx_zvt_kv_zvt ON ZVT_KV(zvt_id);
CREATE INDEX idx_zvt_kv_place ON ZVT_KV(place_id);
CREATE INDEX idx_ios_signal_type ON IOS_SIGNAL(ios_signal_type_id);
CREATE INDEX idx_zvt_action_zvt ON ZVT_ACTION(zvt_id);
