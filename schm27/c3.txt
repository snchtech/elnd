–û—Å—å –æ–Ω–æ–≤–ª–µ–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `NewAlbumModal.js`, —è–∫–∏–π **–ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–ª—å–±–æ–º—É** –æ–¥—Ä–∞–∑—É **–ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –Ω–æ–≤–æ–≥–æ –∞–ª—å–±–æ–º—É**.

üîπ **–©–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ?**  
‚úÖ **–ó–∞–ø–∏—Ç –¥–æ —Å—Ç–æ—Ä–æ–Ω–Ω—å–æ–≥–æ API (`createAlbum`)**  
‚úÖ **–û–±—Ä–æ–±–∫–∞ `response`, –æ—Ç—Ä–∏–º–∞–Ω–Ω—è `id ALBUM` —Ç–∞ `id ALBUM_VERSION`**  
‚úÖ **–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –Ω–∞ `/albums/[albumId]?versionId=[albumVersionId]`**  
‚úÖ **–û–Ω–æ–≤–ª–µ–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫**  

---

### üìÅ **–û–Ω–æ–≤–ª–µ–Ω–∏–π `NewAlbumModal.js`**
```javascript
import { useState, useEffect } from "react";
import { useRouter } from "next/router";
import { Dialog, DialogTitle, DialogContent, DialogActions, Button, TextField, MenuItem } from "@mui/material";
import { Formik, Form, Field } from "formik";
import * as Yup from "yup";
import { fetchDepartments, fetchUnits, createAlbum } from "@/utils/api";

export default function NewAlbumModal({ open, onClose, onAlbumCreated }) {
  const [departments, setDepartments] = useState([]);
  const [units, setUnits] = useState([]);
  const router = useRouter();

  useEffect(() => {
    async function loadData() {
      setDepartments(await fetchDepartments());
      setUnits(await fetchUnits());
    }
    loadData();
  }, []);

  const validationSchema = Yup.object().shape({
    name: Yup.string().required("–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É"),
    depart_id: Yup.number().required("–û–±–µ—Ä—ñ—Ç—å –≤—ñ–¥–¥—ñ–ª"),
    unit_id: Yup.number().required("–û–±–µ—Ä—ñ—Ç—å –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª"),
  });

  const handleSubmit = async (values, { setSubmitting, resetForm }) => {
    try {
      const response = await createAlbum({ ...values, creator_id: 1 });

      if (response.success) {
        const { album_id, album_version_id } = response; 

        // –ó–∞–∫—Ä–∏–≤–∞—î–º–æ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ
        onClose();
        onAlbumCreated();

        // –û—á–∏—â—É—î–º–æ —Ñ–æ—Ä–º—É
        resetForm();

        // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –Ω–æ–≤–æ–≥–æ –∞–ª—å–±–æ–º—É
        router.push(`/albums/${album_id}?versionId=${album_version_id}`);
      } else {
        console.error("Error creating album:", response.error);
      }
    } catch (error) {
      console.error("Error creating album:", error);
    } finally {
      setSubmitting(false);
    }
  };

  return (
    <Dialog open={open} onClose={onClose}>
      <DialogTitle>–ù–æ–≤–∏–π –∞–ª—å–±–æ–º</DialogTitle>
      <Formik
        initialValues={{ name: "", depart_id: "", unit_id: "", description: "" }}
        validationSchema={validationSchema}
        onSubmit={handleSubmit}
      >
        {({ isSubmitting, errors, touched }) => (
          <Form>
            <DialogContent>
              <Field as={TextField} select label="–í—ñ–¥–¥—ñ–ª" name="depart_id" fullWidth 
                error={touched.depart_id && !!errors.depart_id} 
                helperText={touched.depart_id && errors.depart_id}
              >
                {departments.map(dep => (
                  <MenuItem key={dep.id} value={dep.id}>{dep.name}</MenuItem>
                ))}
              </Field>

              <Field as={TextField} select label="–ü—ñ–¥—Ä–æ–∑–¥—ñ–ª" name="unit_id" fullWidth 
                error={touched.unit_id && !!errors.unit_id} 
                helperText={touched.unit_id && errors.unit_id}
              >
                {units.map(unit => (
                  <MenuItem key={unit.id} value={unit.id}>{unit.name}</MenuItem>
                ))}
              </Field>

              <Field as={TextField} label="–ù–∞–∑–≤–∞" name="name" fullWidth 
                error={touched.name && !!errors.name} 
                helperText={touched.name && errors.name}
              />

              <Field as={TextField} label="–û–ø–∏—Å" name="description" fullWidth multiline rows={3} />
            </DialogContent>

            <DialogActions>
              <Button onClick={onClose} color="secondary">–°–∫–∞—Å—É–≤–∞—Ç–∏</Button>
              <Button type="submit" color="primary" variant="contained" disabled={isSubmitting}>
                –î–æ–¥–∞—Ç–∏
              </Button>
            </DialogActions>
          </Form>
        )}
      </Formik>
    </Dialog>
  );
}
```

---

## **üìå –©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è?**
‚úÖ **–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è**:  
- –û—Ç—Ä–∏–º—É—î–º–æ **`album_id`** —Ç–∞ **`album_version_id`** —ñ–∑ `response`.  
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `router.push()` –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥—É –Ω–∞ `/albums/[albumId]?versionId=[albumVersionId]`.  

‚úÖ **–û–±—Ä–æ–±–∫–∞ API –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ**:  
- –î–æ–¥–∞—î –ø–µ—Ä–µ–≤—ñ—Ä–∫—É `response.success`, —è–∫—â–æ –Ω–µ–º–∞—î ‚Äì –≤–∏–≤–æ–¥–∏—Ç—å –ø–æ–º–∏–ª–∫—É –≤ `console.error()`.  

‚úÖ **–ö—Ä–∞—â–∞ –æ–±—Ä–æ–±–∫–∞ `setSubmitting(false)`**:  
- –¢–µ–ø–µ—Ä —É `finally`, —â–æ–± `formik` —Ç–æ—á–Ω–æ –∑–Ω—è–≤ —Å—Ç–∞—Ç—É—Å `isSubmitting`.  

üöÄ **–¢–µ–ø–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ: –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–ª—å–±–æ–º—É –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –Ω–æ–≤–æ–≥–æ –∞–ª—å–±–æ–º—É!**