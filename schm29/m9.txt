### **–£—Ç–æ—á–Ω–µ–Ω–Ω—è —â–æ–¥–æ –ø–æ–±—É–¥–æ–≤–∏ URL –¥–ª—è –∫–Ω–æ–ø–æ–∫ "–ü–µ—Ä–µ–≥–ª—è–¥", "–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è" —ñ "–í –∞—Ä—Ö—ñ–≤"**

–ó–∞—Ä–∞–∑ —É –Ω–∞—Å —î **scheme_id**, –∞–ª–µ **–∫–æ–∂–Ω–∞ —Å—Ö–µ–º–∞ –º–æ–∂–µ –º–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –≤–µ—Ä—Å—ñ–π (scheme_version_id)**.  
–û—Å–∫—ñ–ª—å–∫–∏ –º–∏ –ø—Ä–∞—Ü—é—î–º–æ –∑ –≤–µ—Ä—Å—ñ—è–º–∏, –∫–Ω–æ–ø–∫–∏ **"–ü–µ—Ä–µ–≥–ª—è–¥"** —Ç–∞ **"–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è"** –ø–æ–≤–∏–Ω–Ω—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `scheme_version_id`, –∞ **"–í –∞—Ä—Ö—ñ–≤"** –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ —ñ–∑ `scheme_id`.

---

### **1. –õ–æ–≥—ñ–∫–∞ –ø–æ–±—É–¥–æ–≤–∏ URL**
- **–ü–µ—Ä–µ–≥–ª—è–¥ (`viewer`)** ‚Üí –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **–æ—Å—Ç–∞–Ω–Ω—é —Å—Ç–∞–±—ñ–ª—å–Ω—É –≤–µ—Ä—Å—ñ—é** (`scheme_version_id`).
  - **URL:** `/viewer/{scheme_version_id}?mode=viewer`
  - **–û—Ç—Ä–∏–º—É—î–º–æ `scheme_version_id` —á–µ—Ä–µ–∑ API** `/api/rest/getStableSchemeVersion`
- **–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è (`editor`)** ‚Üí –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **–∞–∫—Ç–∏–≤–Ω—É —Ä–µ–¥–∞–≥–æ–≤–∞–Ω—É –≤–µ—Ä—Å—ñ—é** –∞–±–æ **—Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤—É**.
  - **URL:** `/editor/{scheme_version_id}?mode=editor`
  - **–û—Ç—Ä–∏–º—É—î–º–æ `scheme_version_id` —á–µ—Ä–µ–∑ API** `/api/rest/editScheme`
- **–í –∞—Ä—Ö—ñ–≤ (`archive`)** ‚Üí –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **scheme_id** (–∞—Ä—Ö—ñ–≤—É—î –≤—Å—ñ –≤–µ—Ä—Å—ñ—ó —Å—Ö–µ–º–∏).
  - **–ó–∞–ø–∏—Ç –¥–æ API:** `/api/rest/archiveScheme`
  - **–ù–µ–º–∞—î —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –ø–µ—Ä–µ–≥–ª—è–¥—É –∞—Ä—Ö—ñ–≤—É, —Ç–æ–º—É –±–µ–∑ –ø–µ—Ä–µ—Ö–æ–¥—É**

---

### **2. –û–Ω–æ–≤–ª–µ–Ω–∏–π `SchemeReport.js`**
```tsx
import { useState, useEffect } from "react";
import { useRouter } from "next/router";
import {
  Table, TableBody, TableCell, TableContainer, TableHead, TableRow, IconButton,
  Paper, TablePagination, Dialog, DialogTitle, DialogContent, DialogActions, Button
} from "@mui/material";
import { Visibility, Edit, Archive } from "@mui/icons-material";
import { fetchSchemes, getStableSchemeVersion, editScheme, archiveScheme } from "@/utils/api";

const SchemeReport = ({ albumId, userRole, mode }) => {
  const router = useRouter();
  const [schemes, setSchemes] = useState([]);
  const [page, setPage] = useState(0);
  const [rowsPerPage] = useState(15);
  const [archiveDialog, setArchiveDialog] = useState({ open: false, schemeId: null });

  useEffect(() => {
    const loadSchemes = async () => {
      try {
        const data = await fetchSchemes(albumId);
        setSchemes(data);
      } catch (error) {
        console.error("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ö–µ–º:", error);
      }
    };

    loadSchemes();
  }, [albumId]);

  // –ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ö–µ–º–∏ (–≤—ñ–¥–∫—Ä–∏–≤–∞—î —Å—Ç–∞–±—ñ–ª—å–Ω—É –≤–µ—Ä—Å—ñ—é)
  const handleViewScheme = async (schemeId) => {
    try {
      const response = await getStableSchemeVersion(schemeId);
      router.push(`/viewer/${response.scheme_version_id}?mode=viewer`);
    } catch (error) {
      console.error("–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó:", error);
    }
  };

  // –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Å—Ö–µ–º–∏ (–≤—ñ–¥–∫—Ä–∏–≤–∞—î –∞–∫—Ç–∏–≤–Ω—É —Ä–µ–¥–∞–≥–æ–≤–∞–Ω—É –≤–µ—Ä—Å—ñ—é –∞–±–æ —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤—É)
  const handleEditScheme = async (schemeId) => {
    try {
      const response = await editScheme(schemeId);
      router.push(`/editor/${response.scheme_version_id}?mode=editor`);
    } catch (error) {
      console.error("–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —Å—Ö–µ–º–∏:", error);
    }
  };

  // –ê—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è —Å—Ö–µ–º–∏ (–≤—ñ–¥–∫—Ä–∏–≤–∞—î –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è)
  const handleArchiveScheme = async () => {
    try {
      await archiveScheme(archiveDialog.schemeId);
      setSchemes(schemes.filter((s) => s.id !== archiveDialog.schemeId));
      setArchiveDialog({ open: false, schemeId: null });
    } catch (error) {
      console.error("–ü–æ–º–∏–ª–∫–∞ –∞—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è —Å—Ö–µ–º–∏:", error);
    }
  };

  return (
    <>
      <TableContainer component={Paper}>
        <Table>
          <TableHead>
            <TableRow>
              <TableCell>–ü–µ—Ä–µ–≥–ª—è–¥</TableCell>
              <TableCell>ID</TableCell>
              <TableCell>–ù–∞–∑–≤–∞</TableCell>
              {mode === "editor" && userRole === "editor" && <TableCell>–î—ñ—ó</TableCell>}
            </TableRow>
          </TableHead>
          <TableBody>
            {schemes.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((scheme) => (
              <TableRow key={scheme.id}>
                <TableCell>
                  <IconButton onClick={() => handleViewScheme(scheme.id)}>
                    <Visibility />
                  </IconButton>
                </TableCell>
                <TableCell>{scheme.id}</TableCell>
                <TableCell>{scheme.name}</TableCell>
                {mode === "editor" && userRole === "editor" && (
                  <TableCell>
                    <IconButton onClick={() => handleEditScheme(scheme.id)}>
                      <Edit />
                    </IconButton>
                    <IconButton onClick={() => setArchiveDialog({ open: true, schemeId: scheme.id })}>
                      <Archive />
                    </IconButton>
                  </TableCell>
                )}
              </TableRow>
            ))}
          </TableBody>
        </Table>
      </TableContainer>

      {/* –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∞—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è */}
      <Dialog open={archiveDialog.open} onClose={() => setArchiveDialog({ open: false, schemeId: null })}>
        <DialogTitle>–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∞—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è</DialogTitle>
        <DialogContent>
          –í–∏ —Ç–æ—á–Ω–æ —Ö–æ—á–µ—Ç–µ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ü—é —Å—Ö–µ–º—É –≤ –∞—Ä—Ö—ñ–≤?
        </DialogContent>
        <DialogActions>
          <Button onClick={() => setArchiveDialog({ open: false, schemeId: null })} color="secondary">
            –í—ñ–¥–º—ñ–Ω–∏—Ç–∏
          </Button>
          <Button onClick={handleArchiveScheme} color="primary">
            –¢–∞–∫
          </Button>
        </DialogActions>
      </Dialog>
    </>
  );
};

export default SchemeReport;
```

---

## **4. –§—ñ–Ω–∞–ª—å–Ω–∏–π –≤–∏–≥–ª—è–¥ URL**
| –î—ñ—è | –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î | URL |
|------|-------------|--------------------------------------|
| **–ü–µ—Ä–µ–≥–ª—è–¥** | `scheme_version_id` (—Å—Ç–∞–±—ñ–ª—å–Ω–∞ –≤–µ—Ä—Å—ñ—è) | `/viewer/{scheme_version_id}?mode=viewer` |
| **–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è** | `scheme_version_id` (—Ä–µ–¥–∞–≥–æ–≤–∞–Ω–∞ –≤–µ—Ä—Å—ñ—è –∞–±–æ —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤—É) | `/editor/{scheme_version_id}?mode=editor` |
| **–í –∞—Ä—Ö—ñ–≤** | `scheme_id` | API `/api/rest/archiveScheme` |

---

## **5. –©–æ –ø–æ–∫—Ä–∞—â–µ–Ω–æ —É –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—ñ –∑ –ø–æ—á–∞—Ç–∫–æ–≤–∏–º –∫–æ–¥–æ–º?**
‚úÖ **–¢–µ–ø–µ—Ä —É –ø–µ—Ä–µ–≥–ª—è–¥—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `scheme_version_id` —Å—Ç–∞–±—ñ–ª—å–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó**  
‚úÖ **–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–∞—Ü—é—î —á–µ—Ä–µ–∑ `scheme_version_id` (–∞–∫—Ç–∏–≤–Ω–∞ –∞–±–æ –Ω–æ–≤–∞ —Ä–µ–¥–∞–≥–æ–≤–∞–Ω–∞ –≤–µ—Ä—Å—ñ—è)**  
‚úÖ **–ê—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è –ø—Ä–∞—Ü—é—î —ñ–∑ `scheme_id` (–±–µ–∑ –≤–µ—Ä—Å—ñ–π)**  
‚úÖ **–î–æ–¥–∞–Ω–æ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∞—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è**  

---

## **–©–æ —â–µ –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏?**
‚úÖ **–î–æ–¥–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, —è–∫—â–æ —Å—Ç–∞–±—ñ–ª—å–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó –Ω–µ–º–∞—î** ‚Üí `alert("–°—Ç–∞–±—ñ–ª—å–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ")`.  
‚úÖ **–ü–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏, —á–∏ —î –≤–∂–µ —Ä–µ–¥–∞–≥–æ–≤–∞–Ω–∞ –≤–µ—Ä—Å—ñ—è –ø–µ—Ä–µ–¥ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è–º –Ω–æ–≤–æ—ó** (–≤ API `/api/rest/editScheme`).  
‚úÖ **–î–æ–¥–∞—Ç–∏ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫ —É `getStableSchemeVersion` —Ç–∞ `editScheme`**.  

–ì–æ—Ç–æ–≤–æ! üéØ **–¢–µ–ø–µ—Ä –≤—Å—ñ –∫–Ω–æ–ø–∫–∏ –ø—Ä–∞—Ü—é—é—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ `scheme_version_id` –∞–±–æ `scheme_id`!** üöÄ  
–Ø–∫—â–æ —î —â–µ –ø–∏—Ç–∞–Ω–Ω—è —á–∏ –Ω—é–∞–Ω—Å–∏ ‚Äî –ø–∏—Ç–∞–π! üòä