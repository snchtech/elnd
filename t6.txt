// Assuming you have the following HTML structure:
// <ul id="menu">
//   <li>item1
//     <ul>
//       <li>subitem1
//         <ul>
//           <li>subsubitem1</li>
//         </ul>
//       </li>
//     </ul>
//   </li>
// </ul>

const menuItems = document.querySelectorAll('#menu li');

// Function to save the state of the menu in local storage
function saveMenuState() {
  const menuState = {};

  menuItems.forEach(function(item) {
    const itemId = item.getAttribute('id');
    const isExpanded = item.classList.contains('expanded');

    menuState[itemId] = isExpanded;
  });

  localStorage.setItem('menuState', JSON.stringify(menuState));
}

// Function to restore the state of the menu from local storage
function restoreMenuState() {
  const menuState = JSON.parse(localStorage.getItem('menuState'));

  if (menuState) {
    menuItems.forEach(function(item) {
      const itemId = item.getAttribute('id');
      const isExpanded = menuState[itemId];

      if (isExpanded) {
        item.classList.add('expanded');
      }
    });
  }
}

// Add event listeners to toggle the expanded class and save the menu state
menuItems.forEach(function(item) {
  item.addEventListener('click', function() {
    this.classList.toggle('expanded');
    saveMenuState();
  });
});

// Restore the menu state on page load
document.addEventListener('DOMContentLoaded', function() {
  restoreMenuState();
});