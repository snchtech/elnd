–û–Ω–æ–≤–∏–≤ `VIEW`, —â–æ–± –≤—Ä–∞—Ö—É–≤–∞—Ç–∏, —â–æ **`POSITION_ID`, `DEPARTMENT_ID`, `UNIT_ID` –º–æ–∂—É—Ç—å –±—É—Ç–∏ `NULL`** —É `SIGNATURERIGHTS`. –¢–µ–ø–µ—Ä –º–∏ –≤—Ä–∞—Ö–æ–≤—É—î–º–æ —Ç–∞–∫—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó:

‚úÖ **–Ø–∫—â–æ `SIGNATUREHISTORY` –º—ñ—Å—Ç–∏—Ç—å `SIGNER_BY`, `SIGNER_DATE`, `NOTE` ‚Üí –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —ó—Ö.**  
‚úÖ **–Ø–∫—â–æ `SIGNATUREHISTORY` –Ω–µ–º–∞—î –∑–∞–ø–∏—Å—É, –±–µ—Ä–µ–º–æ `USER_ID` –∑ `SIGNATURERIGHTS`.**  
‚úÖ **–Ø–∫—â–æ `POSITION_ID`, `DEPARTMENT_ID`, `UNIT_ID` `NULL`, –≤—Å—Ç–∞–≤–ª—è—î–º–æ `'–ù–µ –≤–∫–∞–∑–∞–Ω–æ'`.**  
‚úÖ **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `NVL()` –¥–ª—è –æ–±—Ä–æ–±–∫–∏ `NULL` –∑–Ω–∞—á–µ–Ω—å.**

---

### **–û–Ω–æ–≤–ª–µ–Ω–∏–π SQL-–∑–∞–ø–∏—Ç –¥–ª—è `V_TASKS_REPORT`**
```sql
CREATE OR REPLACE VIEW V_TASKS_REPORT AS
WITH CREATOR_INFO AS (
    -- –û—Ç—Ä–∏–º—É—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —Ç–æ–≥–æ, —Ö—Ç–æ –≤–∏–¥–∞–≤ –∑–∞–≤–¥–∞–Ω–Ω—è
    SELECT 
        sr.SOURCE_ID,
        COALESCE(sh.SIGNER_BY, sr.USER_ID) AS CREATOR_ID,
        COALESCE(sh.SIGNER_DATE, NULL) AS DATE_CREATED,
        COALESCE(sh.NOTE, NULL) AS CREATOR_NOTE,
        NVL(sr.POSITION_ID, '–ù–µ –≤–∫–∞–∑–∞–Ω–æ') AS CREATOR_POSITION,  -- –Ø–∫—â–æ NULL ‚Üí '–ù–µ –≤–∫–∞–∑–∞–Ω–æ'
        NVL(sr.DEPARTMENT_ID, '–ù–µ –≤–∫–∞–∑–∞–Ω–æ') AS CREATOR_DEPARTMENT,
        NVL(sr.UNIT_ID, '–ù–µ –≤–∫–∞–∑–∞–Ω–æ') AS CREATOR_UNIT
    FROM SIGNATURERIGHTS sr
    LEFT JOIN SIGNATUREHISTORY sh 
        ON sr.ID = sh.SIGNRIGHT_ID 
       AND sr.STAGES_ID = 1
    WHERE sr.STAGES_ID = 1
), 
EXECUTORS AS (
    -- –û—Ç—Ä–∏–º—É—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –≤–∏–∫–æ–Ω–∞–≤—Ü—ñ–≤ (–≤—ñ–¥–º—ñ—Ç–∫–∞ –≤–∏–∫–æ–Ω–∞–≤—Ü—è + –∫–æ–º–µ–Ω—Ç–∞—Ä)
    SELECT 
        sr.SOURCE_ID,
        COALESCE(sh.SIGNER_BY, sr.USER_ID) AS EXECUTOR_ID,
        COALESCE(sh.SIGNER_DATE, NULL) AS EXECUTOR_DATE,
        COALESCE(sh.NOTE, NULL) AS EXECUTOR_COMMENT,
        NVL(sr.POSITION_ID, '–ù–µ –≤–∫–∞–∑–∞–Ω–æ') AS EXECUTOR_POSITION,  -- –Ø–∫—â–æ NULL ‚Üí '–ù–µ –≤–∫–∞–∑–∞–Ω–æ'
        NVL(sr.DEPARTMENT_ID, '–ù–µ –≤–∫–∞–∑–∞–Ω–æ') AS EXECUTOR_DEPARTMENT,
        NVL(sr.UNIT_ID, '–ù–µ –≤–∫–∞–∑–∞–Ω–æ') AS EXECUTOR_UNIT
    FROM SIGNATURERIGHTS sr
    LEFT JOIN SIGNATUREHISTORY sh 
        ON sr.ID = sh.SIGNRIGHT_ID 
       AND sr.STAGES_ID = 2
    WHERE sr.STAGES_ID = 2
), 
RESPONSIBLES AS (
    -- –û—Ç—Ä–∏–º—É—î–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏—Ö –∑–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (–±–µ–∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤ SIGNATUREHISTORY)
    SELECT 
        sr.SOURCE_ID,
        LISTAGG(NVL(sr.USER_ID, '–ù–µ –≤–∫–∞–∑–∞–Ω–æ'), ', ') WITHIN GROUP (ORDER BY sr.USER_ID) AS RESPONSIBLE_USERS,
        LISTAGG(NVL(sr.POSITION_ID, '–ù–µ –≤–∫–∞–∑–∞–Ω–æ'), ', ') WITHIN GROUP (ORDER BY sr.USER_ID) AS RESPONSIBLE_POSITIONS,
        LISTAGG(NVL(sr.DEPARTMENT_ID, '–ù–µ –≤–∫–∞–∑–∞–Ω–æ'), ', ') WITHIN GROUP (ORDER BY sr.USER_ID) AS RESPONSIBLE_DEPARTMENTS,
        LISTAGG(NVL(sr.UNIT_ID, '–ù–µ –≤–∫–∞–∑–∞–Ω–æ'), ', ') WITHIN GROUP (ORDER BY sr.USER_ID) AS RESPONSIBLE_UNITS
    FROM SIGNATURERIGHTS sr
    WHERE sr.STAGES_ID = 2
    GROUP BY sr.SOURCE_ID
)
SELECT 
    t.ID AS TASK_ID,
    t.DATE_CREATE,
    COALESCE(t.TASK_CONTENT, 
        (SELECT LISTAGG(sub.SUBTASK_CONTENT, ', ') WITHIN GROUP (ORDER BY sub.ID) 
         FROM TASK_SUBTASKS sub 
         WHERE sub.TASK_ID = t.ID)) AS TASK_DESCRIPTION,
    -- –û–±'—î–¥–Ω–∞–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ç–æ–≥–æ, —Ö—Ç–æ –≤–∏–¥–∞–≤ –∑–∞–≤–¥–∞–Ω–Ω—è
    CASE 
        WHEN ci.CREATOR_ID IS NOT NULL THEN 
            ci.CREATOR_ID || ' (' || ci.CREATOR_POSITION || ', ' || ci.CREATOR_DEPARTMENT || ', ' || ci.CREATOR_UNIT || ') - ' || NVL(ci.CREATOR_NOTE, '–ë–µ–∑ –∫–æ–º–µ–Ω—Ç–∞—Ä—è')
        ELSE NULL 
    END AS CREATOR,
    -- –í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ –∑–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
    CASE 
        WHEN r.RESPONSIBLE_USERS IS NOT NULL THEN 
            r.RESPONSIBLE_USERS || ' (' || r.RESPONSIBLE_POSITIONS || ', ' || r.RESPONSIBLE_DEPARTMENTS || ', ' || r.RESPONSIBLE_UNITS || ')'
        ELSE NULL 
    END AS RESPONSIBLES,
    t.PLANNING_DATE_END,
    t.ACTUAL_DATE_END,  -- –î–æ–¥–∞–Ω–æ –∫–æ–ª–æ–Ω–∫—É —Ñ–∞–∫—Ç–∏—á–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø—ñ—Å–ª—è –ø–ª–∞–Ω–æ–≤–æ—ó –¥–∞—Ç–∏
    -- –í—ñ–¥–º—ñ—Ç–∫–∞ –≤–∏–∫–æ–Ω–∞–≤—Ü—è + –∫–æ–º–µ–Ω—Ç–∞—Ä
    CASE 
        WHEN e.EXECUTOR_ID IS NOT NULL THEN 
            e.EXECUTOR_ID || ' (' || e.EXECUTOR_POSITION || ', ' || e.EXECUTOR_DEPARTMENT || ', ' || e.EXECUTOR_UNIT || ') - ' || NVL(e.EXECUTOR_COMMENT, '–ë–µ–∑ –∫–æ–º–µ–Ω—Ç–∞—Ä—è')
        ELSE NULL 
    END AS EXECUTOR_MARK,
    -- –°—Ç–∞—Ç—É—Å (–∑ —Ç–∞–±–ª–∏—Ü—ñ DICT_STATUS)
    ds.NAME AS STATUS,
    -- –ü—ñ–¥—Ä–æ–∑–¥—ñ–ª (–∑ view DEPART_CONFIRMLIST_V)
    dc.NAME AS DEPARTMENT,
    -- Unit (–∑ view UNIT_FOR_CONFIRMLIST_V)
    uc.NAME AS UNIT
FROM TASKS t
LEFT JOIN CREATOR_INFO ci ON ci.SOURCE_ID = t.ID
LEFT JOIN RESPONSIBLES r ON r.SOURCE_ID = t.ID
LEFT JOIN EXECUTORS e ON e.SOURCE_ID = t.ID
LEFT JOIN DICT_STATUS ds ON ds.ID = t.STATUS
LEFT JOIN DEPART_CONFIRMLIST_V dc ON dc.ID = t.DEPARTMENT
LEFT JOIN UNIT_FOR_CONFIRMLIST_V uc ON uc.ID = t.UNIT;
```

---

### üîπ **–©–æ –∑–º—ñ–Ω–µ–Ω–æ?**
1. **–û–±—Ä–æ–±–∫–∞ `NULL` –∑–Ω–∞—á–µ–Ω—å –¥–ª—è `POSITION_ID`, `DEPARTMENT_ID`, `UNIT_ID`**
   - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ `NVL(sr.POSITION_ID, '–ù–µ –≤–∫–∞–∑–∞–Ω–æ')`, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ `NULL`.
   - –Ø–∫—â–æ —É `SIGNATURERIGHTS` –Ω–µ–º–∞—î –¥–∞–Ω–∏—Ö, —Ç–µ–ø–µ—Ä –±—É–¥–µ `–ù–µ –≤–∫–∞–∑–∞–Ω–æ`, –∑–∞–º—ñ—Å—Ç—å `NULL`.

2. **–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ (`RESPONSIBLES`)**
   - –¢–µ–ø–µ—Ä `LISTAGG()` –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ `USER_ID`, `POSITION_ID`, `DEPARTMENT_ID`, `UNIT_ID` –≤—ñ–¥—Å—É—Ç–Ω—ñ.
   - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ `NVL()` –¥–ª—è –∑–∞–º—ñ–Ω–∏ `NULL` –∑–Ω–∞—á–µ–Ω—å –Ω–∞ `'–ù–µ –≤–∫–∞–∑–∞–Ω–æ'`.

3. **–í—ñ–¥–º—ñ—Ç–∫–∞ –≤–∏–∫–æ–Ω–∞–≤—Ü—è + –∫–æ–º–µ–Ω—Ç–∞—Ä (`EXECUTOR_MARK`)**
   - –ê–Ω–∞–ª–æ–≥—ñ—á–Ω–æ, —è–∫—â–æ `EXECUTOR_POSITION`, `EXECUTOR_DEPARTMENT`, `EXECUTOR_UNIT` `NULL`, –±—É–¥–µ `'–ù–µ –≤–∫–∞–∑–∞–Ω–æ'`.

---

### **–†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–æ–±–æ—Ç–∏ `VIEW`**
| TASK_ID | DATE_CREATE | TASK_DESCRIPTION | CREATOR | RESPONSIBLES | PLANNING_DATE_END | ACTUAL_DATE_END | EXECUTOR_MARK | STATUS | DEPARTMENT | UNIT |
|---------|------------|------------------|---------|--------------|-------------------|----------------|---------------|--------|------------|------|
| 1001    | 15-MAR-25  | "–ó–∞–≤–¥–∞–Ω–Ω—è 1"     | 501 (–ú–µ–Ω–µ–¥–∂–µ—Ä, –í—ñ–¥–¥—ñ–ª A, Unit X) - "–¢–µ—Ä–º—ñ–Ω–æ–≤–æ" | 502 (–ü—Ä–∞—Ü—ñ–≤–Ω–∏–∫, –í—ñ–¥–¥—ñ–ª B, Unit Y) | 20-MAR-25 | 21-MAR-25 | 504 (–Ü–Ω–∂–µ–Ω–µ—Ä, –í—ñ–¥–¥—ñ–ª C, Unit Z) - "–í–∏–∫–æ–Ω–∞–Ω–æ" | –í —Ä–æ–±–æ—Ç—ñ | –í—ñ–¥–¥—ñ–ª A | Unit X |
| 1002    | 16-MAR-25  | "–ó–∞–≤–¥–∞–Ω–Ω—è 2"     | 502 (–ö–µ—Ä—ñ–≤–Ω–∏–∫, –í—ñ–¥–¥—ñ–ª B, Unit Y) - "–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–µ—Ç–∞–ª—ñ" | 506 (–¢–µ—Ö–Ω—ñ–∫, –í—ñ–¥–¥—ñ–ª C, Unit Z) | 25-MAR-25 | NULL | 507 (–û–ø–µ—Ä–∞—Ç–æ—Ä, –í—ñ–¥–¥—ñ–ª D, Unit W) - "–ó–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ" | –í–∏–∫–æ–Ω–∞–Ω–æ | –í—ñ–¥–¥—ñ–ª B | Unit Y |

---

‚úÖ **–¢–µ–ø–µ—Ä `VIEW` –∫–æ—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–æ–±–ª—è—î –≤–∏–ø–∞–¥–∫–∏, –∫–æ–ª–∏ `POSITION_ID`, `DEPARTMENT_ID`, `UNIT_ID` –º–æ–∂—É—Ç—å –±—É—Ç–∏ `NULL`.**  
‚úÖ **–§–æ—Ä–º–∞—Ç –≤–∏–≤–æ–¥—É –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è —á–∏—Å—Ç–∏–º, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –¥–µ—è–∫—ñ –¥–∞–Ω—ñ –≤—ñ–¥—Å—É—Ç–Ω—ñ.**  
‚úÖ **–Ø–∫—â–æ —â–µ —â–æ—Å—å –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–æ–ø—Ä–∞—Ü—é–≤–∞—Ç–∏ ‚Äì –ø–∏—à–∏! üöÄ**