–¢–∏ –ø—Ä–∞–≤–∏–π! –£ –º–æ—î–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –Ω–µ –±—É–ª–æ –ø–æ–∫–∞–∑–∞–Ω–æ, —â–æ **`EXECUTOR_MARK` —Ç–∞ `RESPONSIBLES` –º–æ–∂—É—Ç—å –º—ñ—Å—Ç–∏—Ç–∏ –¥–µ–∫—ñ–ª—å–∫–∞ –∑–Ω–∞—á–µ–Ω—å –≤ –æ–¥–Ω–æ–º—É `td`**, —Ö–æ—á–∞ `LISTAGG()` —Ü–µ –∑–∞–±–µ–∑–ø–µ—á—É—î.

–û—Å—å –æ–Ω–æ–≤–ª–µ–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É, —è–∫–∏–π **—á—ñ—Ç–∫–æ –ø–æ–∫–∞–∑—É—î, —â–æ `LISTAGG()` –ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ —ñ –≤ –æ–¥–Ω–æ–º—É `td` –º–æ–∂–µ –±—É—Ç–∏ –¥–µ–∫—ñ–ª—å–∫–∞ –∑–Ω–∞—á–µ–Ω—å**.

---

## **‚úÖ –û—á—ñ–∫—É–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥ —É Interactive Report (IR) –≤ APEX**
| TASK_ID | DATE_CREATE | TASK_DESCRIPTION | CREATOR | RESPONSIBLES | PLANNING_DATE_END | ACTUAL_DATE_END | EXECUTOR_MARK | STATUS | DEPARTMENT | UNIT |
|---------|------------|------------------|---------|--------------|-------------------|----------------|---------------|--------|------------|------|
| 1001    | 15-MAR-25  | "–ó–∞–≤–¥–∞–Ω–Ω—è 1"     | 501 (–ú–µ–Ω–µ–¥–∂–µ—Ä, –í—ñ–¥–¥—ñ–ª A, Unit X) - "–¢–µ—Ä–º—ñ–Ω–æ–≤–æ" | 502 (–ü—Ä–∞—Ü—ñ–≤–Ω–∏–∫, –í—ñ–¥–¥—ñ–ª B, Unit Y) <br> 503 (–°—Ç–∞—Ä—à–∏–π —ñ–Ω–∂–µ–Ω–µ—Ä, –í—ñ–¥–¥—ñ–ª C, Unit Z) | 20-MAR-25 | 21-MAR-25 | 504 (–Ü–Ω–∂–µ–Ω–µ—Ä, –í—ñ–¥–¥—ñ–ª C, Unit Z) - "–í–∏–∫–æ–Ω–∞–Ω–æ" <br> 505 (–¢–µ—Ö–Ω—ñ–∫, –í—ñ–¥–¥—ñ–ª D, Unit W) - "–û—á—ñ–∫—É—î –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏" | –í —Ä–æ–±–æ—Ç—ñ | –í—ñ–¥–¥—ñ–ª A | Unit X |
| 1002    | 16-MAR-25  | "–ó–∞–≤–¥–∞–Ω–Ω—è 2"     | 502 (–ö–µ—Ä—ñ–≤–Ω–∏–∫, –í—ñ–¥–¥—ñ–ª B, Unit Y) - "–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–µ—Ç–∞–ª—ñ" | 506 (–¢–µ—Ö–Ω—ñ–∫, –í—ñ–¥–¥—ñ–ª C, Unit Z) | 25-MAR-25 | NULL | 507 (–û–ø–µ—Ä–∞—Ç–æ—Ä, –í—ñ–¥–¥—ñ–ª D, Unit W) - "–ó–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ" <br> 508 (–ú–µ–Ω–µ–¥–∂–µ—Ä, –í—ñ–¥–¥—ñ–ª B, Unit X) - "–¢—Ä–µ–±–∞ —É—Ç–æ—á–Ω–∏—Ç–∏" | –í–∏–∫–æ–Ω–∞–Ω–æ | –í—ñ–¥–¥—ñ–ª B | Unit Y |

---

### üî• **–Ø–∫ –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ –∫–æ—Ä–µ–∫—Ç–Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ APEX Interactive Report (IR)?**
–©–æ–± `LISTAGG()` —É `RESPONSIBLES` —Ç–∞ `EXECUTOR_MARK` –≤—ñ–¥–æ–±—Ä–∞–∂–∞–≤ –∑–Ω–∞—á–µ–Ω–Ω—è **–∫–æ–∂–Ω–æ–≥–æ –≤–∏–∫–æ–Ω–∞–≤—Ü—è –≤ –æ–∫—Ä–µ–º–æ–º—É —Ä—è–¥–∫—É** —É `<td>`, –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **HTML-—Ç–µ–≥ `<br>` —É `LISTAGG()`**.

–û–Ω–æ–≤–∏–º–æ `VIEW`, —â–æ–± —Ñ–æ—Ä–º–∞—Ç—É–≤–∞—Ç–∏ –≤–∏–≤—ñ–¥ —á–µ—Ä–µ–∑ `<br>`:

---

### **–û–Ω–æ–≤–ª–µ–Ω–∞ `VIEW` –∑ `<br>` —É `LISTAGG()`**
```sql
CREATE OR REPLACE VIEW V_TASKS_REPORT AS
WITH CREATOR_INFO AS (
    -- –û—Ç—Ä–∏–º—É—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —Ç–æ–≥–æ, —Ö—Ç–æ –≤–∏–¥–∞–≤ –∑–∞–≤–¥–∞–Ω–Ω—è
    SELECT 
        sr.SOURCE_ID,
        COALESCE(sh.SIGNER_BY, sr.USER_ID) AS CREATOR_ID,
        COALESCE(sh.SIGNER_DATE, NULL) AS DATE_CREATED,
        COALESCE(sh.NOTE, NULL) AS CREATOR_NOTE,
        NVL(sr.POSITION_ID, '–ù–µ –≤–∫–∞–∑–∞–Ω–æ') AS CREATOR_POSITION,
        NVL(sr.DEPARTMENT_ID, '–ù–µ –≤–∫–∞–∑–∞–Ω–æ') AS CREATOR_DEPARTMENT,
        NVL(sr.UNIT_ID, '–ù–µ –≤–∫–∞–∑–∞–Ω–æ') AS CREATOR_UNIT
    FROM SIGNATURERIGHTS sr
    LEFT JOIN SIGNATUREHISTORY sh 
        ON sr.ID = sh.SIGNRIGHT_ID 
       AND sr.STAGES_ID = 1
    WHERE sr.STAGES_ID = 1
), 
EXECUTORS AS (
    -- –û—Ç—Ä–∏–º—É—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –≤–∏–∫–æ–Ω–∞–≤—Ü—ñ–≤ (–≤—ñ–¥–º—ñ—Ç–∫–∞ –≤–∏–∫–æ–Ω–∞–≤—Ü—è + –∫–æ–º–µ–Ω—Ç–∞—Ä) –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –¥–µ–∫—ñ–ª—å–∫–æ—Ö –≤–∏–∫–æ–Ω–∞–≤—Ü—ñ–≤
    SELECT 
        sr.SOURCE_ID,
        LISTAGG(
            COALESCE(sh.SIGNER_BY, sr.USER_ID) || 
            ' (' || NVL(sr.POSITION_ID, '–ù–µ –≤–∫–∞–∑–∞–Ω–æ') || ', ' || 
            NVL(sr.DEPARTMENT_ID, '–ù–µ –≤–∫–∞–∑–∞–Ω–æ') || ', ' || 
            NVL(sr.UNIT_ID, '–ù–µ –≤–∫–∞–∑–∞–Ω–æ') || ') - ' || 
            NVL(sh.NOTE, '–ë–µ–∑ –∫–æ–º–µ–Ω—Ç–∞—Ä—è'), 
            ' <br> ') WITHIN GROUP (ORDER BY COALESCE(sh.SIGNER_DATE, SYSDATE)) AS EXECUTOR_MARK
    FROM SIGNATURERIGHTS sr
    LEFT JOIN SIGNATUREHISTORY sh 
        ON sr.ID = sh.SIGNRIGHT_ID 
       AND sr.STAGES_ID = 2
    WHERE sr.STAGES_ID = 2
    GROUP BY sr.SOURCE_ID
), 
RESPONSIBLES AS (
    -- –û—Ç—Ä–∏–º—É—î–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏—Ö –∑–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (–±–µ–∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤ SIGNATUREHISTORY) –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –¥–µ–∫—ñ–ª—å–∫–æ—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏—Ö
    SELECT 
        sr.SOURCE_ID,
        LISTAGG(
            sr.USER_ID || 
            ' (' || NVL(sr.POSITION_ID, '–ù–µ –≤–∫–∞–∑–∞–Ω–æ') || ', ' || 
            NVL(sr.DEPARTMENT_ID, '–ù–µ –≤–∫–∞–∑–∞–Ω–æ') || ', ' || 
            NVL(sr.UNIT_ID, '–ù–µ –≤–∫–∞–∑–∞–Ω–æ') || ')', 
            ' <br> ') WITHIN GROUP (ORDER BY sr.USER_ID) AS RESPONSIBLES
    FROM SIGNATURERIGHTS sr
    WHERE sr.STAGES_ID = 2
    GROUP BY sr.SOURCE_ID
)
SELECT 
    t.ID AS TASK_ID,
    t.DATE_CREATE,
    COALESCE(t.TASK_CONTENT, 
        (SELECT LISTAGG(sub.SUBTASK_CONTENT, ', ') WITHIN GROUP (ORDER BY sub.ID) 
         FROM TASK_SUBTASKS sub 
         WHERE sub.TASK_ID = t.ID)) AS TASK_DESCRIPTION,
    -- –û–±'—î–¥–Ω–∞–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ç–æ–≥–æ, —Ö—Ç–æ –≤–∏–¥–∞–≤ –∑–∞–≤–¥–∞–Ω–Ω—è
    CASE 
        WHEN ci.CREATOR_ID IS NOT NULL THEN 
            ci.CREATOR_ID || ' (' || ci.CREATOR_POSITION || ', ' || ci.CREATOR_DEPARTMENT || ', ' || ci.CREATOR_UNIT || ') - ' || NVL(ci.CREATOR_NOTE, '–ë–µ–∑ –∫–æ–º–µ–Ω—Ç–∞—Ä—è')
        ELSE NULL 
    END AS CREATOR,
    -- –í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ –∑–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (–∞–≥—Ä–µ–≥—É—î–º–æ —Å–ø–∏—Å–æ–∫ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏—Ö)
    RESPONSIBLES,
    t.PLANNING_DATE_END,
    t.ACTUAL_DATE_END,  -- –î–æ–¥–∞–Ω–æ –∫–æ–ª–æ–Ω–∫—É —Ñ–∞–∫—Ç–∏—á–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø—ñ—Å–ª—è –ø–ª–∞–Ω–æ–≤–æ—ó –¥–∞—Ç–∏
    -- –í—ñ–¥–º—ñ—Ç–∫–∞ –≤–∏–∫–æ–Ω–∞–≤—Ü—è + –∫–æ–º–µ–Ω—Ç–∞—Ä (–∞–≥—Ä–µ–≥—É—î–º–æ —Å–ø–∏—Å–æ–∫ –≤–∏–∫–æ–Ω–∞–≤—Ü—ñ–≤)
    EXECUTOR_MARK,
    -- –°—Ç–∞—Ç—É—Å (–∑ —Ç–∞–±–ª–∏—Ü—ñ DICT_STATUS)
    ds.NAME AS STATUS,
    -- –ü—ñ–¥—Ä–æ–∑–¥—ñ–ª (–∑ view DEPART_CONFIRMLIST_V)
    dc.NAME AS DEPARTMENT,
    -- Unit (–∑ view UNIT_FOR_CONFIRMLIST_V)
    uc.NAME AS UNIT
FROM TASKS t
LEFT JOIN CREATOR_INFO ci ON ci.SOURCE_ID = t.ID
LEFT JOIN RESPONSIBLES r ON r.SOURCE_ID = t.ID
LEFT JOIN EXECUTORS e ON e.SOURCE_ID = t.ID
LEFT JOIN DICT_STATUS ds ON ds.ID = t.STATUS
LEFT JOIN DEPART_CONFIRMLIST_V dc ON dc.ID = t.DEPARTMENT
LEFT JOIN UNIT_FOR_CONFIRMLIST_V uc ON uc.ID = t.UNIT;
```

---

## **üîπ –©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è?**
1. **`LISTAGG()` —Ç–µ–ø–µ—Ä –¥–æ–¥–∞—î HTML-—Ç–µ–≥ `<br>` –∑–∞–º—ñ—Å—Ç—å `|`**  
   - –†–∞–Ω—ñ—à–µ:
     ```
     504 (–Ü–Ω–∂–µ–Ω–µ—Ä, –í—ñ–¥–¥—ñ–ª C, Unit Z) - "–í–∏–∫–æ–Ω–∞–Ω–æ" | 505 (–¢–µ—Ö–Ω—ñ–∫, –í—ñ–¥–¥—ñ–ª D, Unit W) - "–û—á—ñ–∫—É—î –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏"
     ```
   - –¢–µ–ø–µ—Ä:
     ```
     504 (–Ü–Ω–∂–µ–Ω–µ—Ä, –í—ñ–¥–¥—ñ–ª C, Unit Z) - "–í–∏–∫–æ–Ω–∞–Ω–æ"  
     505 (–¢–µ—Ö–Ω—ñ–∫, –í—ñ–¥–¥—ñ–ª D, Unit W) - "–û—á—ñ–∫—É—î –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏"
     ```
   - –¶–µ –∑–∞–±–µ–∑–ø–µ—á—É—î –∫–æ—Ä–µ–∫—Ç–Ω–µ **–≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ Oracle APEX Interactive Report (IR)**.

2. **–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ (`RESPONSIBLES`) —Ç–µ–ø–µ—Ä —Ç–∞–∫–æ–∂ –º—ñ—Å—Ç—è—Ç—å `<br>` –º—ñ–∂ –∑–∞–ø–∏—Å–∞–º–∏**  
   - –†–∞–Ω—ñ—à–µ:
     ```
     502 (–ü—Ä–∞—Ü—ñ–≤–Ω–∏–∫, –í—ñ–¥–¥—ñ–ª B, Unit Y) | 503 (–°—Ç–∞—Ä—à–∏–π —ñ–Ω–∂–µ–Ω–µ—Ä, –í—ñ–¥–¥—ñ–ª A, Unit X)
     ```
   - –¢–µ–ø–µ—Ä:
     ```
     502 (–ü—Ä–∞—Ü—ñ–≤–Ω–∏–∫, –í—ñ–¥–¥—ñ–ª B, Unit Y)  
     503 (–°—Ç–∞—Ä—à–∏–π —ñ–Ω–∂–µ–Ω–µ—Ä, –í—ñ–¥–¥—ñ–ª A, Unit X)
     ```

---

## üî• **–¢–µ–ø–µ—Ä –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –≤ APEX!**  
‚úÖ **–í—Å—ñ –≤–∏–∫–æ–Ω–∞–≤—Ü—ñ —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è —É —Å—Ç–æ–≤–ø—Ü—ñ –∑ `<br>`**  
‚úÖ **–î–∞–Ω—ñ —á–∏—Ç–∞—é—Ç—å—Å—è –∑—Ä—É—á–Ω–æ —Ç–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è —É –∫—ñ–ª—å–∫–∞ —Ä—è–¥–∫—ñ–≤**  
‚úÖ **–¶–µ–π –≤–∞—Ä—ñ–∞–Ω—Ç —Ç–æ—á–Ω–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ –≤ —Ç–≤–æ—î–º—É APEX Interactive Report!**  

‚ùì –ß–∏ —î —â–µ —â–æ—Å—å, —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–æ–ø—Ä–∞—Ü—é–≤–∞—Ç–∏? üöÄ