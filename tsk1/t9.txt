–û—Å—å –æ–Ω–æ–≤–ª–µ–Ω–∏–π SQL-–∑–∞–ø–∏—Ç –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó —É —Ñ–æ—Ä–º–∞—Ç—ñ, —è–∫–∏–π —Ç–∏ –æ—á—ñ–∫—É—î—à. –¢–µ–ø–µ—Ä –≤—ñ–Ω –≤–∫–ª—é—á–∞—î:

- **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è** —É —Ñ–æ—Ä–º–∞—Ç—ñ:  
  ```
  –°—Ç–≤–æ—Ä–µ–Ω–æ: dd.mm.yyyy hh24:mm –ü–Ü–ë (–ü–æ—Å–∞–¥–∞, –í—ñ–¥–¥—ñ–ª)
  ```
- **–ó–º—ñ—Å—Ç –∑–∞–≤–¥–∞–Ω–Ω—è**:
  - –Ø–∫—â–æ —Ü–µ –æ–¥–∏–Ω–∏—á–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è, –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è **–ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç**.
  - –Ø–∫—â–æ —î –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è, –≤–æ–Ω–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è **–Ω—É–º–µ—Ä–æ–≤–∞–Ω–∏–º —Å–ø–∏—Å–∫–æ–º** —ñ–∑ –∞—Ç—Ä–∏–±—É—Ç–æ–º `data-subtask`.
- **–ü–ª–∞–Ω–æ–≤–∞ –¥–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è**
- **–§–∞–∫—Ç–∏—á–Ω–∞ –¥–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è** (–∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ `datepicker`).
- **–§—ñ–∫—Å–∞—Ü—ñ—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è** (`checkbox + select` –¥–ª—è –≤–∏–±–æ—Ä—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, —è–∫–∏–π –∑–∞–∫—Ä–∏–≤–∞—î –∑–∞–≤–¥–∞–Ω–Ω—è).

---

### **üìå SQL-–∑–∞–ø–∏—Ç –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–µ—Ç–∞–ª–µ–π –∑–∞–≤–¥–∞–Ω–Ω—è**
```sql
SELECT 
    t.TASK_ID,
    '–°—Ç–≤–æ—Ä–µ–Ω–æ: ' || TO_CHAR(t.DATE_CREATE, 'DD.MM.YYYY HH24:MI') || ' ' || u.USER_NAME || 
    ' (' || p.POSITION_NAME || ', ' || d.DEPARTMENT_NAME || ')' AS CREATED_INFO,

    -- –Ø–∫—â–æ —î –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è, –≤–∏–≤–æ–¥–∏–º–æ —ó—Ö —É –≤–∏–≥–ª—è–¥—ñ –Ω—É–º–µ—Ä–æ–≤–∞–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É
    CASE 
        WHEN (SELECT COUNT(*) FROM TASK_SUBTASKS WHERE TASK_ID = t.TASK_ID) > 0 
        THEN 
            '<ul>' || 
            LISTAGG(
                '<li data-subtask="' || ts.SUBTASK_ORDER || '">' || ts.SUBTASK_TEXT || '</li>', 
                ' '
            ) WITHIN GROUP (ORDER BY ts.SUBTASK_ORDER) 
            || '</ul>'
        ELSE 
            t.TASK_CONTENT
    END AS TASK_DESCRIPTION,

    TO_CHAR(t.PLANNING_DATE_END, 'DD.MM.YYYY HH24:MI') AS PLANNING_DATE_END,
    TO_CHAR(t.ACTUAL_DATE_END, 'DD.MM.YYYY HH24:MI') AS ACTUAL_DATE_END,
    
    -- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ç–æ–≥–æ, —Ö—Ç–æ –∑–∞–≤–µ—Ä—à–∏–≤ –∑–∞–≤–¥–∞–Ω–Ω—è
    CASE 
        WHEN t.ACTUAL_DATE_END IS NOT NULL THEN 
            '–ó–∞–∫—Ä–∏—Ç–æ: ' || TO_CHAR(t.ACTUAL_DATE_END, 'DD.MM.YYYY HH24:MI') || 
            ' ' || fin.USER_NAME || 
            ' (' || fin_p.POSITION_NAME || ', ' || fin_d.DEPARTMENT_NAME || ')'
        ELSE 
            NULL
    END AS FINISHER_INFO

FROM TASKS t
LEFT JOIN USERS u ON t.OWNER_ID = u.USER_ID
LEFT JOIN POSITIONS p ON u.POSITION_ID = p.POSITION_ID
LEFT JOIN DEPARTMENTS d ON u.DEPARTMENT_ID = d.DEPARTMENT_ID

LEFT JOIN TASK_SUBTASKS ts ON t.TASK_ID = ts.TASK_ID

LEFT JOIN USERS fin ON t.FINISHER_ID = fin.USER_ID
LEFT JOIN POSITIONS fin_p ON fin.POSITION_ID = fin_p.POSITION_ID
LEFT JOIN DEPARTMENTS fin_d ON fin.DEPARTMENT_ID = fin_d.DEPARTMENT_ID

WHERE t.TASK_ID = :P_TASK_ID;
```

---

### **üìå –Ø–∫ —Ü–µ –±—É–¥–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏—Å—è —É –º–æ–¥–∞–ª—å–Ω–æ–º—É –≤—ñ–∫–Ω—ñ (HTML)?**
```html
<div>
    <p><strong>&CREATED_INFO.</strong></p>
    
    <h3>–ó–º—ñ—Å—Ç –∑–∞–≤–¥–∞–Ω–Ω—è:</h3>
    <div>&TASK_DESCRIPTION.</div>

    <p><strong>–ü–ª–∞–Ω–æ–≤–∞ –¥–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è:</strong> &PLANNING_DATE_END.</p>

    <h3>–§–∞–∫—Ç–∏—á–Ω–∞ –¥–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è:</h3>
    <input type="text" id="actualDateEnd" class="datepicker" value="&ACTUAL_DATE_END.">
    
    <label>
        <input type="checkbox" id="finishByOther">
        –ó–∞–∫—Ä–∏—Ç–∏ –≤—ñ–¥ —ñ–º–µ–Ω—ñ —ñ–Ω—à–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
    </label>
    
    <select id="finisherSelect" style="display: none;">
        <option value="">–û–±–µ—Ä—ñ—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</option>
        &LOV_FINISHERS.
    </select>

    <p><strong>&FINISHER_INFO.</strong></p>
</div>

<script>
    document.getElementById('finishByOther').addEventListener('change', function() {
        document.getElementById('finisherSelect').style.display = this.checked ? 'block' : 'none';
    });
</script>
```

---

### **üìå –©–æ –∑—Ä–æ–±–ª–µ–Ω–æ:**
‚úÖ **–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è**: –¥–∞—Ç–∞, —á–∞—Å, –∞–≤—Ç–æ—Ä, –ø–æ—Å–∞–¥–∞, –≤—ñ–¥–¥—ñ–ª.  
‚úÖ **–ó–º—ñ—Å—Ç –∑–∞–≤–¥–∞–Ω–Ω—è**: —è–∫—â–æ –æ–¥–∏–Ω–∏—á–Ω–µ, –ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç, —è–∫—â–æ –∑ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è–º–∏, —Ç–æ —Å–ø–∏—Å–æ–∫ `<ul>` + `data-subtask`.  
‚úÖ **–ü–ª–∞–Ω–æ–≤–∞ –¥–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è** –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è.  
‚úÖ **–§–∞–∫—Ç–∏—á–Ω–∞ –¥–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è** —Ä–µ–¥–∞–≥—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `Datepicker`.  
‚úÖ **–§—ñ–∫—Å–∞—Ü—ñ—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è**: checkbox + select –¥–ª—è –≤–∏–±–æ—Ä—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

---

## **üîπ –ü—ñ–¥—Å—É–º–æ–∫**
üî• **–¢–µ–ø–µ—Ä —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∞ –∫–∞—Ä—Ç–∫–∞ –º—ñ—Å—Ç–∏—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω–µ**:  
‚úÖ **–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è + –∞–≤—Ç–æ—Ä** —É –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—ñ.  
‚úÖ **–ó–∞–≤–¥–∞–Ω–Ω—è –∞–±–æ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è** –≤–∏–≤–æ–¥—è—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ.  
‚úÖ **–§–∞–∫—Ç–∏—á–Ω–∞ –¥–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–µ–¥–∞–≥—É—î—Ç—å—Å—è + –º–æ–∂–Ω–∞ –∑–∞–∫—Ä–∏–≤–∞—Ç–∏ –≤—ñ–¥ —ñ–º–µ–Ω—ñ —ñ–Ω—à–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞**.  

üöÄ **–ì–æ—Ç–æ–≤–æ! –ß–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ —â–æ—Å—å —â–µ –ø–æ–∫—Ä–∞—â–∏—Ç–∏?** üòä