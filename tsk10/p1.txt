–î–æ–±—Ä–µ, —è –∑—Ä–æ–∑—É–º—ñ–≤ —Ç–≤–æ—î –∑–∞–≤–¥–∞–Ω–Ω—è:  
—Ç–∏ —Ö–æ—á–µ—à **–ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è `url` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω—É —á–∞—Å—Ç–∏–Ω—É (—á–µ—Ä–µ–∑ Ajax Callback Processing)** ‚Äî —â–æ–± JS —Ç—ñ–ª—å–∫–∏ –æ—Ç—Ä–∏–º—É–≤–∞–≤ –≥–æ—Ç–æ–≤–∏–π URL —ñ –æ–¥—Ä–∞–∑—É –≤–∏–∫–æ–Ω—É–≤–∞–≤ `apex.navigation.redirect(url);`.

–¢–µ–ø–µ—Ä —Ä–æ–∑–ø–∏—à—É –≤—Å–µ –∞–∫—É—Ä–∞—Ç–Ω–æ —ñ –ø–æ–∫–∞–∂—É –≥–æ—Ç–æ–≤–µ —Ä—ñ—à–µ–Ω–Ω—è.

---

# üîπ –ù–æ–≤–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –¥—ñ–π:

### 1. **JavaScript –∫–æ–¥** –±—É–¥–µ –≤–∏–≥–ª—è–¥–∞—Ç–∏ —Ç–∞–∫:

```javascript
apex.server.process("DUPLICATE_TASK_OR_TEMPLATE", {
  pageItems: "#P5_TASK_ID, #P5_SWITCH"
}, {
  dataType: "json",
  success: function(pData) {
    if (pData.status === 'ok') {
      apex.navigation.redirect(pData.redirectUrl);
    } else {
      apex.message.alert("–ü–æ–º–∏–ª–∫–∞ –¥—É–±–ª—é–≤–∞–Ω–Ω—è: " + pData.message);
    }
  },
  error: function() {
    apex.message.alert("–ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –¥—É–±–ª—é–≤–∞–Ω–Ω—ñ.");
  }
});
```

‚úÖ –ë—ñ–ª—å—à–µ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ñ–æ—Ä–º—É–≤–∞—Ç–∏ `apex.util.makeApplicationUrl()` –≤ JavaScript.  
‚úÖ –í—Å–µ —Ñ–æ—Ä–º—É—î —Å–µ—Ä–≤–µ—Ä —ñ –ø–æ–≤–µ—Ä—Ç–∞—î —á–µ—Ä–µ–∑ `pData.redirectUrl`.

---

### 2. **Ajax Callback Processing:** `DUPLICATE_TASK_OR_TEMPLATE`

**–¢–∏–ø:** PL/SQL Code

–û—Å—å –≥–æ—Ç–æ–≤–∏–π –∫–æ–¥ –ø—Ä–æ—Ü–µ—Å—É:

```plsql
DECLARE
  l_new_id NUMBER;
  l_url    VARCHAR2(4000);
BEGIN
  -- –¢—É—Ç —Ç–≤–æ—è –ª–æ–≥—ñ–∫–∞ –¥—É–±–ª—é–≤–∞–Ω–Ω—è:
  l_new_id := your_package.duplicate_task_or_template(
                p_task_id => :P5_TASK_ID,
                p_switch  => :P5_SWITCH
              );

  -- –§–æ—Ä–º—É—î–º–æ URL –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥—É:
  l_url := apex_page.get_url(
    p_page   => 5,
    p_clear_cache => '5',
    p_items  => 'P5_TASK_ID,P5_TASK_ACTION_MODE,P5_SWITCH',
    p_values => l_new_id || ',2,' || :P5_SWITCH
  );

  -- –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ JSON:
  apex_json.open_object;
  apex_json.write('status', 'ok');
  apex_json.write('newId', l_new_id);
  apex_json.write('redirectUrl', l_url);
  apex_json.close_object;

EXCEPTION
  WHEN OTHERS THEN
    apex_json.open_object;
    apex_json.write('status', 'error');
    apex_json.write('message', SQLERRM);
    apex_json.close_object;
END;
```

---

# üî• –Ø–∫ –≤—Å–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ:

| –ï—Ç–∞–ø | –û–ø–∏—Å |
|:----|:-----|
| üîµ JS –≤–∏–∫–ª–∏–∫–∞—î `apex.server.process("DUPLICATE_TASK_OR_TEMPLATE")` |
| üîµ –°–µ—Ä–≤–µ—Ä —Å—Ç–≤–æ—Ä—é—î –∫–æ–ø—ñ—é –∑–∞–≤–¥–∞–Ω–Ω—è –∞–±–æ —à–∞–±–ª–æ–Ω—É, –≥–µ–Ω–µ—Ä—É—î `redirectUrl` |
| üîµ JS –æ—Ç—Ä–∏–º—É—î `pData.redirectUrl` —ñ –≤–∏–∫–æ–Ω—É—î `apex.navigation.redirect(pData.redirectUrl)` |
| üîµ –Ø–∫—â–æ –ø–æ–º–∏–ª–∫–∞, –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è `apex.message.alert` |

---

# ‚ùì –ß–∞—Å—Ç—ñ –ø–∏—Ç–∞–Ω–Ω—è:

- **–ß–æ–º—É –∫—Ä–∞—â–µ —Ñ–æ—Ä–º—É–≤–∞—Ç–∏ URL –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ?**  
  ‚ûî –¶–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—à–µ, –±–æ —Å–µ—Ä–≤–µ—Ä –∫—Ä–∞—â–µ –∑–Ω–∞—î, —è–∫—ñ `itemNames`, `itemValues` –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç–∏ (JS –º–µ–Ω—à–µ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ URL).

- **–ß–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è?**  
  ‚ûî –ù—ñ, –ª–∏—à–µ —Ü–µ–π Ajax Callback —ñ –æ–Ω–æ–≤–ª–µ–Ω–∏–π JS –∫–æ–¥.

- **–ß–∏ –±—É–¥–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –ø—Ä–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ APEX?**  
  ‚ûî –¢–∞–∫, –±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó APEX (`apex_page.get_url` —ñ `apex_json`).

---

# –ü—ñ–¥—Å—É–º–æ–∫:

‚úÖ –°–µ—Ä–≤–µ—Ä —Ñ–æ—Ä–º—É—î –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π URL.  
‚úÖ JS —Ç—ñ–ª—å–∫–∏ —Ä–µ–¥—ñ—Ä–µ–∫—Ç–∏—Ç—å, –±–µ–∑ –ª–æ–≥—ñ–∫–∏ —Å–∫–ª–∞–¥–∞–Ω–Ω—è.  
‚úÖ –ü—ñ–¥—Ö—ñ–¥ —Å—Ç–∞–≤ —á–∏—Å—Ç—ñ—à–∏–º —ñ —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—à–∏–º.

---

–•–æ—á–µ—à, —è —â–µ –¥–æ–¥–∞–º –≤–∞—Ä—ñ–∞–Ω—Ç –æ–±—Ä–æ–±–∫–∏ spinner (—â–æ–± –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –Ω–∞ –∫–Ω–æ–ø–∫—É –ø–æ–∫–∞–∑—É–≤–∞–≤—Å—è —ñ –∑–Ω–∏–∫–∞–≤ —Å–ø—ñ–Ω–Ω–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)? üî•  
–¶–µ –≤–∏–≥–ª—è–¥–∞—î —â–µ –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω—ñ—à–µ. –ü–æ–∫–∞–∑–∞—Ç–∏? üöÄ
