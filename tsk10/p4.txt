–ß—É–¥–æ–≤–æ, –¥–∞–≤–∞–π –∑–±–µ—Ä–µ–º–æ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π `VIEW`, —è–∫–∏–π –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –≤—Å—ñ–º —Ç–≤–æ—ó–º –≤–∏–º–æ–≥–∞–º.

---

# ‚úÖ –û—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞:

- **–¢–∏–ø —à–∞–±–ª–æ–Ω—É** (`TYPE_ID`) = 0 ‚Üí –±–µ—Ä–µ–º–æ `TASK_CONTENT`
- **–¢–∏–ø —à–∞–±–ª–æ–Ω—É** = 1 ‚Üí –±—É–¥—É—î–º–æ `LISTAGG` –≤—Å—ñ—Ö `SUBTASK_CONTENT`
- **PERIOD_EXECUTE**:
  - –Ø–∫—â–æ `PERIOD_MODE = 1` ‚Üí `PERIOD_INTERVAL || ' ' || PERIOD_TIME`
  - –Ü–Ω–∞–∫—à–µ —è–∫—â–æ `HOURLY_TIMES IS NOT NULL` ‚Üí `HOURLY_TIMES`
  - –Ü–Ω–∞–∫—à–µ ‚Üí `NULL`

---

# üìã –ü—Ä–∏–∫–ª–∞–¥ VIEW

```sql
CREATE OR REPLACE VIEW V_TASK_TEMPLATE_REPORT AS
SELECT
  t.ID,
  
  -- –ü—ñ–∫—Ç–æ–≥—Ä–∞–º–∞ –∑ –ª—ñ–Ω–∫–æ–º
  '<a href="f?p=APP_ID:PAGE_ID:&SESSION.::NO::P5_TASK_ID:' || t.ID || 
  '" title="–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏" class="fa fa-eye" aria-hidden="true"></a>' AS ICON_LINK,

  -- –ë–ª–æ–∫
  t.PAGE_LIST_ID AS BLOCK,

  -- –ó–∞–≤–¥–∞–Ω–Ω—è –∞–±–æ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü—ñ—è –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å
  CASE 
    WHEN t.TYPE_ID = 0 THEN t.TASK_CONTENT
    ELSE (
      SELECT LISTAGG(s.SUBTASK_CONTENT, CHR(10)) WITHIN GROUP (ORDER BY s.SUBTASK_ORDER)
      FROM TASK_TEMPLATE_SUBTASKS s
      WHERE s.TEMPLATE_ID = t.ID
    )
  END AS TASK_CONTENT_EXPANDED,

  -- –•—Ç–æ —Å—Ç–≤–æ—Ä–∏–≤
  t.CREATOR_ID,

  -- –°—Ç–∞—Ç—É—Å
  t.STATUS_ID,

  -- –ü—ñ–¥—Ä–æ–∑–¥—ñ–ª
  t.UNIT_ID,

  -- Period_mode
  t.PERIOD_MODE,

  -- –õ–æ–≥—ñ–∫–∞ —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è —á–∞—Å—É –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
  CASE 
    WHEN t.PERIOD_MODE = 1 AND t.PERIOD_INTERVAL IS NOT NULL THEN 
      t.PERIOD_INTERVAL || ' ' || t.PERIOD_TIME
    WHEN t.HOURLY_TIMES IS NOT NULL THEN 
      t.HOURLY_TIMES
    ELSE NULL
  END AS PERIOD_EXECUTE,

  -- –î–∞—Ç–∞ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É
  t.NEXT_RUN_DATE,

  -- –î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
  t.DATE_END

FROM TASK_TEMPLATES t;
```

---

# üîç –ü–æ—è—Å–Ω–µ–Ω–Ω—è –∫–ª—é—á–æ–≤–∏—Ö –º–æ–º–µ–Ω—Ç—ñ–≤:

| –ö–æ–ª–æ–Ω–∫–∞ | –©–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î |
|---------|---------------|
| `ICON_LINK` | HTML-–ª—ñ–Ω–∫ –∑ —ñ–∫–æ–Ω–∫–æ—é (eye) –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –ø–µ—Ä–µ–≥–ª—è–¥—É |
| `TASK_CONTENT_EXPANDED` | –∞–±–æ `TASK_CONTENT`, –∞–±–æ –≤—Å—ñ `SUBTASK_CONTENT` |
| `PERIOD_EXECUTE` | –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ä–µ–∂–∏–º—É ‚Äî –∞–±–æ —ñ–Ω—Ç–µ—Ä–≤–∞–ª + —á–∞—Å, –∞–±–æ HOURLY_TIMES |
| `LISTAGG(..., CHR(10))` | —Ñ–æ—Ä–º—É—î —Ç–µ–∫—Å—Ç –∑ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å –∑ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ —Ä—è–¥–∫—ñ–≤ |

---

# üõ† –¢–≤–æ—ó –¥—ñ—ó:

1. –ü—ñ–¥—Å—Ç–∞–≤ `APP_ID` —ñ `PAGE_ID` –≤ `ICON_LINK`, –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π `:APP_ID` —Ç–∞ `:APP_PAGE_ID` —É SQL region.
2. –Ø–∫—â–æ —Ç–∏ —Ö–æ—á–µ—à –≤–∏—Ç—è–≥–Ω—É—Ç–∏ **—ñ–º–µ–Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤**, —Å—Ç–∞—Ç—É—Å—ñ–≤ –∞–±–æ –Ω–∞–∑–≤ –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—ñ–≤ ‚Äî –¥–æ–¥–∞–π `JOIN` –¥–æ –¥–æ–≤—ñ–¥–Ω–∏–∫—ñ–≤.

---

# üöÄ –•–æ—á–µ—à —â–µ:

- –ü–æ–∫–∞–∑–∞—Ç–∏, —è–∫ –æ–±–º–µ–∂–∏—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è –ø–æ —Å—Ç–∞—Ç—É—Å—É –∞–±–æ –¥–∞—Ç—ñ?
- –î–æ–¥–∞—Ç–∏ –∫–æ–ª–æ–Ω–∫—É –∑ –∫—ñ–ª—å–∫—ñ—Å—Ç—é –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å?
- –ü–µ—Ä–µ–∫–ª–∞—Å—Ç–∏ —Ü–µ–π `VIEW` —É –≤–∏–≥–ª—è–¥ SQL Region –∑ —ñ–∫–æ–Ω–∫–∞–º–∏ –≤ APEX?

–°–∫–∞–∂–∏ ‚Äî —ñ —è –∑—Ä–æ–±–ª—é –∞–¥–∞–ø—Ç–∞—Ü—ñ—é! ‚úÖ