–¢–∞–∫, —Ç–∏ –º–æ–∂–µ—à **–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å–∏–Ω–≥** –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å (`TASK_SUBTASKS`), —ñ –ø—ñ–¥—à–∞–±–ª–æ–Ω—ñ–≤ (`TASK_TEMPLATE_SUBTASKS`), **—è–∫—â–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–æ–±–∏—à –ª–æ–≥—ñ–∫—É —á–µ—Ä–µ–∑ `P5_TASK_MODE`**. –ê–ª–µ, —â–æ–± –∫–æ–¥ –±—É–≤ —á–∏—Å—Ç—ñ—à–∏–º —ñ –ª–µ–≥—à–µ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–≤—Å—è, **–∫—Ä–∞—â–µ –∑—Ä–æ–±–∏—Ç–∏ –¥–≤–∞ –æ–∫—Ä–µ–º—ñ –ø—Ä–æ—Ü–µ—Å–∏–Ω–≥–∏**:

---

## ‚úÖ –í–∞—Ä—ñ–∞–Ω—Ç 1: –î–≤–∞ –æ–∫—Ä–µ–º—ñ –ø—Ä–æ—Ü–µ—Å–∏–Ω–≥–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

### üîß 1. –°—Ç–≤–æ—Ä–∏ **–¥–≤–∞ PL/SQL –ø—Ä–æ—Ü–µ—Å–∏**:

#### üîπ `CREATE_SUBTASK`

* –£–º–æ–≤–∏: `P5_TASK_MODE = 0`
* –ö–æ–¥ ‚Äî —Ç–æ–π, —â–æ —Ç–∏ –≤–∂–µ –º–∞—î—à (–∑ `TASK_SUBTASKS`).

#### üîπ `CREATE_SUBTEMPLATE`

* –£–º–æ–≤–∏: `P5_TASK_MODE = 1`
* –ö–æ–¥ (–∞–¥–∞–ø—Ç–æ–≤–∞–Ω–∏–π –ø—ñ–¥ `TASK_TEMPLATE_SUBTASKS`):

```plsql
DECLARE
  v_next_order NUMBER;
BEGIN
  :P6_STATUS_ID := 1;

  -- –ó–Ω–∞—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—É–ø–Ω–∏–π SUBTASK_ORDER —Å–µ—Ä–µ–¥ —Ç–∏—Ö, —â–æ –º–∞—é—Ç—å —Ç–æ–≥–æ –∂ PARENT_ID
  SELECT NVL(MAX(SUBTASK_ORDER), 0) + 1
  INTO v_next_order
  FROM TASK_TEMPLATE_SUBTASKS
  WHERE TEMPLATE_ID = :P6_TASK_ID
    AND NVL(PARENT_ID, 0) = NVL(:P6_PARENT_ID, 0);

  :P6_SUBTASK_ORDER := v_next_order;

  INSERT INTO TASK_TEMPLATE_SUBTASKS (
    TEMPLATE_ID,
    SUBTASK_CONTENT,
    STATUS_ID,
    PARENT_ID,
    SUBTASK_ORDER
  ) VALUES (
    :P6_TASK_ID,
    :P6_SUBTASK_CONTENT,
    :P6_STATUS_ID,
    :P6_PARENT_ID,
    :P6_SUBTASK_ORDER
  );
END;
```

---

## ‚öôÔ∏è –Ø–∫ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —É–º–æ–≤–∏ –∑–∞–ø—É—Å–∫—É

–£ –∫–æ–∂–Ω–æ–º—É –ø—Ä–æ—Ü–µ—Å–∏–Ω–≥—É:

* **Server-side Condition**:

  * –¢–∏–ø: `PL/SQL Expression`
  * –ó–Ω–∞—á–µ–Ω–Ω—è:

    * –î–ª—è `CREATE_SUBTASK`: `:P5_TASK_MODE = '0'`
    * –î–ª—è `CREATE_SUBTEMPLATE`: `:P5_TASK_MODE = '1'`

---

## üß© –î–æ–¥–∞—Ç–∫–æ–≤–æ

* –ö–Ω–æ–ø–∫–∏ `CREATE_SUBTASK` —Ç–∞ `CREATE_SUBTEMPLATE` –º–æ–∂—É—Ç—å –≤–∏–∫–ª–∏–∫–∞—Ç–∏ **–æ–¥–∏–Ω —ñ —Ç–æ–π —Å–∞–º–∏–π –¥–∏–∞–ª–æ–≥** (—Å—Ç–æ—Ä—ñ–Ω–∫—É), –ø—Ä–æ—Å—Ç–æ —ñ–∑ —Ä—ñ–∑–Ω–∏–º–∏ —Ç–µ–∫—Å—Ç–∞–º–∏ –∞–±–æ –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏–º–∏ –ø–æ–ª—è–º–∏ (—á–µ—Ä–µ–∑ Dynamic Actions).
* –Ø–∫—â–æ —Ç–∏ —Ö–æ—á–µ—à –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **–æ–¥–Ω—É –∫–Ω–æ–ø–∫—É —ñ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å–∏–Ω–≥**, —Ç–æ–¥—ñ –¥–æ–≤–µ–¥–µ—Ç—å—Å—è –ø–∏—Å–∞—Ç–∏ **–æ–¥–∏–Ω –≤–µ–ª–∏–∫–∏–π IF...ELSE** —É PL/SQL –∫–æ–¥—ñ, –∞–ª–µ —Ü–µ –º–µ–Ω—à –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–æ.

---

## üîÑ –ü–µ—Ä–µ–≤–∞–≥–∏ –¥–≤–æ—Ö –ø—Ä–æ—Ü–µ—Å–∏–Ω–≥—ñ–≤:

| –ü–µ—Ä–µ–≤–∞–≥–∞                    | –ü–æ—è—Å–Ω–µ–Ω–Ω—è                                 |
| --------------------------- | ----------------------------------------- |
| ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞                  | –ö–æ–∂–µ–Ω –ø—Ä–æ—Ü–µ—Å –≤–∏–∫–æ–Ω—É—î —á—ñ—Ç–∫—É –∑–∞–¥–∞—á—É         |
| ‚úÖ –ú–µ–Ω—à–µ —É–º–æ–≤ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–¥—É | –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–∏—Å–∞—Ç–∏ `IF P5_TASK_MODE THEN` |
| ‚úÖ –ü—Ä–æ—Å—Ç—ñ—à–µ –¥–µ–±–∞–∂–∏—Ç–∏         | –õ–µ–≥—à–µ –ø–æ–±–∞—á–∏—Ç–∏, —è–∫–∏–π –∫–æ–¥ –≤—ñ–¥–ø—Ä–∞—Ü—é–≤–∞–≤      |
| ‚úÖ –í–∏—â–∞ —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å         | –ú–µ–Ω—à–µ —à–∞–Ω—Å—ñ–≤ —â–æ—Å—å –ø–µ—Ä–µ–ø–ª—É—Ç–∞—Ç–∏             |

---

üîö **–†–µ–∑—é–º–µ**:
‚û°Ô∏è *–ó—Ä–æ–±–∏ –¥–≤–∞ –æ–∫—Ä–µ–º–∏—Ö –ø—Ä–æ—Ü–µ—Å–∏–Ω–≥–∏*.
‚û°Ô∏è *–ù–∞–ª–∞—à—Ç—É–π —É–º–æ–≤–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —á–µ—Ä–µ–∑ `P5_TASK_MODE`*.
‚û°Ô∏è *–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ (—Ç–∏–ø—É `P6_*`) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π —Ç—ñ —Å–∞–º—ñ ‚Äì –≤–æ–Ω–∏ —Å–ø—ñ–ª—å–Ω—ñ –¥–ª—è –æ–±–æ—Ö —Ä–µ–∂–∏–º—ñ–≤*.

–•–æ—á–µ—à ‚Äî –ø–æ–∫–∞–∂—É —â–µ, —è–∫ –∫—Ä–∞—Å–∏–≤–æ –ø—Ä–∏—Ö–æ–≤–∞—Ç–∏/–ø–æ–∫–∞–∑–∞—Ç–∏ –∫–Ω–æ–ø–∫–∏ –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ —Ä–µ–∂–∏–º—É.
