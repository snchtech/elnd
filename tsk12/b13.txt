ÐžÑÑŒ ÑÐº Ñ€ÐµÐ°Ð»Ñ–Ð·ÑƒÐ²Ð°Ñ‚Ð¸ Ñ„ÑƒÐ½ÐºÑ†Ñ–Ð¾Ð½Ð°Ð» **Ð¿ÐµÑ€Ñ–Ð¾Ð´Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ Ð¿Ð»Ð°Ð½ÑƒÐ²Ð°Ð½Ð½Ñ Ð·Ð°Ð²Ð´Ð°Ð½ÑŒ**, Ð²ÐºÐ»ÑŽÑ‡Ð°ÑŽÑ‡Ð¸ Ð·Ð±ÐµÑ€Ñ–Ð³Ð°Ð½Ð½Ñ, Ð²Ñ–Ð´Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð½Ñ Ñ‚Ð° Ñ„Ð¾Ñ€Ð¼ÑƒÐ²Ð°Ð½Ð½Ñ Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ð¾Ð³Ð¾ Ð¾Ð¿Ð¸ÑÑƒ (preview):

---

## âœ… 1. Ð’Ð¸Ð´Ð¸ Ð¿Ð»Ð°Ð½ÑƒÐ²Ð°Ð½Ð½Ñ

### ðŸŸ¦ Ð’Ð°Ñ€Ñ–Ð°Ð½Ñ‚ 1: **ÐŸÐ»Ð°Ð½ÑƒÐ²Ð°Ð½Ð½Ñ Ð¿Ð¾ Ð´Ð½ÑÑ… Ñ‚Ð¸Ð¶Ð½Ñ (Ñ‰Ð¾Ñ‚Ð¸Ð¶Ð½Ñ)**

* **ÐÐ°Ð·Ð²Ð° Ñ€ÐµÐ¶Ð¸Ð¼Ñƒ**: `WEEKLY_TIME_SCHEDULE`
* **UI**:

  * Checkbox List: `PERIOD_WEEKDAYS` (Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, Ð·Ð½Ð°Ñ‡ÐµÐ½Ð½Ñ `2,4,6`)
  * Time Picker (HTML `input type="time"`): `PERIOD_TIME` (Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, `09:00`)

### ðŸŸ¦ Ð’Ð°Ñ€Ñ–Ð°Ð½Ñ‚ 2: **ÐŸÐµÑ€Ñ–Ð¾Ð´Ð¸Ñ‡Ð½Ñ–ÑÑ‚ÑŒ Ð¿Ð¾ N Ð´Ð½ÑÑ…**

* **ÐÐ°Ð·Ð²Ð° Ñ€ÐµÐ¶Ð¸Ð¼Ñƒ**: `INTERVAL_DAYS_MULTITIME`
* **UI**:

  * Number Item: `PERIOD_INTERVAL` (Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, `4`)
  * Multi-Select LOV: `HOURLY_TIMES` (Ð·Ð½Ð°Ñ‡ÐµÐ½Ð½Ñ Ñ‚Ð¸Ð¿Ñƒ: `06:00,09:00`)

---

## âœ… 2. Ð—Ð±ÐµÑ€Ñ–Ð³Ð°Ð½Ð½Ñ Ð² Ð‘Ð”

**TASK\_TEMPLATES**:

* `PERIOD_MODE` â€” Ñ€ÐµÐ¶Ð¸Ð¼ (`WEEKLY_TIME_SCHEDULE`, `INTERVAL_DAYS_MULTITIME`)
* `PERIOD_WEEKDAYS` â€” CSV: `2,4,6`
* `PERIOD_TIME` â€” `09:00`
* `PERIOD_INTERVAL` â€” `4`
* `HOURLY_TIMES` â€” `06:00,09:00`
* `DATE_END` â€” Ð´Ð°Ñ‚Ð° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð½Ñ

---

## âœ… 3. Ð¤Ð¾Ñ€Ð¼ÑƒÐ²Ð°Ð½Ð½Ñ Ñ‚ÐµÐºÑÑ‚Ñƒ-Ð¿Ð¾ÑÑÐ½ÐµÐ½Ð½Ñ (Preview)

```plsql
-- PL/SQL Ñ„ÑƒÐ½ÐºÑ†Ñ–Ñ (Ð¼Ð¾Ð¶Ð½Ð° Ñ€ÐµÐ°Ð»Ñ–Ð·ÑƒÐ²Ð°Ñ‚Ð¸ ÑÐº APEX item source Ð°Ð±Ð¾ Ñƒ view)
-- ÐÐ±Ð¾ JS-Ñ„ÑƒÐ½ÐºÑ†Ñ–Ñ Ð½Ð° Ñ„Ñ€Ð¾Ð½Ñ‚Ñ–:
function formatPreview(periodMode, weekdays, time, interval, hours) {
  if (periodMode === 'WEEKLY_TIME_SCHEDULE') {
    const daysMap = {
      '1': 'Ñ‰Ð¾Ð½ÐµÐ´Ñ–Ð»Ñ–', '2': 'Ñ‰Ð¾Ð¿Ð¾Ð½ÐµÐ´Ñ–Ð»ÐºÐ°', '3': 'Ñ‰Ð¾Ð²Ñ–Ð²Ñ‚Ð¾Ñ€ÐºÐ°',
      '4': 'Ñ‰Ð¾ÑÐµÑ€ÐµÐ´Ð¸', '5': 'Ñ‰Ð¾Ñ‡ÐµÑ‚Ð²ÐµÑ€Ð³Ð°', '6': 'Ñ‰Ð¾Ð¿â€™ÑÑ‚Ð½Ð¸Ñ†Ñ–', '7': 'Ñ‰Ð¾ÑÑƒÐ±Ð¾Ñ‚Ð¸'
    };
    const dayLabels = weekdays.split(',').map(d => daysMap[d.trim()]);
    return `${dayLabels.join(', ')} Ð¾ ${time}`;
  } else if (periodMode === 'INTERVAL_DAYS_MULTITIME') {
    return `ÐšÐ¾Ð¶Ð½Ñ– ${interval} Ð´Ð½Ñ– Ð¾ ${hours}`;
  }
  return '';
}
```

ðŸ”¹ **ÐŸÑ€Ð¸ÐºÐ»Ð°Ð´ 1:**

> `WEEKLY_TIME_SCHEDULE` + `2,4,6` + `09:00`
> â†’ `Ñ‰Ð¾Ð¿Ð¾Ð½ÐµÐ´Ñ–Ð»ÐºÐ°, Ñ‰Ð¾ÑÐµÑ€ÐµÐ´Ð¸, Ñ‰Ð¾Ð¿â€™ÑÑ‚Ð½Ð¸Ñ†Ñ– Ð¾ 09:00`

ðŸ”¹ **ÐŸÑ€Ð¸ÐºÐ»Ð°Ð´ 2:**

> `INTERVAL_DAYS_MULTITIME` + `4` + `06:00,09:00`
> â†’ `ÐšÐ¾Ð¶Ð½Ñ– 4 Ð´Ð½Ñ– Ð¾ 06:00,09:00`

---

## âœ… 4. Ð¢Ð°Ð±Ð»Ð¸Ñ†Ñ Ð´Ð»Ñ Ð·Ð±ÐµÑ€Ñ–Ð³Ð°Ð½Ð½Ñ Ð·Ð°Ð¿Ð»Ð°Ð½Ð¾Ð²Ð°Ð½Ð¸Ñ… Ð·Ð°Ð¿ÑƒÑÐºÑ–Ð²

```sql
CREATE TABLE TASK_TEMPLATE_EXECUTIONS (
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  TEMPLATE_ID NUMBER NOT NULL,
  PLANNED_DATE DATE NOT NULL,
  STATUS VARCHAR2(20) DEFAULT 'PLANNED'
);
```

---

## âœ… 5. Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ñ–Ñ Ð·Ð°Ð¿Ð¸ÑÑ–Ð² Ñƒ Ñ‚Ð°Ð±Ð»Ð¸Ñ†ÑŽ Ð·Ð°Ð¿ÑƒÑÐºÑ–Ð²

```plsql
DECLARE
  v_next_date DATE := SYSDATE;
  v_end_date  DATE := :P_END_DATE;
BEGIN
  IF :P_PERIOD_MODE = 'INTERVAL_DAYS_MULTITIME' THEN
    FOR i IN 1 .. 50 LOOP
      EXIT WHEN v_next_date > v_end_date;
      FOR hour IN (SELECT REGEXP_SUBSTR(:P_HOURLY_TIMES, '[^,]+', 1, LEVEL) AS h
                   FROM dual
                   CONNECT BY LEVEL <= REGEXP_COUNT(:P_HOURLY_TIMES, ',') + 1)
      LOOP
        INSERT INTO TASK_TEMPLATE_EXECUTIONS (TEMPLATE_ID, PLANNED_DATE)
        VALUES (:P_TEMPLATE_ID, TO_DATE(TO_CHAR(v_next_date, 'YYYY-MM-DD') || ' ' || hour.h, 'YYYY-MM-DD HH24:MI'));
      END LOOP;
      v_next_date := v_next_date + TO_NUMBER(:P_PERIOD_INTERVAL);
    END LOOP;
  END IF;
  COMMIT;
END;
```

---

ðŸ”„ Ð¯ÐºÑ‰Ð¾ Ñ…Ð¾Ñ‡ÐµÑˆ â€” Ð¼Ð¾Ð¶Ñƒ Ñ‚Ð°ÐºÐ¾Ð¶ Ð´Ð¾Ð¿Ð¾Ð¼Ð¾Ð³Ñ‚Ð¸ ÑÑ‚Ð²Ð¾Ñ€Ð¸Ñ‚Ð¸ **Ð¿Ñ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ñƒ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ñ–Ñ— `DBMS_SCHEDULER JOB`** Ð´Ð»Ñ Oracle.

Ð¥Ð¾Ñ‡ÐµÑˆ Ð´Ð¾Ð´Ð°Ñ‚Ð¸ Ð»Ð¾Ð³Ñ–ÐºÑƒ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ñ–Ñ— Ð·Ð°Ð²Ð´Ð°Ð½ÑŒ Ð¿Ð¾ JOB?
