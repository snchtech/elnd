–¢–∞–∫, —Ü–µ **–¥—É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–µ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—á–Ω–µ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è** ‚Äî —ñ —Å–ø—Ä–∞–≤–¥—ñ, **–¥—É–±–ª—é–≤–∞–Ω–Ω—è –æ–¥—Ä–∞–∑—É –≤ –ë–î** —Å—Ç–≤–æ—Ä—é—î —Ä–∏–∑–∏–∫:

* ‚ùå –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º—ñ–≥ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥—É–º–∞—Ç–∏
* ‚ùå –¥—É–±–ª—å —Å—Ç–≤–æ—Ä–µ–Ω–æ, –∞–ª–µ –Ω—ñ—Ö—Ç–æ –Ω–µ –Ω–∞—Ç–∏—Å–Ω—É–≤ "–ó–±–µ—Ä–µ–≥—Ç–∏"
* ‚ùå –∑‚Äô—è–≤–ª—è—é—Ç—å—Å—è **—Å–º—ñ—Ç—Ç—î–≤—ñ –∑–∞–ø–∏—Å–∏ –≤ `TASK_SUBTASKS`** –∞–±–æ `TASK_TEMPLATE_SUBTASKS`

---

## üîç –†–æ–∑–≥–ª—è–Ω–µ–º–æ –≤–∞—Ä—ñ–∞–Ω—Ç–∏: —â–æ –∫—Ä–∞—â–µ –∑ —Ç–æ—á–∫–∏ –∑–æ—Ä—É UX —ñ –ë–î?

---

### ‚úÖ –í–∞—Ä—ñ–∞–Ω—Ç 1: –î—É–±–ª—é–≤–∞–Ω–Ω—è –≤ –ø–∞–º‚Äô—è—Ç—ñ (–≤ `Session State`, JS, APEX Items)

1. –ü—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ **"–î—É–±–ª—é–≤–∞—Ç–∏"**:

   * –î–∞–Ω—ñ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è/—à–∞–±–ª–æ–Ω—É –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è —É —Ñ–æ—Ä–º—É
   * `P_TASK_ID` –∞–±–æ `P_TEMPLATE_ID` ‚Üí `NULL`
   * `TASK_SUBTASKS` / `TASK_TEMPLATE_SUBTASKS` **–Ω–µ –≤—Å—Ç–∞–≤–ª—è—é—Ç—å—Å—è –≤ –ë–î**, –∞ –ª–∏—à–µ –ø–æ–∫–∞–∑—É—é—Ç—å—Å—è —É —Ñ–æ—Ä–º—ñ (—è–∫ JSON / —Ç–∏–º—á–∞—Å–æ–≤–æ)

2. –ö–æ–ª–∏ –Ω–∞—Ç–∏—Å–Ω—É—Ç–æ **"–ó–±–µ—Ä–µ–≥—Ç–∏"**:

   * –ì–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –Ω–æ–≤–∏–π `NEXTVAL` (–ø–µ—Ä–µ–¥ insert)
   * –î–∞–Ω—ñ –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è –≤ `TASKS` / `TASK_TEMPLATES`
   * –ü—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –∑ `sessionStorage` –∞–±–æ –¥–∏–Ω–∞–º—ñ—á–Ω–æ–≥–æ IG ‚Äî –≤—Å—Ç–∞–≤–ª—è—é—Ç—å—Å—è –∑ –Ω–æ–≤–∏–º `TASK_ID`

üìå –¶–µ –Ω–∞–π–±–µ–∑–ø–µ—á–Ω—ñ—à–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç, **–∞–ª–µ –ø–æ—Ç—Ä–µ–±—É—î JavaScript –ª–æ–≥—ñ–∫–∏ –¥–ª—è —Ç–∏–º—á–∞—Å–æ–≤–æ–≥–æ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å**, –∞–±–æ –ø–æ–≤–Ω–æ–≥–æ client-side –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è IG (–∞–±–æ APEX Collection).

---

### ‚úÖ –í–∞—Ä—ñ–∞–Ω—Ç 2: –î—É–±–ª—é–≤–∞–Ω–Ω—è —É —Ç–∏–º—á–∞—Å–æ–≤—É —Ç–∞–±–ª–∏—Ü—é (—á–µ—Ä–Ω–µ—Ç–∫–∞)

1. –ö–Ω–æ–ø–∫–∞ **"–î—É–±–ª—é–≤–∞—Ç–∏"** —Å—Ç–≤–æ—Ä—é—î –∑–∞–ø–∏—Å–∏ –≤ —Ç–∏–º—á–∞—Å–æ–≤—É —Ç–∞–±–ª–∏—Ü—é, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:

   * `TASKS_DRAFT`
   * `TASK_SUBTASKS_DRAFT`

2. –ö–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î **"–ó–±–µ—Ä–µ–≥—Ç–∏"**:

   * –î–∞–Ω—ñ –∑ DRAFT-—Ç–∞–±–ª–∏—Ü—ñ –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—å—Å—è –≤ –æ—Å–Ω–æ–≤–Ω—É
   * –¢–∏–º—á–∞—Å–æ–≤—ñ –∑–∞–ø–∏—Å–∏ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è

3. –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–ª–∏—à–∞—î —Å—Ç–æ—Ä—ñ–Ω–∫—É ‚Üí —á–µ—Ä–µ–∑ JOB/—Ç—Ä–∏–≥–µ—Ä/–æ—á–∏—â–µ–Ω–Ω—è —Å–µ—Å—ñ—ó –∑–∞–ø–∏—Å–∏ –∑ `DRAFT` –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è.

üìå –¶–µ **—Å–∫–ª–∞–¥–Ω—ñ—à–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç**, –∞–ª–µ **–¥–æ–∑–≤–æ–ª—è—î –ø–æ–≤–Ω—ñ—Å—Ç—é –≤—ñ–¥–æ–∫—Ä–µ–º–∏—Ç–∏ "—á–µ—Ä–Ω–µ—Ç–∫–∏" –≤—ñ–¥ –∂–∏–≤–∏—Ö –¥–∞–Ω–∏—Ö**.

---

### ‚úÖ –í–∞—Ä—ñ–∞–Ω—Ç 3 (–≥—ñ–±—Ä–∏–¥–Ω–∏–π): –ü–æ–∫–∞–∑–∞—Ç–∏ —Ñ–æ—Ä–º—É –¥—É–±–ª—é–≤–∞–Ω–Ω—è, –∞–ª–µ –≤—Å—Ç–∞–≤–ª—è—Ç–∏ –≤ –ë–î —Ç—ñ–ª—å–∫–∏ –ø—ñ—Å–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è

1. –ü—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ **"–î—É–±–ª—é–≤–∞—Ç–∏"**:

   * –í—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è —Ñ–æ—Ä–º–∞ (—è–∫ –ø—Ä–∏ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—ñ)
   * –ó–Ω–∞—á–µ–Ω–Ω—è `TASK_ID` ‚Üí NULL
   * `SUBTASKS` –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è —è–∫ –∫–æ–ø—ñ—è –≤ IG (–±–µ–∑ –≤—Å—Ç–∞–≤–∫–∏ –≤ –ë–î)

2. –ü—ñ—Å–ª—è –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è **"–°—Ç–≤–æ—Ä–∏—Ç–∏"**:

   * –ì–µ–Ω–µ—Ä—É—î—Ç—å—Å—è `NEXTVAL` –¥–ª—è `TASK_ID`
   * –î–∞–Ω—ñ —Ñ–æ—Ä–º–∏ + —Ä—è–¥–∫–∏ IG –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –ë–î

---

## üü° –Ø–∫–∏–π –ø—ñ–¥—Ö—ñ–¥ –æ–±—Ä–∞—Ç–∏?

| –í–∞—Ä—ñ–∞–Ω—Ç                            | –†–∏–∑–∏–∫ —Å–º—ñ—Ç—Ç—è | UX       | –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è        |
| ---------------------------------- | ------------ | -------- | ----------------- |
| **1. –ü–∞–º‚Äô—è—Ç—å/Session**             | üîí –ù–µ–º–∞—î     | ‚úÖ –î–æ–±—Ä–∏–π | ‚öôÔ∏è JS/collections |
| **2. –¢–∏–º—á–∞—Å–æ–≤–∞ —Ç–∞–±–ª–∏—Ü—è**           | üîí –ù–µ–º–∞—î     | ‚úÖ –î–æ–±—Ä–∏–π | ‚öôÔ∏è –°–∫–ª–∞–¥–Ω–æ        |
| **3. –í—Å—Ç–∞–≤–∫–∞ –ø—ñ—Å–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è** | ‚ö†Ô∏è –ú–æ–∂–ª–∏–≤–∏–π  | ‚úÖ –î–æ–±—Ä–∏–π | ‚≠ê –†–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è  |

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π (–í–∞—Ä—ñ–∞–Ω—Ç 3):

### üîπ –ü—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ **"–î—É–±–ª—é–≤–∞—Ç–∏"**:

* –í–∏–∫–ª–∏–∫–∞—î—à —Å–µ—Ä–≤–µ—Ä–Ω–∏–π `Ajax Callback`, —è–∫–∏–π –ø–æ–≤–µ—Ä—Ç–∞—î JSON-–¥–∞–Ω—ñ:

  * `TASK_CONTENT`, `NOTE`, `TYPE_ID`, —ñ —Ç–¥.
  * –º–∞—Å–∏–≤ `SUBTASKS`

* –ù–∞ –∫–ª—ñ—î–Ω—Ç—ñ:

  * –í—ñ–¥–∫—Ä–∏–≤–∞—î—à **–º–æ–¥–∞–ª—å–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É** –∞–±–æ —Ñ–æ—Ä–º—É
  * –í—Å—Ç–∞–Ω–æ–≤–ª—é—î—à –∑–Ω–∞—á–µ–Ω–Ω—è item'—ñ–≤
  * **–û—á–∏—â–∞—î—à `P_TASK_ID`**
  * IG –∑–∞–ø–æ–≤–Ω—é—î—à –¥–∏–Ω–∞–º—ñ—á–Ω–æ —á–µ—Ä–µ–∑ `apex.region("...").widget().interactiveGrid("getViews","grid").model.insertNewRecord({...})`

### üîπ –ü—Ä–∏ **–Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ "–°—Ç–≤–æ—Ä–∏—Ç–∏"**:

* –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è
* –î–æ –Ω—å–æ–≥–æ –¥–æ–¥–∞—é—Ç—å—Å—è –≤—Å—ñ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è
* –í—Å–µ –∑–∞–ø–∏—Å—É—î—Ç—å—Å—è –≤ –ë–î

---

## üîî –ü—ñ–¥–∫–∞–∑–∫–∞

–©–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ —Å–º—ñ—Ç—Ç—î–≤–∏—Ö `SUBTASKS`, –Ω–µ –≤—Å—Ç–∞–≤–ª—è–π –∂–æ–¥–µ–Ω –∑–∞–ø–∏—Å –¥–æ –ë–î –¥–æ –º–æ–º–µ–Ω—Ç—É –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è **–ó–±–µ—Ä–µ–≥—Ç–∏/–°—Ç–≤–æ—Ä–∏—Ç–∏**.

---

üîπ –•–æ—á–µ—à ‚Äî –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤–∞—Ä—ñ–∞–Ω—Ç –∑ –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è–º —Ñ–æ—Ä–º–∏ –¥—É–±–ª—ñ–∫–∞—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤—ñ JSON. –ù–∞–ø—Ä–∏–∫–ª–∞–¥:

* Callback ‚Üí –ø–æ–≤–µ—Ä—Ç–∞—î –¥–∞–Ω—ñ
* JS ‚Üí –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –∑–Ω–∞—á–µ–Ω–Ω—è
* IG ‚Üí –∑–∞–ø–æ–≤–Ω—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

–•–æ—á–µ—à –∑—Ä–æ–±–∏—Ç–∏ —Ç–∞–∫—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é?
