–©–æ–± –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 5 –∞–±–æ 6) **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø–æ–≤–Ω—é–≤–∞—Ç–∏ —Ñ–æ—Ä–º—É –∑ –ë–î** –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É (`P_TASK_ACTION_MODE = 0`) –∞–±–æ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è (`= 2`), –ø–æ—Ç—Ä—ñ–±–Ω–æ:

---

## ‚úÖ –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–∏—Ç–∏ `PL/SQL Process` —É `Before Header`

### üîπ –ù–∞–∑–≤–∞: `FETCH_TASK_OR_TEMPLATE_DATA`

**–£–º–æ–≤–∏ –∑–∞–ø—É—Å–∫—É**:

* `Server-side Condition`:
  `Expression 1`: `:P_TASK_ACTION_MODE`
  `Expression 2`: `0`
  `Condition Type`: `IN LIST`
  (–∑ –≤–∫–∞–∑–∞–Ω–Ω—è–º `0,2`) –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ `INSTR('0,2', :P_TASK_ACTION_MODE) > 0`

---

### üîπ –ö–æ–¥:

```plsql
BEGIN
  IF :P_TASK_MODE = '0' THEN
    -- –ó–∞–≤–¥–∞–Ω–Ω—è –∑ TASKS
    SELECT
      TASK_CONTENT,
      PLANNING_DATE_START,
      PLANNING_DATE_END,
      TYPE_ID,
      UNIT_ID,
      NOTE
    INTO
      :P_TASK_CONTENT,
      :P_PLANNING_DATE_START,
      :P_PLANNING_DATE_END,
      :P_TYPE_ID,
      :P_UNIT,
      :P_NOTE
    FROM TASKS
    WHERE ID = :P_TASK_ID;

  ELSIF :P_TASK_MODE = '1' THEN
    -- –®–∞–±–ª–æ–Ω –∑ TASK_TEMPLATES
    SELECT
      TASK_CONTENT,
      TYPE_ID,
      UNIT_ID,
      NOTE,
      PERIOD_MODE,
      PERIOD_INTERVAL,
      PERIOD_TIME,
      WEEKLY_DAYS,
      WEEKLY_TIME,
      DATE_END
    INTO
      :P_TASK_CONTENT,
      :P_TYPE_ID,
      :P_UNIT,
      :P_NOTE,
      :P_PERIOD_MODE,
      :P_PERIOD_INTERVAL,
      :P_PERIOD_TIME,
      :P_WEEKLY_DAYS,
      :P_WEEKLY_TIME,
      :P_DATE_END
    FROM TASK_TEMPLATES
    WHERE ID = :P_TASK_ID;
  END IF;
END;
```

---

## ‚úÖ –ö—Ä–æ–∫ 2: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Item'—ñ–≤

* –í—Å—ñ `P_...` item –º–∞—é—Ç—å:

  * **Value Protected** = `No` (—â–æ–± –¥–æ–∑–≤–æ–ª–∏—Ç–∏ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –∑ PL/SQL)
  * **Source Type** = `Always Null` –∞–±–æ `Static Assignment` (—è–∫—â–æ —Ç–∏ –Ω–µ —Ö–æ—á–µ—à, —â–æ–± –≤–æ–Ω–æ –∑–∞–ø–æ–≤–Ω—é–≤–∞–ª–æ—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —á–µ—Ä–µ–∑ source)
  * **Display Only** = `Yes` (–≤ —Ä–µ–∂–∏–º—ñ –ø–µ—Ä–µ–≥–ª—è–¥—É `P_TASK_ACTION_MODE = 0`)
  * **Read Only** = `No` (—â–æ–± –º–æ–∂–Ω–∞ –±—É–ª–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –∑ PL/SQL)

---

## ‚úÖ –ö—Ä–æ–∫ 3: –†–æ–±–æ—Ç–∞ –∑ LOV (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `P_UNIT`)

–¢–∏ –≤–∂–µ –∑–∞–∑–Ω–∞—á–∏–≤, —â–æ `P_UNIT` ‚Äî —Ü–µ select list –∑ `return_value = UNIT_ID`, `display = UNIT_NAME`.
–Ø–∫—â–æ `UNIT_ID` –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ `:P_UNIT := ...`, —Ç–æ APEX –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–∫–∞–∂–µ `UNIT_NAME`.

‚ùóÔ∏è **–ì–æ–ª–æ–≤–Ω–µ** ‚Äî –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Å—è, —â–æ:

* `Display Extra Values = Yes` —É P\_UNIT
* `LOV` –º—ñ—Å—Ç–∏—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è, —è–∫—ñ —Ä–µ–∞–ª—å–Ω–æ —ñ—Å–Ω—É—é—Ç—å –≤ –±–∞–∑—ñ

---

## üìå –†–µ–∑—É–ª—å—Ç–∞—Ç:

* –Ø–∫—â–æ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –≤ —Ä–µ–∂–∏–º—ñ `P_TASK_ACTION_MODE = 2 –∞–±–æ 0`
* –Ü `P_TASK_MODE = 0 ‚Üí TASK`, –∞–±–æ `1 ‚Üí TEMPLATE`
* –¢–æ–¥—ñ –≤—Å—ñ –ø–æ–ª—è –∑–∞–ø–æ–≤–Ω—é—é—Ç—å—Å—è –∑ –ø–æ—Ç—Ä—ñ–±–Ω–æ—ó —Ç–∞–±–ª–∏—Ü—ñ

---

üîî –•–æ—á–µ—à ‚Äî —è –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ –¥–æ–¥–∞—Ç–∏ –∑–∞—Ö–∏—Å—Ç, —â–æ–± –Ω–µ –≤—ñ–¥–∫—Ä–∏–≤–∞–ª–∞—Å—è —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –±–µ–∑ `P_TASK_ID`, –∞–±–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —è–∫—â–æ –∑–∞–ø–∏—Å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. –ü–æ—Ç—Ä—ñ–±–Ω–æ?
