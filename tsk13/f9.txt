–û—Å—å —è–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –∫–Ω–æ–ø–∫–∏ **"–í –∞—Ä—Ö—ñ–≤" (–∞–Ω—É–ª—é–≤–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è/—à–∞–±–ª–æ–Ω)** –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –ø–µ—Ä–µ–≥–ª—è–¥—É –∫–∞—Ä—Ç–∫–∏:

---

## ‚úÖ 1. –î–æ–¥–∞–π –∫–Ω–æ–ø–∫—É `ARCHIVE_TASK`

* **Condition**: `P_TASK_ACTION_MODE = 0` (—Ç–æ–±—Ç–æ —Ç—ñ–ª—å–∫–∏ –≤ —Ä–µ–∂–∏–º—ñ –ø–µ—Ä–µ–≥–ª—è–¥—É)
* –ú–æ–∂–µ—à –∑—Ä–æ–±–∏—Ç–∏ —ó—ó —è–∫ `Button Template: Icon + Label` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∞—Ä—Ö—ñ–≤–Ω–∞ –∫–æ—Ä–æ–±–∫–∞ üóÉÔ∏è)

---

## ‚úÖ 2. –°—Ç–≤–æ—Ä–∏ —Å–µ—Ä–≤–µ—Ä–Ω–∏–π `PL/SQL Process`

–ù–∞–∑–≤–∞: `ARCHIVE_TASK_PROCESS`
**Condition: When Button Pressed = ARCHIVE\_TASK**

```plsql
DECLARE
  v_mode NUMBER := TO_NUMBER(:P_TASK_MODE);
  v_id   NUMBER := TO_NUMBER(:P_TASK_ID);
BEGIN
  -- 1. –û–Ω–æ–≤–ª—é—î–º–æ SIGNATUREHISTORY
  FOR r IN (
    SELECT h.ID
    FROM SIGNATURERIGHTS s
    JOIN SIGNATUREHISTORY h ON h.SIGNRIGHT_ID = s.ID
    WHERE s.TASK_ID = v_id
      AND (h.SIGNER_BY IS NULL OR h.SIGNER_DATE IS NULL)
  ) LOOP
    UPDATE SIGNATUREHISTORY
    SET SIGNER_BY   = :P0_USER_ID,
        SIGNER_DATE = SYSDATE,
        NEW_STATUS_ID = 11,
        NOTE = '–ê–Ω—É–ª—å–æ–≤–∞–Ω–æ',
        SDATE = SYSDATE
    WHERE ID = r.ID;
  END LOOP;

  -- 2. –û–Ω–æ–≤–ª—é—î–º–æ —Å—Ç–∞—Ç—É—Å –∑–∞–≤–¥–∞–Ω–Ω—è –∞–±–æ —à–∞–±–ª–æ–Ω—É
  IF v_mode = 0 THEN
    UPDATE TASKS SET STATUS_ID = 11 WHERE ID = v_id;
  ELSIF v_mode = 1 THEN
    UPDATE TASK_TEMPLATES SET STATUS_ID = 11 WHERE ID = v_id;
  END IF;

  -- ‚úÖ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
  apex_message.add_message(p_message => '–ó–∞–ø–∏—Å –∞–Ω—É–ª—å–æ–≤–∞–Ω–æ —Ç–∞ –ø–µ—Ä–µ–º—ñ—â–µ–Ω–æ –≤ –∞—Ä—Ö—ñ–≤.', p_type => apex_message.c_success);

EXCEPTION
  WHEN OTHERS THEN
    raise_application_error(-20001, '–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∞—Ä—Ö—ñ–≤–∞—Ü—ñ—ó: ' || SQLERRM);
END;
```

---

## ‚úÖ 3. Optional: –ü—ñ—Å–ª—è –∞–Ω—É–ª—é–≤–∞–Ω–Ω—è –∑–∞–∫—Ä–∏—Ç–∏ –¥—ñ–∞–ª–æ–≥ —ñ –æ–Ω–æ–≤–∏—Ç–∏ –∑–≤—ñ—Ç (—è–∫—â–æ —Ü–µ –≤—ñ–¥–∫—Ä–∏–≤–∞–ª–æ—Å—è –∑ –º–æ–¥–∞–ª–∫–∏)

* –î–æ–¥–∞–π —â–µ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å **Close Dialog** –ø—ñ—Å–ª—è `ARCHIVE_TASK_PROCESS`:

  * **Condition**: When Button Pressed = `ARCHIVE_TASK`
  * **Return Value**: `'archived'`

* –ù–∞ –≥–æ–ª–æ–≤–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –∑—Ä–æ–±–∏ **Dynamic Action ‚Üí Dialog Closed**

  * Client-side Condition:

    ```js
    this.data.dialogReturn === 'archived'
    ```
  * True Action: `Refresh` ‚Üí Region ‚Üí `mainReport`
  * True Action 2: `Execute JavaScript Code`:

    ```js
    apex.message.showPageSuccess("‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è/—à–∞–±–ª–æ–Ω –∞–Ω—É–ª—å–æ–≤–∞–Ω–æ");
    ```

---

–•–æ—á–µ—à ‚Äî –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ –æ—Ñ–æ—Ä–º–∏—Ç–∏ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø–µ—Ä–µ–¥ –∞–Ω—É–ª—é–≤–∞–Ω–Ω—è–º (—á–µ—Ä–µ–∑ `apex.confirm(...)`) —á–∏ –∑—Ä–æ–±–∏—Ç–∏ —Ü–µ –≤—Å–µ –∑ JS-–≤–∏–∫–ª–∏–∫–æ–º. –ü–æ—Ç—Ä—ñ–±–Ω–æ?
