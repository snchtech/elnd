–¢–∏ –∞–±—Å–æ–ª—é—Ç–Ω–æ —Ç–æ—á–Ω–æ –ø–æ–º—ñ—Ç–∏–≤ –≥–æ–ª–æ–≤–Ω—É –ø—Ä–æ–±–ª–µ–º—É: **–ø–µ—Ä–µ–º–∏–∫–∞—á `P_TASK_MODE` –ø–µ—Ä–µ–º–∏–∫–∞—î—Ç—å—Å—è –æ–¥—Ä–∞–∑—É, —â–µ –¥–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –¥—ñ—ó**, —Ç–æ–º—É:

* üîÅ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è Submit –∞–±–æ Partial Submit
* üîÉ —Ñ–æ—Ä–º–∞ –æ–¥—Ä–∞–∑—É –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è —ñ –≤—Å–µ –æ—á–∏—â–µ–Ω–Ω—è –≤–∂–µ –π–¥–µ "–ø—ñ—Å–ª—è" –∑–º—ñ–Ω–∏ —Å—Ç–∞–Ω—É
* üßº `clearTaskFormFields()` –Ω–µ –≤—Å—Ç–∏–≥–∞—î —Å–ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —è–∫ —Ç—Ä–µ–±–∞

---

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è: **–í—ñ–¥–∫–∞—Ç –∑–Ω–∞—á–µ–Ω–Ω—è –ø–µ—Ä–µ–º–∏–∫–∞—á–∞ –¥–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è**

### üîß 1. –ó–±–µ—Ä–µ–∂–∏ —Å—Ç–∞—Ä–µ –∑–Ω–∞—á–µ–Ω–Ω—è `P_TASK_MODE` –≤ –∑–º—ñ–Ω–Ω—ñ–π

–©–æ–± –π–æ–≥–æ –º–æ–∂–Ω–∞ –±—É–ª–æ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –≤ —Ä–∞–∑—ñ —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è

```javascript
let previousTaskMode = $v("P_TASK_MODE");
```

> –ü–æ–∫–ª–∞–¥–∏ —Ü—é –∑–º—ñ–Ω–Ω—É –≤ –≥–ª–æ–±–∞–ª—å–Ω—É –æ–±–ª–∞—Å—Ç—å ‚Äî –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ —É `Page Function and Global Variable Declaration`:

```javascript
var previousTaskMode = $v("P_TASK_MODE");
```

---

### üîß 2. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π `setTimeout()` —â–æ–± –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –ø—ñ—Å–ª—è `confirm`

–ó–º—ñ–Ω–∏ —Ç–≤—ñ–π `Dynamic Action` —Ç–∞–∫–∏–º —á–∏–Ω–æ–º:

```javascript
// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è
const hasSubtasks = apex.region('TASK_SUBTASKS_IG_1')?.widget()?.interactiveGrid("getViews", "grid").model.length > 0;
const hasSubtemplates = apex.region('TASK_TEMPLATE_SUBTASKS_IG')?.widget()?.interactiveGrid("getViews", "grid").model.length > 0;

if (hasSubtasks || hasSubtemplates) {
  // ‚ùå –ë–ª–æ–∫—É—î–º–æ –∑–º—ñ–Ω—É
  apex.message.alert("–°–ø–æ—á–∞—Ç–∫—É –≤–∏–¥–∞–ª—ñ—Ç—å —É—Å—ñ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –∞–±–æ –ø—ñ–¥—à–∞–±–ª–æ–Ω–∏ –ø–µ—Ä–µ–¥ –∑–º—ñ–Ω–æ—é —Ç–∏–ø—É.");
  setTimeout(() => {
    $s("P_TASK_MODE", previousTaskMode); // –í—ñ–¥–Ω–æ–≤–ª—é—î–º–æ
  }, 0);
  return;
}

// –ó–∞–ø–∏—Ç –Ω–∞ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è
apex.message.confirm(
  "–£—Å—ñ –≤–≤–µ–¥–µ–Ω—ñ –¥–∞–Ω—ñ –±—É–¥–µ –æ—á–∏—â–µ–Ω–æ. –í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏?",
  function(okPressed) {
    if (okPressed) {
      clearTaskFormFields();
    } else {
      // –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–Ω–∞—á–µ–Ω–Ω—è –ø—ñ—Å–ª—è —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è
      setTimeout(() => {
        $s("P_TASK_MODE", previousTaskMode);
      }, 0);
    }
  }
);
```

---

## üõ† 3. –©–æ —Ä–æ–±–∏—Ç—å `.getActions().invoke("reset")`?

–¶–µ:

* **—Å–∫–∏–¥–∞—î IG –¥–æ –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ —Å—Ç–∞–Ω—É**
* –≤–∏–¥–∞–ª—è—î **–Ω–µ–∑–±–µ—Ä–µ–∂–µ–Ω—ñ –∑–∞–ø–∏—Å–∏**
* –≤—ñ–¥–Ω–æ–≤–ª—é—î –∑–Ω–∞—á–µ–Ω–Ω—è –∑—ñ `Source` (SQL, Collection —Ç–æ—â–æ)

‚ö†Ô∏è –ê–ª–µ —è–∫—â–æ IG –≤–∂–µ –º–∞—î –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –∑–∞–ø–∏—Å–∏ –≤ –ë–î (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ –ø—ñ—Å–ª—è –≤—Å—Ç–∞–≤–∫–∏), –≤–æ–Ω–∏ –Ω–µ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è –∑ –ë–î ‚Äî –ø–æ—Ç—Ä—ñ–±–Ω–æ —ó—Ö –≤–∏–¥–∞–ª–∏—Ç–∏ –æ–∫—Ä–µ–º–æ!

---

## üî• –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ø–æ–≤–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è IG —á–µ—Ä–µ–∑ `model.clear()`

```javascript
const region = apex.region('TASK_SUBTASKS_IG_1');
if (region) {
  const model = region.widget().interactiveGrid("getViews", "grid").model;
  const records = model.getRecords();
  records.forEach(rec => model.deleteRecord(rec));
}
```

---

## üîö –í–∏—Å–Ω–æ–≤–æ–∫

| –ü—Ä–æ–±–ª–µ–º–∞                                            | –†—ñ—à–µ–Ω–Ω—è                                                         |
| --------------------------------------------------- | --------------------------------------------------------------- |
| –ü–µ—Ä–µ–º–∏–∫–∞—á `P_TASK_MODE` –∑–º—ñ–Ω—é—î—Ç—å—Å—è –¥–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è | –ó–±–µ—Ä—ñ–≥–∞—î–º–æ `previousTaskMode`, –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ —á–µ—Ä–µ–∑ `$s()`          |
| –ü—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –Ω–µ –æ—á–∏—â–∞—é—Ç—å—Å—è                           | –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `model.deleteRecord()` –∑–∞–º—ñ—Å—Ç—å `reset()`         |
| –î–∞–Ω—ñ –Ω–µ –æ—á–∏—â—É—é—Ç—å—Å—è –Ω–∞ —á–∞—Å                           | –ó–∞–ø—É—Å–∫–∞—î–º–æ `clearTaskFormFields()` –ª–∏—à–µ **–ø—ñ—Å–ª—è** –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è |

---

üîÅ –•–æ—á–µ—à ‚Äî —è –∑–±–µ—Ä—É –≤—Å–µ —Ü–µ –≤ **—î–¥–∏–Ω–∏–π –≥–æ—Ç–æ–≤–∏–π –∫–æ–¥** –∑ —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–º —Ö–µ–Ω–¥–ª–µ—Ä–æ–º –¥–ª—è `P_TASK_MODE`?
