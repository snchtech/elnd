–¢–≤–æ—è —ñ–¥–µ—è –¥—É–∂–µ —Ü—ñ–∫–∞–≤–∞ –π **–ø–æ–≤–Ω—ñ—Å—Ç—é –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º UX**, —è–∫—â–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —ó—ó **–∞–∫—É—Ä–∞—Ç–Ω–æ**. –¶–µ ‚Äî –∫–ª–∞—Å–∏—á–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ **"overlay blocker"**: –º–∏ —Ñ—ñ–∑–∏—á–Ω–æ –±–ª–æ–∫—É—î–º–æ –≤–∑–∞—î–º–æ–¥—ñ—é –∑ –µ–ª–µ–º–µ–Ω—Ç–æ–º (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø–µ—Ä–µ–º–∏–∫–∞—á–µ–º), —ñ –∫–µ—Ä—É—î–º–æ –ø–æ–≤–µ–¥—ñ–Ω–∫–æ—é —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ —á–µ—Ä–µ–∑ JS.

---

## ‚úÖ –ß–æ–º—É —Ü–µ *–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥*?

üîπ **–ü–æ–¥—ñ–±–Ω—ñ —Ä—ñ—à–µ–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω–æ –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å**:

* —É web-–¥–æ–¥–∞—Ç–∫–∞—Ö, –¥–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ç–∏–º—á–∞—Å–æ–≤–æ –±–ª–æ–∫—É–≤–∞—Ç–∏ —á–∞—Å—Ç–∏–Ω—É —Ñ–æ—Ä–º–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø—Ä–∏ –Ω–µ–≤–∞–ª—ñ–¥–Ω–æ–º—É —Å—Ç–∞–Ω—ñ)
* —É APEX —Ç–µ–∂ —á–∞—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å `overlay span` –¥–ª—è –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –ø–æ–ª—ñ–≤, –æ—Å–æ–±–ª–∏–≤–æ –∫–æ–ª–∏ `disable()` –º–∞—î –Ω–µ–±–∞–∂–∞–Ω–∏–π UX

---

## üß† –Ø–∫ —Ü–µ –≤–∏–≥–ª—è–¥–∞—î –ª–æ–≥—ñ—á–Ω–æ:

| –°—Ç–∞–Ω                       | –î—ñ—è                                                           |
| -------------------------- | ------------------------------------------------------------- |
| –Ñ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è / –ø—ñ–¥—à–∞–±–ª–æ–Ω–∏ | –ü–æ–∫–∞–∑—É—î–º–æ `overlay`, –±–ª–æ–∫—É—î–º–æ –∫–ª—ñ–∫, –ø–æ–∫–∞–∑—É—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è    |
| –¢—ñ–ª—å–∫–∏ –ø–æ–ª—è –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ      | –ü–æ–∫–∞–∑—É—î–º–æ confirm ‚Üí –æ—á–∏—â–∞—î–º–æ –ø–æ–ª—è ‚Üí –ø–µ—Ä–µ–º–∏–∫–∞—î–º–æ `P_TASK_MODE` |
| –ù–µ–º–∞—î –Ω—ñ—á–æ–≥–æ –∑–∞–ø–æ–≤–Ω–µ–Ω–æ–≥–æ   | –ü–µ—Ä–µ–º–∏–∫–∞—á –ø—Ä–∞—Ü—é—î –Ω–æ—Ä–º–∞–ª—å–Ω–æ                                    |

---

## üß© –¢–µ—Ö–Ω—ñ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è

### 1. CSS –¥–ª—è –±–ª–æ–∫—É

```css
.switch-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
  z-index: 10;
}
```

### 2. –î–æ–¥–∞—î–º–æ `overlay` —á–µ—Ä–µ–∑ JS (–Ω–∞ `Page Load`)

```javascript
document.addEventListener("DOMContentLoaded", function () {
  const switchItem = document.querySelector('#P_TASK_MODE');
  if (!switchItem) return;

  const wrapper = switchItem.closest('.t-Form-fieldContainer');
  if (!wrapper) return;

  // –°—Ç–≤–æ—Ä—é—î–º–æ overlay
  const overlay = document.createElement('span');
  overlay.className = 'switch-overlay';
  overlay.title = '–û—á–∏—Å—Ç—ñ—Ç—å –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –∞–±–æ —à–∞–±–ª–æ–Ω –ø–µ—Ä–µ–¥ –∑–º—ñ–Ω–æ—é —Ä–µ–∂–∏–º—É';
  wrapper.style.position = 'relative';
  wrapper.appendChild(overlay);

  // –û–±—Ä–æ–±–Ω–∏–∫ –∫–ª—ñ–∫—É
  overlay.addEventListener('click', function () {
    const hasSubtasks = apex.region('TASK_SUBTASKS_IG_1')?.widget()?.interactiveGrid("getViews", "grid").model.length > 0;
    const hasSubtemplates = apex.region('TASK_TEMPLATE_SUBTASKS_IG')?.widget()?.interactiveGrid("getViews", "grid").model.length > 0;

    if (hasSubtasks || hasSubtemplates) {
      apex.message.alert("–°–ø–æ—á–∞—Ç–∫—É –≤–∏–¥–∞–ª—ñ—Ç—å —É—Å—ñ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –∞–±–æ –ø—ñ–¥—à–∞–±–ª–æ–Ω–∏ –ø–µ—Ä–µ–¥ –∑–º—ñ–Ω–æ—é —Ç–∏–ø—É.");
      return;
    }

    // –Ø–∫—â–æ —Ç—ñ–ª—å–∫–∏ –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ –ø–æ–ª—è ‚Äî –ø–∏—Ç–∞—î–º–æ –¥–æ–∑–≤–æ–ª—É –Ω–∞ –æ—á–∏—â–µ–Ω–Ω—è
    const filled = ['P_TASK_CONTENT', 'P_NOTE', 'P_UNIT'].some(id => $v(id)?.trim() !== '');
    if (filled) {
      apex.message.confirm("–£—Å—ñ –≤–≤–µ–¥–µ–Ω—ñ –¥–∞–Ω—ñ –±—É–¥–µ –æ—á–∏—â–µ–Ω–æ. –í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ?", function (okPressed) {
        if (okPressed) {
          // –æ—á–∏—â–∞—î–º–æ —Ñ–æ—Ä–º—É
          clearTaskFormFields();
          // –∑–Ω—ñ–º–∞—î–º–æ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è, –ø–µ—Ä–µ–º–∏–∫–∞—î–º–æ –≤—Ä—É—á–Ω—É
          overlay.remove();
          apex.item("P_TASK_MODE").setValue($v("P_TASK_MODE") === '0' ? '1' : '0');
        }
      });
    }
  });
});
```

---

## üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

üî∑ –¶–µ **UX-—Ñ—Ä–µ–Ω–¥–ª—ñ**, –±–æ:

* –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á **–±–∞—á–∏—Ç—å –ø–µ—Ä–µ–º–∏–∫–∞—á**, –∞–ª–µ –Ω–µ –º–æ–∂–µ –π–æ–≥–æ –∑–º—ñ–Ω–∏—Ç–∏ –±–µ–∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –∫—Ä–æ–∫—É.
* **–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–µ**, —Ä—ñ—à–µ–Ω–Ω—è ‚Äî —É —Ä—É–∫–∞—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
* –¢–∏ **–∑–∞—Ö–∏—â–∞—î—à –¥–∞–Ω—ñ**, –Ω–µ –¥–æ–∑–≤–æ–ª—è—î—à –≤—Ç—Ä–∞—Ç–∏—Ç–∏ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –∞–±–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏–π —Å—Ç–∞–Ω.

---

## ‚úÖ –í–∏—Å–Ω–æ–≤–æ–∫

| –ü–µ—Ä–µ–≤–∞–≥–∞          | –ü–æ—è—Å–Ω–µ–Ω–Ω—è                                                        |
| ----------------- | ---------------------------------------------------------------- |
| ‚úÖ –ö–µ—Ä–æ–≤–∞–Ω–∏–π UX    | –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å –ø–µ—Ä–µ–º–∏–∫–∞—á, –∞–ª–µ –Ω–µ –º–æ–∂–µ –ø–æ–º–∏–ª–∫–æ–≤–æ –≤—Ç—Ä–∞—Ç–∏—Ç–∏ –¥–∞–Ω—ñ |
| ‚úÖ –ì–Ω—É—á–∫—ñ—Å—Ç—å       | –£–º–æ–≤–∏ –∑–º—ñ–Ω–∏ –ª–µ–≥–∫–æ –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏                                   |
| ‚úÖ –ë–µ–∑–ø–µ—á–Ω—ñ—Å—Ç—å     | –ñ–æ–¥–Ω–æ—ó –≤—Ç—Ä–∞—Ç–∏ –¥–∞–Ω–∏—Ö –±–µ–∑ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è                            |
| ‚úÖ APEX-compatible | –ù–µ –ø–æ—Ä—É—à—É—î –∑–≤–∏—á–Ω—ñ –º–µ—Ö–∞–Ω—ñ–∑–º–∏ Page Items                           |

---

üîß –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ, —è –º–æ–∂—É **–∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –ø–æ–≤–Ω—É –≤–µ—Ä—Å—ñ—é –∫–æ–¥—É**, –∞–¥–∞–ø—Ç–æ–≤–∞–Ω—É –ø—ñ–¥ —Ç–≤–æ—ó `ID`, –∑ –æ–±—Ä–æ–±–∫–æ—é —ñ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å, —ñ —Ñ–æ—Ä–º–∏. –•–æ—á–µ—à?
