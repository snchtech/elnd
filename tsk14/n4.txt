–û—Å—å **–ø–æ–≤–Ω—ñ—Å—Ç—é –≥–æ—Ç–æ–≤–∏–π —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π –∫–æ–¥**, —è–∫–∏–π —Ä–µ–∞–ª—ñ–∑—É—î —Ç–≤–æ—é –ª–æ–≥—ñ–∫—É –¥–ª—è `P_TASK_MODE` (—Ä–µ–∂–∏–º "–ó–∞–≤–¥–∞–Ω–Ω—è" / "–®–∞–±–ª–æ–Ω"):

---

## ‚úÖ 1. CSS (–¥–æ–¥–∞–π —É Inline CSS –∞–±–æ `Static Application Files`)

```css
.switch-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  cursor: not-allowed;
  z-index: 10;
}
```

---

## ‚úÖ 2. JavaScript (–¥–∏–Ω–∞–º—ñ—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è)

### üî∏ –î–æ–¥–∞–π —è–∫ **Dynamic Action ‚Üí Page Load ‚Üí Execute JavaScript Code**:

```javascript
function clearTaskFormFields() {
  const itemsToClear = [
    'P_TASK_CONTENT', 'P_NOTE', 'P_PLANNING_DATE_START', 'P_PLANNING_DATE_END',
    'P_PERIOD_MODE', 'P_PERIOD_INTERVAL', 'P_PERIOD_TIME', 'P_WEEKLY_DAYS',
    'P_WEEKLY_TIME', 'P_DATE_END', 'P_TYPE_ID', 'P_UNIT', 'P_TASK_ID', 'P_TEMPLATE_ID'
  ];
  itemsToClear.forEach(id => $s(id, ""));

  apex.region('TASK_SUBTASKS_IG_1')?.widget()?.interactiveGrid("getActions").invoke("reset");
  apex.region('TASK_TEMPLATE_SUBTASKS_IG')?.widget()?.interactiveGrid("getActions").invoke("reset");

  // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–æ–≤–Ω—ñ—à–Ω—å–æ–≥–æ –≤–∏–≥–ª—è–¥—É
  apex.event.trigger(document, "task_mode_reset");
}

// –î–æ–¥–∞—î–º–æ overlay
(function addSwitchOverlay() {
  const switchItem = document.querySelector('#P_TASK_MODE');
  if (!switchItem) return;

  const wrapper = switchItem.closest('.t-Form-fieldContainer');
  if (!wrapper) return;

  // –£–Ω–∏–∫–∞—î–º–æ –¥—É–±–ª—é–≤–∞–Ω–Ω—è
  if (wrapper.querySelector('.switch-overlay')) return;

  wrapper.style.position = 'relative';

  const overlay = document.createElement('span');
  overlay.className = 'switch-overlay';
  overlay.title = '–ó–º—ñ–Ω–∏—Ç–∏ —Ä–µ–∂–∏–º –º–æ–∂–Ω–∞ –ª–∏—à–µ –ø—ñ—Å–ª—è –æ—á–∏—â–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö';
  wrapper.appendChild(overlay);

  overlay.addEventListener('click', function () {
    const hasSubtasks = apex.region('TASK_SUBTASKS_IG_1')?.widget()?.interactiveGrid("getViews", "grid").model.length > 0;
    const hasSubtemplates = apex.region('TASK_TEMPLATE_SUBTASKS_IG')?.widget()?.interactiveGrid("getViews", "grid").model.length > 0;

    if (hasSubtasks || hasSubtemplates) {
      apex.message.alert("–°–ø–æ—á–∞—Ç–∫—É –≤–∏–¥–∞–ª—ñ—Ç—å —É—Å—ñ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –∞–±–æ –ø—ñ–¥—à–∞–±–ª–æ–Ω–∏ –ø–µ—Ä–µ–¥ –∑–º—ñ–Ω–æ—é —Ç–∏–ø—É.");
      return;
    }

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ —î –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ –ø–æ–ª—è
    const filled = ['P_TASK_CONTENT', 'P_NOTE', 'P_UNIT', 'P_TYPE_ID'].some(id => $v(id) && $v(id).trim() !== '');

    if (filled) {
      apex.message.confirm("–£—Å—ñ –≤–≤–µ–¥–µ–Ω—ñ –¥–∞–Ω—ñ –±—É–¥–µ –æ—á–∏—â–µ–Ω–æ. –í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ?", function (okPressed) {
        if (okPressed) {
          clearTaskFormFields();
          overlay.remove(); // –ó–Ω—ñ–º–∞—î–º–æ –±–ª–æ–∫
          const newValue = $v("P_TASK_MODE") === '0' ? '1' : '0';
          $s("P_TASK_MODE", newValue);
        }
      });
    }
  });
})();
```

---

## üß™ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —â–æ –æ—Ç—Ä–∏–º–∞—î—à:

| –°–∏—Ç—É–∞—Ü—ñ—è       | –©–æ –ø–æ–±–∞—á–∏—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á             |
| -------------- | ---------------------------------- |
| –Ñ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è  | –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è: –≤–∏–¥–∞–ª—ñ—Ç—å –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è |
| –ó–∞–ø–æ–≤–Ω–µ–Ω—ñ –ø–æ–ª—è | Confirm ‚Üí –û—á–∏—Å—Ç–∏—Ç–∏ ‚Üí –ü–µ—Ä–µ–º–∏–∫–Ω—É—Ç–∏   |
| –í—Å–µ —á–∏—Å—Ç–æ      | –ù—ñ—á–æ–≥–æ –Ω–µ –±–ª–æ–∫—É—î—Ç—å—Å—è               |

---

## üõ† –ü–æ—Ä–∞–¥–∞:

–ú–æ–∂–µ—à —Ç–∞–∫–æ–∂ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `addSwitchOverlay()` –≤—Ä—É—á–Ω—É –ø—ñ—Å–ª—è `reset` —Ñ–æ—Ä–º–∏ ‚Äî —è–∫—â–æ —Ö–æ—á–µ—à –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –ø—ñ—Å–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è.

---

üîÅ –•–æ—á–µ—à ‚Äî –º–æ–∂—É —â–µ –¥–æ–¥–∞—Ç–∏:

* –û–±—Ä–æ–±–∫—É `readonly` —Å—Ç–∞–Ω—É
* –†–µ–Ω–¥–µ—Ä –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä—è–º–æ –ø—ñ–¥ –ø–µ—Ä–µ–º–∏–∫–∞—á–µ–º —É —Å—Ç–∏–ª—ñ APEX

–ì–æ—Ç–æ–≤–∏–π –¥–æ–ø–æ–º–æ–≥—Ç–∏ –¥–∞–ª—ñ!
