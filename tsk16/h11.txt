–¢–∏ –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞—É–≤–∞–∂–∏–≤, —â–æ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è —î **—ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–∏–º–∏**, —ñ —Å–∞–º–µ —Ü–µ–π —Ä—è–¥–æ–∫:

```sql
AND NVL(TO_NUMBER(c004), 0) = NVL(:P6_PARENT_ID, 0)
```

‚Äî **–≤–∏–∑–Ω–∞—á–∞—î, –≤ –º–µ–∂–∞—Ö —è–∫–æ—ó –≥—Ä—É–ø–∏ (–±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–≥–æ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è) –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ä–∞—Ö—É–≤–∞—Ç–∏ `SUBTASK_ORDER`**.

---

## üîç –ü–æ—è—Å–Ω–µ–Ω–Ω—è –ø–æ —Å—É—Ç—ñ:

* `c004` ‚Äî —Ü–µ –∫–æ–ª–æ–Ω–∫–∞ `PLANNING_DATE_END` —É —Ç–≤–æ—ó–π **—Å—Ç–∞—Ä—ñ–π** —Å—Ç—Ä—É–∫—Ç—É—Ä—ñ, –∞–ª–µ **—É –Ω–æ–≤—ñ–π** —Å—Ç—Ä—É–∫—Ç—É—Ä—ñ (—è–∫—É —Ç–∏ –æ–ø–∏—Å—É–≤–∞–≤ –≤–∏—â–µ), —Ü–µ `PARENT_ID`.

* `:P6_PARENT_ID` ‚Äî —Ü–µ –ø–æ—Ç–æ—á–Ω–∏–π `PARENT_ID`, —è–∫–∏–π —Ç–∏ –ø–µ—Ä–µ–¥–∞—î—à –∑ —Ñ–æ—Ä–º–∏.

---

## ‚ûï –©–æ —Ä–æ–±–∏—Ç—å `NVL(TO_NUMBER(c004), 0) = NVL(:P6_PARENT_ID, 0)`?

–í–æ–Ω–æ –¥–æ–∑–≤–æ–ª—è—î:

1. –ü–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è, —è–∫—ñ **–Ω–µ –º–∞—é—Ç—å –±–∞—Ç—å–∫–∞** (`NULL`) ‚Äî —Ç–æ–±—Ç–æ **–≤–µ—Ä—Ö–Ω—ñ–π —Ä—ñ–≤–µ–Ω—å**.
2. –ü–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –∑ –æ–¥–Ω–∏–º —ñ —Ç–∏–º —Å–∞–º–∏–º `PARENT_ID`.

–¶–µ –æ–∑–Ω–∞—á–∞—î:
**—Ä–∞—Ö—É–π `SUBTASK_ORDER` —Ç—ñ–ª—å–∫–∏ —Å–µ—Ä–µ–¥ –±—Ä–∞—Ç—ñ–≤/—Å–µ—Å—Ç–µ—Ä ‚Äî —Ç–æ–±—Ç–æ —Ç–∏—Ö, —Ö—Ç–æ –º–∞—î —Ç–∞–∫–æ–≥–æ –∂ –±–∞—Ç—å–∫–∞**.

---

### üìò –ü—Ä–∏–∫–ª–∞–¥:

–£ —Ç–µ–±–µ —î —Ç–∞–∫–∞ —ñ—î—Ä–∞—Ä—Ö—ñ—è:

```
1. –ó–∞–≤–¥–∞–Ω–Ω—è A   (PARENT_ID = NULL)
  1.1 –ü—ñ–¥ A     (PARENT_ID = ID A)
  1.2 –ü—ñ–¥ A     (PARENT_ID = ID A)
2. –ó–∞–≤–¥–∞–Ω–Ω—è B   (PARENT_ID = NULL)
```

–ö–æ–ª–∏ —Ç–∏ –¥–æ–¥–∞—î—à –Ω–æ–≤–µ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –∑ `PARENT_ID = ID A`,
—Ç–æ –∑–∞–ø–∏—Ç:

```sql
... WHERE NVL(PARENT_ID, 0) = NVL(ID A, 0)
```

–ø–æ–≤–µ—Ä–Ω–µ **—Ç—ñ–ª—å–∫–∏ –∑–∞–ø–∏—Å–∏ –∑ PARENT\_ID = ID A**,
—ñ `MAX(SUBTASK_ORDER)` —Ä–∞—Ö—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –≤ —ó—Ö –º–µ–∂–∞—Ö.

---

## üß† –í–∏—Å–Ω–æ–≤–æ–∫

üîπ –¶–µ –∑–∞–±–µ–∑–ø–µ—á—É—î **–ø—Ä–∞–≤–∏–ª—å–Ω—É –ª–æ–∫–∞–ª—å–Ω—É –Ω—É–º–µ—Ä–∞—Ü—ñ—é** –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å –≤ –º–µ–∂–∞—Ö –æ–¥–Ω–æ–≥–æ –±–∞—Ç—å–∫–∞.
üîπ –Ø–∫—â–æ —Ü—å–æ–≥–æ –Ω–µ –∑—Ä–æ–±–∏—Ç–∏ ‚Äî –≤—Å—ñ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –±—É–¥—É—Ç—å —Ä–∞—Ö—É–≤–∞—Ç–∏—Å—å –≥–ª–æ–±–∞–ª—å–Ω–æ, —ñ `SUBTASK_ORDER` –≤—Ç—Ä–∞—Ç–∏—Ç—å —Å–µ–Ω—Å –ø—Ä–∏ —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—ñ –≤–∫–ª–∞–¥–µ–Ω–æ—Å—Ç—ñ.

---

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ ‚Äî –º–æ–∂—É —Ç–∞–∫–æ–∂ –¥–æ–ø–æ–º–æ–≥—Ç–∏ **–¥–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É —É –≤–∏–ø–∞–¥–∫—É, —è–∫—â–æ `PARENT_ID` –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω–æ**, —ñ –ø–æ–∫–∞–∑–∞—Ç–∏ **–∞–Ω–∞–ª–æ–≥—ñ—á–Ω–∏–π –∫–æ–¥ –¥–ª—è –ø—ñ–¥—à–∞–±–ª–æ–Ω—ñ–≤**.
