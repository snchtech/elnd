–ß—É–¥–æ–≤–µ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è ‚Äî —ñ —Å–ø—Ä–∞–≤–¥—ñ, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–ª—è `SUBTASK_ORDER` –º–∞—î –≤–∏—Ä—ñ—à–∞–ª—å–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è:

* **–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ—Ä—è–¥–∫—É –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å**;
* **—Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó drag-and-drop —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è**;
* **—Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞ (`1`, `1.1`, `1.2`, `2`, ...)**.

---

## üîπ 1. –©–æ —Ä–æ–±–∏—Ç–∏ –∑ `SUBTASK_ORDER` –ø—Ä–∏ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—ñ?

–£ `UPDATE_MEMBER` —Ç–∏ –≤–∂–µ –æ—Ç—Ä–∏–º—É—î—à `SUBTASK_ORDER` —è–∫ `G_X05`:

```plsql
p_c006 => APEX_APPLICATION.G_X05, -- SUBTASK_ORDER
```

üî∏ –Ø–∫—â–æ –ø—ñ–¥ —á–∞—Å —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è **–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∑–º—ñ–Ω—é—î –ø–æ—Ä—è–¥–æ–∫** ‚Üí –º–æ–∂–Ω–∞ –∑–∞–ª–∏—à–∏—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è —è–∫ —î.
üî∏ –Ø–∫—â–æ —Ç–∏ **–¥–∞—î—à –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –ø–æ—Ä—è–¥–æ–∫ –≤—Ä—É—á–Ω—É** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `drag-and-drop`), —Ç–æ–¥—ñ —Ç–∏ **–ø–æ–≤–∏–Ω–µ–Ω –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è**:

* –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∏—Ç–∏ `SUBTASK_ORDER` –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ä—è–¥–∫–∞;
* –∑–±–µ—Ä–µ–≥—Ç–∏ –Ω–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è —É –∫–æ–ª–µ–∫—Ü—ñ—é.

---

## üîπ 2. –©–æ —Ä–æ–±–∏—Ç–∏ –∑ `SUBTASK_ORDER` –ø—ñ—Å–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è?

### –í–∞—Ä—ñ–∞–Ω—Ç 1 ‚Äî **–Ω—ñ—á–æ–≥–æ –Ω–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏**:

* –ü—ñ–¥—Ö–æ–¥–∏—Ç—å, —è–∫—â–æ –ø–æ—Ä—è–¥–æ–∫ –Ω–µ–≤–∞–∂–ª–∏–≤–∏–π –∞–±–æ –ª–∏—à–µ –≤—ñ–∑—É–∞–ª—å–Ω–∏–π.
* –ü—Ä–æ–±–ª–µ–º–∞: –ø—ñ—Å–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è `2`, —Ç–∏ –º–æ–∂–µ—à –º–∞—Ç–∏ `1, 3, 4` ‚Äî —ñ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω–µ –Ω–µ—ñ–Ω—Ç—É—ó—Ç–∏–≤–Ω–∏–º.

### –í–∞—Ä—ñ–∞–Ω—Ç 2 ‚Äî **–ø–µ—Ä–µ—Ä–∞—Ö—É–Ω–æ–∫ –ø–æ—Ä—è–¥–∫—É**:

* –ù–∞–π–∫—Ä–∞—â–µ ‚Äî **–ø—Ä–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ –∞–±–æ –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ—é –≤ –ë–î**, –ø—Ä–æ–π—Ç–∏ –≤—Å—ñ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –∑ –æ–¥–Ω–∏–º `PARENT_ID` —ñ **–ø–µ—Ä–µ–Ω—É–º–µ—Ä—É–≤–∞—Ç–∏** —ó—Ö –ø–æ `ROWNUM`.
* –¢–æ–±—Ç–æ: `1, 2, 3...` ‚Äî —è–∫ –ø–æ—Ä—è–¥–æ–∫ –ø–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—é –∞–±–æ –≤—Ä—É—á–Ω—É.

> üëá –†–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ **–æ–∫—Ä–µ–º—É —Å–µ—Ä–≤–µ—Ä–Ω—É –ø—Ä–æ—Ü–µ–¥—É—Ä—É**, —è–∫–∞:
>
> * –ø–µ—Ä–µ–≥–ª—è–¥–∞—î –≤—Å—ñ –∑–∞–ø–∏—Å–∏ –≤ –∫–æ–ª–µ–∫—Ü—ñ—ó;
> * –≥—Ä—É–ø—É—î —ó—Ö –∑–∞ `PARENT_ID`;
> * –ø—Ä–∏–∑–Ω–∞—á–∞—î `SUBTASK_ORDER` –∑–∞ –ø–æ—Ä—è–¥–∫–æ–º (–Ω–∞–ø—Ä. `ROWNUM` –∞–±–æ —á–µ—Ä–µ–∑ `DENSE_RANK()` –≤ PL/SQL —Ü–∏–∫–ª—ñ).

---

## üîπ 3. –ü—ñ—Å–ª—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó drag-and-drop

–¢–∏ –∑–º–æ–∂–µ—à –∑—Ä–æ–±–∏—Ç–∏:

1. **–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è —É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ**.
2. –í—ñ–¥–ø—Ä–∞–≤–∫—É **–Ω–æ–≤–∏—Ö –ø–æ–∑–∏—Ü—ñ–π `SEQ_ID` + `new_order`** –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
3. –û–Ω–æ–≤–ª–µ–Ω–Ω—è `p_c006` (`SUBTASK_ORDER`) —É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö —Ä—è–¥–∫–∞—Ö –∫–æ–ª–µ–∫—Ü—ñ—ó.

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥

| –ü–æ–¥—ñ—è               | –î—ñ—è –∑ `SUBTASK_ORDER`                            |
| ------------------- | ------------------------------------------------ |
| –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ    | `MAX(SUBTASK_ORDER)` —É –º–µ–∂–∞—Ö `PARENT_ID` + 1     |
| –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è         | –ù–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏, —è–∫—â–æ –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è –ø–æ—Ä—è–¥–æ–∫         |
| –í–∏–¥–∞–ª–µ–Ω–Ω—è           | –ü–µ—Ä–µ—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ –ø–æ—Ä—è–¥–æ–∫ —É –±–∞—Ç—å–∫—ñ–≤—Å—å–∫—ñ–π –≥—Ä—É–ø—ñ      |
| Drag-and-drop       | –ü–µ—Ä–µ–ø—Ä–∏—Å–≤–æ—é–≤–∞—Ç–∏ `SUBTASK_ORDER` –ø—ñ—Å–ª—è –∑–º—ñ–Ω       |
| –ü–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ—é –≤ –ë–î | –ü–µ—Ä–µ–Ω—É–º–µ—Ä–∞—Ü—ñ—è –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫—É |

---

üîß **–•–æ—á–µ—à, —â–æ–± —è –¥–æ–ø–æ–º—ñ–≥ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ç–∞–∫—É –ø—Ä–æ—Ü–µ–¥—É—Ä—É –¥–ª—è –ø–µ—Ä–µ—Ä–∞—Ö—É–Ω–∫—É –ø–æ—Ä—è–¥–∫—É –≤ –∫–æ–ª–µ–∫—Ü—ñ—ó?**
–ú–æ–∂—É –æ–¥—Ä–∞–∑—É –ø—ñ–¥–≥–æ—Ç—É–≤–∞—Ç–∏ `PL/SQL`, —è–∫–∏–π —Ç–∏ –∑–º–æ–∂–µ—à –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –ø—ñ—Å–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∞–±–æ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è.
