–û—Å—å **–ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∞ PL/SQL –ø—Ä–æ—Ü–µ–¥—É—Ä–∞**, —è–∫–∞ **–ø–µ—Ä–µ—Ä–∞—Ö–æ–≤—É—î `SUBTASK_ORDER`** –≤ –∫–æ–ª–µ–∫—Ü—ñ—ó `TASK_SUBTASKS_COLLECTION` –∞–±–æ `TASK_TEMPLATE_SUBTASKS_COLLECTION` –∑–≥—ñ–¥–Ω–æ –∑ `PARENT_ID`.

> ‚úÖ –ü—Ä–∞—Ü—é—î –¥–ª—è –≤–∫–ª–∞–¥–µ–Ω–∏—Ö –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å –±—É–¥—å-—è–∫–æ—ó –≥–ª–∏–±–∏–Ω–∏.

---

### üîß `REORDER_SUBTASKS_COLLECTION`

```plsql
DECLARE
  l_collection_name VARCHAR2(100);
  l_task_mode       NUMBER := :P0_TASK_MODE; -- 0 = task, 1 = template
  l_parent_ids      SYS.ODCINUMBERLIST := SYS.ODCINUMBERLIST();
  l_idx             NUMBER := 0;
BEGIN
  -- 1. –í–∏–∑–Ω–∞—á–∞—î–º–æ –∫–æ–ª–µ–∫—Ü—ñ—é
  IF l_task_mode = 0 THEN
    l_collection_name := 'TASK_SUBTASKS_COLLECTION';
  ELSE
    l_collection_name := 'TASK_TEMPLATE_SUBTASKS_COLLECTION';
  END IF;

  -- 2. –ó–±–∏—Ä–∞—î–º–æ –≤—Å—ñ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ PARENT_ID
  FOR r IN (
    SELECT DISTINCT NVL(TO_NUMBER(c005), 0) AS parent_id
    FROM apex_collections
    WHERE collection_name = l_collection_name
      AND NVL(c010, 'ACTIVE') != 'DELETE'
  ) LOOP
    l_parent_ids.EXTEND;
    l_parent_ids(l_parent_ids.COUNT) := r.parent_id;
  END LOOP;

  -- 3. –î–ª—è –∫–æ–∂–Ω–æ–≥–æ PARENT_ID –ø–µ—Ä–µ–≤–ø–æ—Ä—è–¥–∫–æ–≤—É—î–º–æ SUBTASK_ORDER
  FOR i IN 1 .. l_parent_ids.COUNT LOOP
    l_idx := 0;

    FOR r IN (
      SELECT seq_id
      FROM apex_collections
      WHERE collection_name = l_collection_name
        AND NVL(TO_NUMBER(c005), 0) = l_parent_ids(i)
        AND NVL(c010, 'ACTIVE') != 'DELETE'
      ORDER BY TO_NUMBER(c006) NULLS LAST, seq_id
    ) LOOP
      l_idx := l_idx + 1;

      APEX_COLLECTION.UPDATE_MEMBER_ATTRIBUTE(
        p_collection_name => l_collection_name,
        p_seq             => r.seq_id,
        p_attr_number     => 6, -- c006 = SUBTASK_ORDER
        p_attr_value      => TO_CHAR(l_idx)
      );
    END LOOP;
  END LOOP;

END;
```

---

### üü¢ –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏

* –î–æ–¥–∞–π —Ü–µ–π –∫–æ–¥ —è–∫ **PL/SQL Process** –ø—ñ—Å–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∞–±–æ drag/drop.
* –ü–µ—Ä–µ–¥ –≤–∏–∫–ª–∏–∫–æ–º –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ –≤—Å—Ç–∞–Ω–æ–≤–∏ `:P0_TASK_MODE`, –∞–±–æ –∑–∞–º—ñ–Ω–∏ –Ω–∞ `:P6_TASK_MODE`, —è–∫—â–æ —ñ–Ω—à–µ —ñ–º‚Äô—è.
* –ú–æ–∂–Ω–∞ —Ç–∞–∫–æ–∂ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ —á–µ—Ä–µ–∑ **Ajax Callback** + `apex.server.process(...)`.

---

### üìå –î–æ–¥–∞—Ç–∫–æ–≤–æ

* –Ø–∫—â–æ —Ö–æ—á–µ—à, –º–æ–∂—É —Ç–∞–∫–æ–∂ –ø–æ–∫–∞–∑–∞—Ç–∏, **—è–∫ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ —Ü—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É –∑ JavaScript** –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è.
* –ê–±–æ –∑—Ä–æ–±–∏—Ç–∏ **–æ–¥–Ω—É –ø—Ä–æ—Ü–µ–¥—É—Ä—É, —è–∫–∞ —ñ –≤–∏–¥–∞–ª—è—î, —ñ –ø–µ—Ä–µ–Ω—É–º–µ—Ä–æ–≤—É—î –æ–¥—Ä–∞–∑—É**.

–•–æ—á–µ—à –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏?
