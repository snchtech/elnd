–û—Å—å –æ–Ω–æ–≤–ª–µ–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç `UPDATE_SUBTASK_IN_COLLECTION`, —â–æ –≤—Ä–∞—Ö–æ–≤—É—î:

* **–Ω–æ–≤—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É** –∫–æ–ª–µ–∫—Ü—ñ–π;
* **–ø–æ–¥—ñ–ª –Ω–∞ –∫–æ–ª–µ–∫—Ü—ñ—ó**: `TASK_SUBTASKS_COLLECTION` –∞–±–æ `TASK_TEMPLATE_SUBTASKS_COLLECTION`;
* **–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `TASK_MODE`** (`0` ‚Äì –∑–∞–≤–¥–∞–Ω–Ω—è, `1` ‚Äì —à–∞–±–ª–æ–Ω).

---

### ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–∏–π `PL/SQL` –∫–æ–¥:

```plsql
DECLARE
  l_collection_name VARCHAR2(50);
BEGIN
  -- –í–∏–∑–Ω–∞—á–∞—î–º–æ –Ω–∞–∑–≤—É –∫–æ–ª–µ–∫—Ü—ñ—ó –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ TASK_MODE
  IF APEX_APPLICATION.G_X08 = '0' THEN
    l_collection_name := 'TASK_SUBTASKS_COLLECTION';
  ELSE
    l_collection_name := 'TASK_TEMPLATE_SUBTASKS_COLLECTION';
  END IF;

  APEX_COLLECTION.UPDATE_MEMBER (
    p_collection_name => l_collection_name,
    p_seq             => :P9_SEQ_ID,
    p_c001 => APEX_APPLICATION.G_X01, -- TASK_ID –∞–±–æ TEMPLATE_ID
    p_c002 => APEX_APPLICATION.G_X02, -- SUBTASK_CONTENT
    p_c003 => '1',                    -- STATUS_ID (—Å—Ç–∞—Ç–∏—á–Ω–æ –∞–±–æ –æ–∫—Ä–µ–º–æ)
    p_c004 => APEX_APPLICATION.G_X03, -- PLANNING_DATE_END
    p_c005 => APEX_APPLICATION.G_X04, -- PARENT_ID
    p_c006 => APEX_APPLICATION.G_X05, -- SUBTASK_ORDER
    p_c007 => NULL,                   -- DATE_CREATE (–∑–∞–ª–∏—à–∞—î—Ç—å—Å—è)
    p_c008 => SYSDATE,                -- DATE_UPDATE
    p_c009 => NULL,                   -- CREATOR
    p_c010 => :P0_USER_ID,            -- UPDATOR
    p_n001 => TO_NUMBER(APEX_APPLICATION.G_X08) -- TASK_MODE
  );

  APEX_JSON.OPEN_OBJECT;
  APEX_JSON.WRITE('status', 'ok');
  APEX_JSON.CLOSE_OBJECT;

EXCEPTION
  WHEN OTHERS THEN
    APEX_JSON.OPEN_OBJECT;
    APEX_JSON.WRITE('status', 'error');
    APEX_JSON.WRITE('message', SQLERRM);
    APEX_JSON.CLOSE_OBJECT;
END;
```

---

### üì• G\_X –∑–º—ñ–Ω–Ω—ñ

| G\_X   | –ó–Ω–∞—á–µ–Ω–Ω—è                  |
| ------ | ------------------------- |
| G\_X01 | TASK\_ID –∞–±–æ TEMPLATE\_ID |
| G\_X02 | SUBTASK\_CONTENT          |
| G\_X03 | PLANNING\_DATE\_END       |
| G\_X04 | PARENT\_ID                |
| G\_X05 | SUBTASK\_ORDER            |
| G\_X08 | TASK\_MODE (`0` –∞–±–æ `1`)  |

---

üîî –Ø–∫—â–æ —Ç—Ä–µ–±–∞ ‚Äî –º–æ–∂—É –æ–¥—Ä–∞–∑—É –¥–∞—Ç–∏ JS-–∫–æ–¥ –≤–∏–∫–ª–∏–∫—É –¥–ª—è —Ü—å–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É —á–µ—Ä–µ–∑ `apex.server.process(...)`.
