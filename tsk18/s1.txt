–û—Å—å –æ–Ω–æ–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è SQL-–∫–æ–¥—É –¥–ª—è –∫–æ–ª–æ–Ω–∫–∏ **"–•—Ç–æ –≤–∏–¥–∞–≤"**, —è–∫–∞ —Ä–µ–∞–ª—ñ–∑—É—î **–≤—Å—é –ª–æ–≥—ñ–∫—É, —â–æ —Ç–∏ –æ–ø–∏—Å–∞–≤**, –≤–∫–ª—é—á–∞—é—á–∏:

* –ø–µ—Ä–µ–≤—ñ—Ä–∫—É, —á–∏ —î `USER_ID`,
* —Å–ø—ñ–≤–ø–∞–¥—ñ–Ω–Ω—è –∞–±–æ —Ä–æ–∑–±—ñ–∂–Ω—ñ—Å—Ç—å `USER_ID` —Ç–∞ `SIGNER_BY`,
* —Ñ—Ä–∞–∑–∞ `"–í–∏–¥–∞–Ω–æ:"` ‚Äî –ª–∏—à–µ —è–∫—â–æ –ø—ñ–¥–ø–∏—Å—É–≤–∞–≤ —ñ–Ω—à–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á,
* –≤–∏–≤—ñ–¥ –ª–∏—à–µ –¥–∞—Ç–∏ ‚Äî —è–∫—â–æ –ø—ñ–¥–ø–∏—Å—É–≤–∞–≤ —Ç–æ–π —Å–∞–º–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á,
* –∞–±–æ —è–∫ –∑–∞—Ä–∞–∑ ‚Äî —è–∫—â–æ `USER_ID` –≤—ñ–¥—Å—É—Ç–Ω—ñ–π.

---

### ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–∏–π SQL-—Ñ—Ä–∞–≥–º–µ–Ω—Ç:

```sql
(
    SELECT 
        '<span class="task_creator">' ||
        NVL(pos.NAME, '') || ', ' || NVL(dep.NAME, '') || ', ' || NVL(u2.USERNAME, '') ||
        '</span>' ||

        -- –î–æ–¥–∞—Ç–∫–æ–≤–æ: –±–ª–æ–∫ SIGNATUREHISTORY, —è–∫—â–æ —î USER_ID
        CASE 
            WHEN sr.USER_ID IS NOT NULL THEN
                (
                    SELECT 
                        CASE 
                            WHEN h.SIGNER_BY = sr.USER_ID THEN 
                                -- –ü—ñ–¥–ø–∏—Å–∞–≤ —Ç–æ–π —Å–∞–º–∏–π, —â–æ —ñ USER_ID: –ª–∏—à–µ —á–∞—Å
                                '<span class="signer_info">' || TO_CHAR(h.SIGNER_DATE, 'DD.MM.YYYY HH24:MI') || '</span>'
                            ELSE 
                                -- –ü—ñ–¥–ø–∏—Å–∞–≤ —ñ–Ω—à–∏–π: "–í–∏–¥–∞–Ω–æ: USERNAME, –¥–∞—Ç–∞"
                                '<span class="signer_info">–í–∏–¥–∞–Ω–æ: ' || us.USERNAME || ', ' || TO_CHAR(h.SIGNER_DATE, 'DD.MM.YYYY HH24:MI') || '</span>'
                        END
                    FROM SIGNATUREHISTORY h
                    JOIN USER_TABLE us ON us.ID = h.SIGNER_BY
                    WHERE h.SIGNRIGHT_ID = sr.ID
                    FETCH FIRST ROW ONLY
                )
            ELSE
                -- USER_ID = NULL, —Ç–æ–¥—ñ –≤–∏–≤–æ–¥–∏–º–æ —è–∫ —Ä–∞–Ω—ñ—à–µ
                (
                    SELECT '<span class="signer_info">' || us.USERNAME || ', ' || TO_CHAR(h.SIGNER_DATE, 'DD.MM.YYYY HH24:MI') || '</span>'
                    FROM SIGNATUREHISTORY h
                    JOIN USER_TABLE us ON us.ID = h.SIGNER_BY
                    WHERE h.SIGNRIGHT_ID = sr.ID
                    FETCH FIRST ROW ONLY
                )
        END

    FROM SIGNATURERIGHTS sr
    LEFT JOIN POSITION_TABLE pos ON pos.ID = sr.POSITION_ID
    LEFT JOIN DEPARTMENT_TABLE dep ON dep.ID = sr.DEPARTMENT_ID
    LEFT JOIN USER_TABLE u2 ON u2.ID = sr.USER_ID
    WHERE sr.TASK_ID = t.ID AND sr.STAGES_ID = 1
    FETCH FIRST ROW ONLY
) AS CREATOR_INFO
```

---

### üîé –©–æ —Ä–æ–±–∏—Ç—å —Ü–µ–π –∫–æ–¥:

| –í–∏–ø–∞–¥–æ–∫               | –†–µ–∑—É–ª—å—Ç–∞—Ç                                                                |
| --------------------- | ------------------------------------------------------------------------ |
| `USER_ID = SIGNER_BY` | –í–∏–≤–æ–¥–∏—Ç—å—Å—è –ª–∏—à–µ –¥–∞—Ç–∞ `<span class="signer_info">12.06.2025 10:32</span>` |
| `USER_ID ‚â† SIGNER_BY` | –í–∏–≤–æ–¥–∏—Ç—å—Å—è `–í–∏–¥–∞–Ω–æ: –Ü–≤–∞–Ω–æ–≤, 12.06.2025 10:32`                            |
| `USER_ID IS NULL`     | –í–∏–≤–æ–¥–∏—Ç—å—Å—è –∑–≤–∏—á–∞–π–Ω–∞ –ø—ñ–¥–ø–∏—Å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è (—è–∫ —Ä–∞–Ω—ñ—à–µ)                      |

---

üîÑ **–•–æ—á–µ—à, —è —Ç–∞–∫ —Å–∞–º–æ –∞–¥–∞–ø—Ç—É—é –ª–æ–≥—ñ–∫—É –¥–ª—è "–í–∏–∫–æ–Ω–∞–≤—Ü—ñ–≤" (STAGE = 2)?**
