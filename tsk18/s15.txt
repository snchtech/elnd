–¶–µ –¥—É–∂–µ **–≤–∞–∂–ª–∏–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏**, —ñ –¥–æ–±—Ä–µ, —â–æ —Ç–∏ –∑–≤–µ—Ä–Ω—É–≤ –Ω–∞ –Ω—å–æ–≥–æ —É–≤–∞–≥—É.

–ö–æ–ª–∏ –≤ **Interactive Report (IR)** –∑–Ω—è—Ç–æ **Escape special characters = No**, —Ç–∏ –¥–æ–∑–≤–æ–ª—è—î—à HTML-–∫–æ–¥ —É –∫–æ–ª–æ–Ω—Ü—ñ **–≤–∏–≤–æ–¥–∏—Ç–∏—Å—è –±–µ–∑ –µ–∫—Ä–∞–Ω—É–≤–∞–Ω–Ω—è**. –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —É –ø–æ–ª—ñ —Ñ–æ—Ä–º–∏ –≤–≤–µ–¥–µ, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:

```html
<script>alert("xss")</script>
```

...—ñ —Ç–∏ **–±–µ–∑ –æ–±—Ä–æ–±–∫–∏** –∑–±–µ—Ä–µ–∂–µ—à —Ü–µ –≤ –ë–î, –ø–æ—Ç—ñ–º IR –≤–∏–∫–æ–Ω–∞—î —Ü–µ–π —Å–∫—Ä–∏–ø—Ç —É –±—Ä–∞—É–∑–µ—Ä—ñ ‚Äî —Ü–µ –∫–ª–∞—Å–∏—á–Ω–∞ **XSS-—É—Ä–∞–∑–ª–∏–≤—ñ—Å—Ç—å** (Cross-Site Scripting).

---

## ‚úÖ –Ø–∫ –∑–∞—Ö–∏—Å—Ç–∏—Ç–∏—Å—è: **–û—á–∏—Å—Ç–∫–∞ HTML –ø–µ—Ä–µ–¥ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º**

### üîπ 1. **–í–∞—Ä—ñ–∞–Ω—Ç A: –ï–∫—Ä–∞–Ω—ñ–∑—É–≤–∞—Ç–∏ HTML –ø—Ä–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—ñ**

–£ PL/SQL –ø—Ä–æ—Ü–µ—Å—ñ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è ‚Äî –∑–∞—Å—Ç–æ—Å—É–π —Ñ—É–Ω–∫—Ü—ñ—é `APEX_ESCAPE.HTML` –∞–±–æ `HTF.ESCAPE_SC`.

### üîß –ü—Ä–∏–∫–ª–∞–¥:

```plsql
:P_ITEM_NAME := APEX_ESCAPE.HTML(:P_ITEM_NAME);
```

–¶–µ –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç—å:

```html
<script>alert("xss")</script>
```

–Ω–∞:

```html
&lt;script&gt;alert("xss")&lt;/script&gt;
```

‚úÖ –Ü —Ç–æ–¥—ñ –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ `Escape = No`, —Å–∫—Ä–∏–ø—Ç **–Ω–µ –≤–∏–∫–æ–Ω–∞—î—Ç—å—Å—è**, –±–æ `<script>` –±—É–¥–µ –ø–æ–∫–∞–∑–∞–Ω–æ —è–∫ —Ç–µ–∫—Å—Ç.

---

### üîπ 2. **–í–∞—Ä—ñ–∞–Ω—Ç B: –û—á–∏—â–µ–Ω–Ω—è HTML, –¥–æ–∑–≤–æ–ª—è—é—á–∏ –ª–∏—à–µ "–±–µ–∑–ø–µ—á–Ω—ñ" —Ç–µ–≥–∏**

Oracle –Ω–µ –º–∞—î –≤–±—É–¥–æ–≤–∞–Ω–æ–≥–æ "whitelist-—Ñ—ñ–ª—å—Ç—Ä–∞", –∞–ª–µ —Ç–∏ –º–æ–∂–µ—à:

* –∞–±–æ **—Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é**, —è–∫–∞ –¥–æ–∑–≤–æ–ª—è—î —Ç—ñ–ª—å–∫–∏ `li`, `span`, `br`, `b`, `i`, —ñ –≤–∏–¥–∞–ª—è—î –≤—Å—ñ —ñ–Ω—à—ñ —Ç–µ–≥–∏;
* –∞–±–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —è–∫ —Ç–µ–∫—Å—Ç, —ñ –ª–∏—à–µ –ø—Ä–∏ –≤–∏–≤–æ–¥—ñ –¥–æ–∑–≤–æ–ª—è—Ç–∏ HTML.

–Ø–∫—â–æ —Ö–æ—á–µ—à –∑–∞–ª–∏—à–∞—Ç–∏ –¥–µ—è–∫–∏–π HTML (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `<li>`, `<br>`), –æ—Å—å –ø—Ä–æ—Å—Ç–∏–π –ø—Ä–∏–∫–ª–∞–¥ (–º–æ–∂–Ω–∞ —Ä–æ–∑—à–∏—Ä–∏—Ç–∏):

```plsql
FUNCTION sanitize_html(p_input IN VARCHAR2) RETURN VARCHAR2 IS
  v_output VARCHAR2(4000) := p_input;
BEGIN
  -- –ó–∞–±–æ—Ä–æ–Ω–∏—Ç–∏ <script> —ñ <iframe> –ø–æ–≤–Ω—ñ—Å—Ç—é
  v_output := REGEXP_REPLACE(v_output, '<script[^>]*>.*?</script>', '', 1, 0, 'in');
  v_output := REGEXP_REPLACE(v_output, '<iframe[^>]*>.*?</iframe>', '', 1, 0, 'in');
  -- –ó–∞–±–æ—Ä–æ–Ω–∏—Ç–∏ –≤—Å—ñ —Ç–µ–≥–∏, –∫—Ä—ñ–º –¥–æ–∑–≤–æ–ª–µ–Ω–∏—Ö
  v_output := REGEXP_REPLACE(v_output, '</?(?!b|i|br|li|ul|ol|span)[^>]+>', '', 1, 0, 'in');
  RETURN v_output;
END;
```

---

### üîπ 3. **–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è: –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ—é**

```plsql
IF INSTR(LOWER(:P_ITEM), '<script') > 0 THEN
   raise_application_error(-20001, '–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è <script> –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ');
END IF;
```

---

## üß™ –î–æ–¥–∞—Ç–∫–æ–≤–æ: —è–∫—â–æ –¥–æ–∑–≤–æ–ª—è—î—à –ª–∏—à–µ —Ç–µ–∫—Å—Ç

* –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π `APEX_ESCAPE.HTML(...)` **–≤ insert/update –ø—Ä–æ—Ü–µ—Å—ñ**
* –ê–±–æ –ø—Ä—è–º–æ –≤ SQL-–∑–∞–ø–∏—Ç–∞—Ö:

```sql
SELECT APEX_ESCAPE.HTML(TASK_CONTENT) AS SAFE_CONTENT
FROM TASKS
```

---

## üö´ –ù–µ —Ä–æ–±–∏ —Ç–∞–∫:

* –ù–µ –¥–æ–∑–≤–æ–ª—è–π `Escape = No`, —è–∫—â–æ –Ω–µ –≤–ø–µ–≤–Ω–µ–Ω–∏–π —É –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö.
* –ù–µ –∑–±–µ—Ä—ñ–≥–∞–π –¥–∞–Ω—ñ –Ω–∞–ø—Ä—è–º—É –±–µ–∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏/–æ—á–∏—Å—Ç–∫–∏.

---

## üîê –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥:

1. ‚úèÔ∏è –£ —Ñ–æ—Ä–º—ñ –≤–≤–µ–¥–µ–Ω–Ω—è:

   * –¥–æ–∑–≤–æ–ª—è–π —Ç—ñ–ª—å–∫–∏ "—Ç–µ–∫—Å—Ç" –∞–±–æ "–≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤–∞–Ω–∏–π HTML".
2. üíæ –ü—Ä–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—ñ:

   * **APEX\_ESCAPE.HTML** ‚Äî —è–∫—â–æ –ª–∏—à–µ —Ç–µ–∫—Å—Ç.
   * **sanitize function** ‚Äî —è–∫—â–æ —á–∞—Å—Ç–∫–æ–≤–∏–π HTML.
3. üìä –£ –∑–≤—ñ—Ç—ñ:

   * `Escape = No` ‚Äî **—Ç—ñ–ª—å–∫–∏ —è–∫—â–æ** –¥–∞–Ω—ñ —Ç–æ—á–Ω–æ –æ—á–∏—â–µ–Ω—ñ –ø—Ä–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—ñ.

---

üîî –Ø–∫—â–æ —Ö–æ—á–µ—à ‚Äî —è –º–æ–∂—É —Å—Ç–≤–æ—Ä–∏—Ç–∏ –≥–æ—Ç–æ–≤—É **PL/SQL-—Ñ—É–Ω–∫—Ü—ñ—é "sanitize\_html\_content"** –¥–ª—è whitelist-—Ç–µ–≥—ñ–≤, —è–∫–∞ –ø—Ä–∞—Ü—é—î –±–µ–∑–ø–µ—á–Ω–æ —Ç–∞ –∑—Ä—É—á–Ω–æ.
