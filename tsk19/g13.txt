–¢–∞–∫, —Ç–∏ **–º–æ–∂–µ—à –¥–æ–¥–∞—Ç–∏ –¥–æ–¥–∞—Ç–∫–æ–≤—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É `hasClass('active')` —É –±–ª–æ–∫ `if ($menu.is(':visible'))`**, –∞–ª–µ —Ç—Ä–µ–±–∞ **—á—ñ—Ç–∫–æ —Ä–æ–∑—É–º—ñ—Ç–∏**, **–Ω–∞–≤—ñ—â–æ —Ç–∏ —Ü–µ —Ä–æ–±–∏—à**.

---

## üîç –ü—Ä–æ–±–ª–µ–º–∞:

–¢–≤—ñ–π —Å—Ç–∞—Ä–∏–π –∫–æ–¥:

```js
if ($menu.is(':visible')) {
  $menu.hide();
  return;
}

if ($menu.hasClass('active')) {
  $menu.removeClass('active');
  return;
}
```

‚úÖ –ø—Ä–∞—Ü—é—î –æ–∫—Ä–µ–º–æ, ‚ùå –∞–ª–µ **—Ä–∞–∑–æ–º ‚Äî –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—É—î**, –±–æ:

* –ø–µ—Ä—à–∏–π `if` —Ö–æ–≤–∞—î –º–µ–Ω—é, —ñ `return` –Ω–µ –¥–∞—î –¥—ñ–π—Ç–∏ –¥–æ –¥—Ä—É–≥–æ–≥–æ
* –¥—Ä—É–≥–∏–π –Ω—ñ–∫–æ–ª–∏ –Ω–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ–≥–æ

---

## ‚úÖ –í–∞—Ä—ñ–∞–Ω—Ç –∑ –æ–±'—î–¥–Ω–∞–Ω–Ω—è–º:

–¢–∞–∫, —Ç–∏ –º–æ–∂–µ—à –∑—Ä–æ–±–∏—Ç–∏ —Ü–µ —Ç–∞–∫:

```js
if ($menu.is(':visible') && $menu.hasClass('active')) {
  $menu.hide().removeClass('active');
  lastMenuButton = null;
  return;
}
```

üìå –¶–µ **–æ–±'—î–¥–Ω—É—î –æ–±–∏–¥–≤–∞ `if`** –≤ –æ–¥–∏–Ω ‚Äî –≤—ñ–Ω –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è **–ª–∏—à–µ —Ç–æ–¥—ñ**, –∫–æ–ª–∏:

* –º–µ–Ω—é **–≤–∏–¥–∏–º–µ**
* —ñ **–º–∞—î –∫–ª–∞—Å `active`**

üîî –ê–ª–µ –±—É–¥—å —É–≤–∞–∂–Ω–∏–π: —è–∫—â–æ —Ç–∏ –¥–æ–¥–∞—î—à `active` –Ω–µ –≤ —É—Å—ñ—Ö –≤–∏–ø–∞–¥–∫–∞—Ö, —Ç–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ `hasClass('active')` –º–æ–∂–µ –Ω–µ —Å–ø—Ä–∞—Ü—é–≤–∞—Ç–∏ ‚Üí —ñ –º–µ–Ω—é –Ω–µ –∑–∞–∫—Ä–∏—î—Ç—å—Å—è.

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ –∑ `lastMenuButton` ‚Äî –Ω–∞–¥—ñ–π–Ω—ñ—à–∏–π

–Ø –± —Ä–∞–¥–∏–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É:

```js
if (lastMenuButton && lastMenuButton.is($button)) { ... }
```

–ë–æ –≤–æ–Ω–∞ —Ç–æ—á–Ω–æ –ø–æ–∫–∞–∑—É—î, **—á–∏ –∫–ª—ñ–∫ –±—É–≤ –ø–æ —Ç—ñ–π —Å–∞–º—ñ–π –∫–Ω–æ–ø—Ü—ñ**, —â–æ –π —Ä–∞–Ω—ñ—à–µ ‚Äî –∞ –Ω–µ –ª–∏—à–µ –æ—Ä—ñ—î–Ω—Ç—É–≤–∞—Ç–∏—Å—å –Ω–∞ `active`.

---

## ‚òëÔ∏è –Ø–∫—â–æ —Ö–æ—á–µ—à –∑–∞–ª–∏—à–∏—Ç–∏ `active` –¥–ª—è —Å—Ç–∏–ª—ñ–∑–∞—Ü—ñ—ó:

–¢–æ–¥—ñ –º–æ–∂–Ω–∞ –æ–Ω–æ–≤–∏—Ç–∏ –ª–æ–≥—ñ–∫—É —Ç–∞–∫:

```js
if (lastMenuButton && lastMenuButton.is($button)) {
  if ($menu.is(':visible')) {
    $menu.hide().removeClass('active');
    lastMenuButton = null;
  } else {
    showMenuAt($button, $menu);
    $menu.addClass('active');
    lastMenuButton = $button;
  }
  return;
}
```

---

## üîö –í–∏—Å–Ω–æ–≤–æ–∫:

üî∏ **–¢–∞–∫, –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É `hasClass('active')`, –∞–ª–µ –∫—Ä–∞—â–µ –∫–æ–º–±—ñ–Ω—É–≤–∞—Ç–∏ —ó—ó –∑ –ª–æ–≥—ñ–∫–æ—é `lastMenuButton`**
üî∏ –Ø–∫—â–æ `active` –Ω–µ –∑–∞–≤–∂–¥–∏ —Å—Ç–∞–≤–∏—Ç—å—Å—è/–∑–Ω—ñ–º–∞—î—Ç—å—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∑ `show()/hide()`, —Ç–æ **—Ç–∞–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –º–æ–∂–µ –≤–µ—Å—Ç–∏ –¥–æ –ø–æ–º–∏–ª–æ–∫**
üî∏ –ö—Ä–∞—â–µ –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫—É —á–µ—Ä–µ–∑ **—Å—Ç–∞–Ω –Ω–∞—Ç–∏—Å–Ω—É—Ç–æ—ó –∫–Ω–æ–ø–∫–∏**, –∞ –∫–ª–∞—Å `active` –∑–∞–ª–∏—à–∏—Ç–∏ –¥–ª—è —Å—Ç–∏–ª—ñ–∑–∞—Ü—ñ—ó

–•–æ—á–µ—à ‚Äî –º–æ–∂—É –∑—Ä–æ–±–∏—Ç–∏ –ø–æ–≤–Ω—É –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—é –∑ `active`, `lastMenuButton` —ñ –±–µ–∑–∫–æ–Ω—Ñ–ª—ñ–∫—Ç–Ω–æ—é –ª–æ–≥—ñ–∫–æ—é.
