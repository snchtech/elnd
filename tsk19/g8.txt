–°—É–ø–µ—Ä, —Ç–æ–¥—ñ –ø–æ–∫–∞–∂—É, —è–∫ **–¥–æ–¥–∞—Ç–∏ —ñ –æ–±—Ä–æ–±–∏—Ç–∏ –ø–æ–ª–µ `TERM_DAYS` (–¢–µ—Ä–º—ñ–Ω –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤ –¥–Ω—è—Ö)** —É **Interactive Grid (IG)** –¥–ª—è –ø—ñ–¥—à–∞–±–ª–æ–Ω—ñ–≤, —è–∫—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –∫–æ–ª–µ–∫—Ü—ñ—ó `TASK_TEMPLATE_SUBTASKS_COLLECTION`.

---

## ‚úÖ –¶—ñ–ª—å:

* –î–æ–¥–∞—Ç–∏ –∫–æ–ª–æ–Ω–∫—É **"–¢–µ—Ä–º—ñ–Ω –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (–¥–Ω—ñ–≤)"** —É IG
* –ó–±–µ—Ä—ñ–≥–∞—Ç–∏ —ó—ó —É –ø–æ–ª—ñ `N002` –∫–æ–ª–µ–∫—Ü—ñ—ó
* –ü—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è —á–µ—Ä–µ–∑ job ‚Äî —Ä–æ–∑—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ `PLANNING_DATE_END := PLANNING_DATE_START + TERM_DAYS`

---

## üîß 1. –î–æ–¥–∞–π –∫–æ–ª–æ–Ω–∫—É –≤ IG

### –£ Interactive Grid:

* –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ IG ‚Üí `Columns` ‚Üí `Add Column`
* **Name**: `TERM_DAYS`
* **Heading**: –¢–µ—Ä–º—ñ–Ω (–¥–Ω—ñ–≤)
* **Type**: `Number Field`
* **Default Value**: `1`
* **Required**: ‚ùå
* **Value Required**: No

> –ú–æ–∂–µ—à –∑—Ä–æ–±–∏—Ç–∏ —Ü—é –∫–æ–ª–æ–Ω–∫—É –≤–∏–¥–∏–º–æ—é –ª–∏—à–µ –ø—Ä–∏ `P6_TASK_MODE = 1`, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ.

---

## üîÅ 2. –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑ –∫–æ–ª–µ–∫—Ü—ñ—î—é `TASK_TEMPLATE_SUBTASKS_COLLECTION`

### –£ `IG` ‚Üí `Data Source`:

* –î–∂–µ—Ä–µ–ª–æ –¥–∞–Ω–∏—Ö: `APEX_COLLECTIONS`
* Collection Name: `'TASK_TEMPLATE_SUBTASKS_COLLECTION'`

#### –£ –∫–æ–ª–æ–Ω–∫–∞—Ö:

* `N002` ‚Üí –ø—Ä–∏–≤'—è–∑—É—î–º–æ –¥–æ `TERM_DAYS`

üîß –£ SQL-–∑–∞–ø–∏—Ç—ñ:

```sql
SELECT
  c001 AS TASK_ID,
  c002 AS SUBTASK_CONTENT,
  d001 AS PLANNING_DATE_END,
  c003 AS PARENT_ID,
  c004 AS ORDER_SUBTASK,
  c005 AS STATUS_ID,
  d002 AS DATE_CREATE,
  d003 AS DATE_UPDATE,
  c006 AS CREATOR,
  c007 AS UPDATOR,
  n001 AS TASK_MODE,
  n002 AS TERM_DAYS, -- —Ç—É—Ç –Ω–æ–≤–µ –ø–æ–ª–µ
  c008 AS TEMP_ROW_ID
FROM APEX_COLLECTIONS
WHERE COLLECTION_NAME = 'TASK_TEMPLATE_SUBTASKS_COLLECTION'
```

---

## üîÅ 3. –ü—Ä–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—ñ –∑ –∫–æ–ª–µ–∫—Ü—ñ—ó —É —Ç–∞–±–ª–∏—Ü—é `TASK_TEMPLATE_SUBTASK`

–£ `process`, —è–∫–∏–π –∑–±–µ—Ä—ñ–≥–∞—î –∑ –∫–æ–ª–µ–∫—Ü—ñ—ó –≤ –ë–î:

```plsql
FOR rec IN (
  SELECT *
  FROM APEX_COLLECTIONS
  WHERE COLLECTION_NAME = 'TASK_TEMPLATE_SUBTASKS_COLLECTION'
)
LOOP
  INSERT INTO TASK_TEMPLATE_SUBTASK (
    TEMPLATE_ID,
    SUBTASK_CONTENT,
    TERM_DAYS,
    PARENT_ID,
    ORDER_SUBTASK,
    STATUS_ID,
    ...
  ) VALUES (
    :TEMPLATE_ID,
    rec.c002,
    rec.n002, -- –Ω–æ–≤–µ –ø–æ–ª–µ
    rec.c003,
    rec.c004,
    rec.c005,
    ...
  );
END LOOP;
```

---

## üßÆ 4. –£ job ‚Üí —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ `PLANNING_DATE_END`

```plsql
PLANNING_DATE_END := PLANNING_DATE_START + NVL(TTS.TERM_DAYS, 1);
```

---

## ‚úÖ –ü—ñ–¥—Å—É–º–æ–∫:

| –©–æ                       | –î—ñ—è                                      |
| ------------------------ | ---------------------------------------- |
| IG ‚Üí –∫–æ–ª–æ–Ω–∫–∞ `TERM_DAYS` | –ü—Ä–∏–≤‚Äô—è–∑–∞—Ç–∏ –¥–æ `n002`                     |
| –ö–æ–ª–µ–∫—Ü—ñ—è                 | `n002` = –∫—ñ–ª—å–∫—ñ—Å—Ç—å –¥–Ω—ñ–≤ –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è    |
| –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ –ë–î          | `TERM_DAYS` –≤ `TASK_TEMPLATE_SUBTASK`    |
| –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è    | `PLANNING_DATE_END := START + TERM_DAYS` |

---

üîî –Ø–∫—â–æ —Ç–∏ —Ö–æ—á–µ—à —â–µ:

* –∑–∞–¥–∞—Ç–∏ `default` –∑–Ω–∞—á–µ–Ω–Ω—è –Ω–∞ —Ä—ñ–≤–Ω—ñ IG –ø—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ —Ä—è–¥–∫–∞
* –∞–±–æ –∑—Ä–æ–±–∏—Ç–∏ –∫–æ–ª–æ–Ω–∫—É `readonly` –≤ –ø–µ–≤–Ω–∏—Ö —Ä–µ–∂–∏–º–∞—Ö

‚Äî —Å–∫–∞–∂–∏, —è –ø—ñ–¥–∫–∞–∂—É.
