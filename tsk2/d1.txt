Ð©Ð¾Ð± Ñ€ÐµÐ°Ð»Ñ–Ð·ÑƒÐ²Ð°Ñ‚Ð¸ Ñ„ÑƒÐ½ÐºÑ†Ñ–Ð¾Ð½Ð°Ð» Ð¾Ð·Ð½Ð°Ð¹Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡Ð° Ñ–Ð· Ð·Ð°Ð²Ð´Ð°Ð½Ð½ÑÐ¼Ð¸ ÐºÐ¾Ð¶Ð½Ñƒ Ð·Ð¼Ñ–Ð½Ñƒ, Ð¿Ñ€Ð¾Ð¿Ð¾Ð½ÑƒÑŽ ÑÑ‚Ð²Ð¾Ñ€Ð¸Ñ‚Ð¸ Ñ‚Ð°Ð±Ð»Ð¸Ñ†ÑŽ `TASK_ACKNOWLEDGEMENT`, ÑÐºÐ° Ð±ÑƒÐ´Ðµ Ñ„Ñ–ÐºÑÑƒÐ²Ð°Ñ‚Ð¸ Ñ„Ð°ÐºÑ‚ Ð¾Ð·Ð½Ð°Ð¹Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡Ð° Ñ–Ð· Ð·Ð°Ð²Ð´Ð°Ð½Ð½ÑÐ¼ Ñƒ Ð¿ÐµÐ²Ð½Ñƒ Ð·Ð¼Ñ–Ð½Ñƒ.

### **ÐžÑÐ½Ð¾Ð²Ð½Ñ– Ð²Ð¸Ð¼Ð¾Ð³Ð¸ Ð´Ð¾ Ñ€Ñ–ÑˆÐµÐ½Ð½Ñ**:
1. **Ð¢Ð°Ð±Ð»Ð¸Ñ†Ñ `TASK_ACKNOWLEDGEMENT`** Ð±ÑƒÐ´Ðµ Ð¼Ñ–ÑÑ‚Ð¸Ñ‚Ð¸ Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð¿Ñ€Ð¾ ÐºÐ¾Ð¶Ð½Ðµ Ð¾Ð·Ð½Ð°Ð¹Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ (`user_id`, `task_id`, `shift_date`, `shift_number`).
2. **ÐšÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡ Ð¼Ð°Ñ” Ð½Ð°Ñ‚Ð¸ÑÐºÐ°Ñ‚Ð¸ "ÐžÐ·Ð½Ð°Ð¹Ð¾Ð¼Ð¸Ñ‚Ð¸ÑÑŒ" Ð¿Ñ–Ð´ Ñ‡Ð°Ñ Ð·Ð¼Ñ–Ð½Ð¸**, Ñ– Ñ†Ðµ Ñ„Ñ–ÐºÑÑƒÑ”Ñ‚ÑŒÑÑ Ð² Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ–.
3. **Ð¯ÐºÑ‰Ð¾ Ð·Ð¼Ñ–Ð½Ð° Ð·Ð¼Ñ–Ð½Ð¸Ð»Ð°ÑÑ, Ð° Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ Ð²ÑÐµ Ñ‰Ðµ Ð½Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ðµ**, Ð·Ð°Ð¿Ð¸Ñ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡Ð° Ð·Ð½Ð¾Ð²Ñƒ Ð±ÑƒÐ´Ðµ Ð²Ñ–Ð´ÑÑƒÑ‚Ð½Ñ–Ð¹ Ñƒ `TASK_ACKNOWLEDGEMENT`, Ñ– Ð²Ñ–Ð½ Ð¼Ð°Ñ” Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾ Ð½Ð°Ñ‚Ð¸ÑÐ½ÑƒÑ‚Ð¸ "ÐžÐ·Ð½Ð°Ð¹Ð¾Ð¼Ð¸Ñ‚Ð¸ÑÑŒ".
4. **Ð›Ð¾Ð³ Ð¾Ð·Ð½Ð°Ð¹Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ** Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¸Ð¹ Ñ‡ÐµÑ€ÐµÐ· `SELECT` Ð· Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ– `TASK_ACKNOWLEDGEMENT`.
5. **Ð—Ð¼Ñ–Ð½Ð¸ Ð²Ð¸Ð·Ð½Ð°Ñ‡Ð°ÑŽÑ‚ÑŒÑÑ Ð·Ð° Ñ€Ð¾Ð·ÐºÐ»Ð°Ð´Ð¾Ð¼:**  
   - **ÐŸÐµÑ€ÑˆÐ° Ð·Ð¼Ñ–Ð½Ð°:** 07:00 â€“ 15:00  
   - **Ð”Ñ€ÑƒÐ³Ð° Ð·Ð¼Ñ–Ð½Ð°:** 15:00 â€“ 23:00  
   - **Ð¢Ñ€ÐµÑ‚Ñ Ð·Ð¼Ñ–Ð½Ð°:** 23:00 â€“ 07:00

---

## **1. Ð¡Ñ‚Ð²Ð¾Ñ€ÐµÐ½Ð½Ñ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ– Ð´Ð»Ñ Ñ„Ñ–ÐºÑÐ°Ñ†Ñ–Ñ— Ð¾Ð·Ð½Ð°Ð¹Ð¾Ð¼Ð»ÐµÐ½ÑŒ**
```sql
CREATE TABLE TASK_ACKNOWLEDGEMENT (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_id NUMBER NOT NULL, -- ÐšÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡, ÑÐºÐ¸Ð¹ Ð¾Ð·Ð½Ð°Ð¹Ð¾Ð¼Ð¸Ð²ÑÑ
    task_id NUMBER NOT NULL, -- Ð—Ð°Ð²Ð´Ð°Ð½Ð½Ñ, Ð· ÑÐºÐ¸Ð¼ Ð¾Ð·Ð½Ð°Ð¹Ð¾Ð¼Ð¸Ð»Ð¸ÑÑŒ
    shift_date DATE NOT NULL, -- Ð”Ð°Ñ‚Ð° Ð·Ð¼Ñ–Ð½Ð¸
    shift_number NUMBER(1) NOT NULL, -- ÐÐ¾Ð¼ÐµÑ€ Ð·Ð¼Ñ–Ð½Ð¸ (1, 2, 3)
    acknowledged_at TIMESTAMP DEFAULT SYSTIMESTAMP, -- Ð§Ð°Ñ Ð¾Ð·Ð½Ð°Ð¹Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ
    CONSTRAINT TASK_ACK_USER_FK FOREIGN KEY (user_id) REFERENCES USERS(id),
    CONSTRAINT TASK_ACK_TASK_FK FOREIGN KEY (task_id) REFERENCES TASKS(id)
);
```
âœ… **ÐšÐ»ÑŽÑ‡Ð¾Ð²Ñ– Ð¼Ð¾Ð¼ÐµÐ½Ñ‚Ð¸ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ–**:
- `user_id`, `task_id`, `shift_date`, `shift_number` â€“ Ð²Ð¸Ð·Ð½Ð°Ñ‡Ð°ÑŽÑ‚ÑŒ ÑƒÐ½Ñ–ÐºÐ°Ð»ÑŒÐ½Ðµ Ð¾Ð·Ð½Ð°Ð¹Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ.
- `acknowledged_at` â€“ Ñ„Ñ–ÐºÑÑƒÑ” Ñ‚Ð¾Ñ‡Ð½Ð¸Ð¹ Ñ‡Ð°Ñ Ð¾Ð·Ð½Ð°Ð¹Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ.
- **ÐÐµÐ¾Ð±Ñ…Ñ–Ð´Ð½Ñ–ÑÑ‚ÑŒ Ð½Ð¾Ð²Ð¾Ð³Ð¾ Ð¾Ð·Ð½Ð°Ð¹Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð²Ð¸Ð·Ð½Ð°Ñ‡Ð°Ñ”Ñ‚ÑŒÑÑ Ð·Ð° Ð´Ð°Ñ‚Ð¾ÑŽ (`shift_date`) Ñ– Ð·Ð¼Ñ–Ð½Ð¾ÑŽ (`shift_number`)**.

---

## **2. Ð¤ÑƒÐ½ÐºÑ†Ñ–Ñ Ð²Ð¸Ð·Ð½Ð°Ñ‡ÐµÐ½Ð½Ñ Ð¿Ð¾Ñ‚Ð¾Ñ‡Ð½Ð¾Ñ— Ð·Ð¼Ñ–Ð½Ð¸**
```sql
CREATE OR REPLACE FUNCTION GET_CURRENT_SHIFT
RETURN NUMBER IS
    v_hour NUMBER;
BEGIN
    SELECT TO_NUMBER(TO_CHAR(SYSDATE, 'HH24')) INTO v_hour FROM DUAL;

    IF v_hour >= 7 AND v_hour < 15 THEN
        RETURN 1; -- ÐŸÐµÑ€ÑˆÐ° Ð·Ð¼Ñ–Ð½Ð°
    ELSIF v_hour >= 15 AND v_hour < 23 THEN
        RETURN 2; -- Ð”Ñ€ÑƒÐ³Ð° Ð·Ð¼Ñ–Ð½Ð°
    ELSE
        RETURN 3; -- Ð¢Ñ€ÐµÑ‚Ñ Ð·Ð¼Ñ–Ð½Ð°
    END IF;
END;
/
```
âœ… Ð¦Ñ Ñ„ÑƒÐ½ÐºÑ†Ñ–Ñ Ð²Ð¸Ð·Ð½Ð°Ñ‡Ð°Ñ” **Ð½Ð¾Ð¼ÐµÑ€ Ð¿Ð¾Ñ‚Ð¾Ñ‡Ð½Ð¾Ñ— Ð·Ð¼Ñ–Ð½Ð¸** Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ñ– Ñ‡Ð°ÑÑƒ ÑÐµÑ€Ð²ÐµÑ€Ð°.

---

## **3. Ð—Ð°Ð¿Ð¸Ñ‚ Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÐ²Ñ–Ñ€ÐºÐ¸, Ñ‡Ð¸ Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð¾ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡Ñƒ Ð¾Ð·Ð½Ð°Ð¹Ð¾Ð¼Ð¸Ñ‚Ð¸ÑÑ**
```sql
SELECT t.id AS task_id, t.task_content, a.user_id, a.shift_date, a.shift_number
FROM TASKS t
LEFT JOIN TASK_ACKNOWLEDGEMENT a 
    ON t.id = a.task_id 
    AND a.user_id = :current_user_id 
    AND a.shift_date = TRUNC(SYSDATE)
    AND a.shift_number = GET_CURRENT_SHIFT()
WHERE (t.creator_id = :current_user_id OR t.department_id = :current_department_id)
    AND t.status_id != 4 -- Ð—Ð°Ð²Ð´Ð°Ð½Ð½Ñ Ð½Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ðµ
    AND a.id IS NULL; -- ÐÐµÐ¼Ð°Ñ” Ð·Ð°Ð¿Ð¸ÑÑƒ Ð¿Ñ€Ð¾ Ð¾Ð·Ð½Ð°Ð¹Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ
```
âœ… **Ð›Ð¾Ð³Ñ–ÐºÐ° Ð·Ð°Ð¿Ð¸Ñ‚Ñƒ**:
- ÐŸÐµÑ€ÐµÐ²Ñ–Ñ€ÑÑ”, Ñ‡Ð¸ **ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡ Ð²Ð¶Ðµ Ð¾Ð·Ð½Ð°Ð¹Ð¾Ð¼Ð»ÑŽÐ²Ð°Ð²ÑÑ Ñƒ Ñ†ÑŽ Ð·Ð¼Ñ–Ð½Ñƒ** (`a.id IS NULL`).
- Ð¯ÐºÑ‰Ð¾ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡ Ð¿Ñ€Ð°Ñ†ÑŽÑ” Ñƒ ÑÐ²Ð¾Ñ”Ð¼Ñƒ Ð²Ñ–Ð´Ð´Ñ–Ð»Ñ– Ð°Ð±Ð¾ ÑÑ‚Ð²Ð¾Ñ€Ð¸Ð² Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ, **Ð²Ñ–Ð½ Ð¼Ð°Ñ” Ð¹Ð¾Ð³Ð¾ Ð±Ð°Ñ‡Ð¸Ñ‚Ð¸**.
- Ð—Ð°Ð²Ð´Ð°Ð½Ð½Ñ Ð¿Ð¾Ð²Ð¸Ð½Ð½Ð¾ Ð±ÑƒÑ‚Ð¸ **Ð½Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ð¼** (`status_id != 4`).
- `GET_CURRENT_SHIFT()` Ð²Ð¸Ð·Ð½Ð°Ñ‡Ð°Ñ” Ð¿Ð¾Ñ‚Ð¾Ñ‡Ð½Ñƒ Ð·Ð¼Ñ–Ð½Ñƒ.
- `TRUNC(SYSDATE)` Ð±ÐµÑ€Ðµ Ñ‚Ñ–Ð»ÑŒÐºÐ¸ Ð´Ð°Ñ‚Ñƒ, Ð±ÐµÐ· Ñ‡Ð°ÑÑƒ.

---

## **4. Ð”Ð¾Ð´Ð°Ð²Ð°Ð½Ð½Ñ Ð·Ð°Ð¿Ð¸ÑÑƒ Ð¿Ñ€Ð¸ Ð½Ð°Ñ‚Ð¸ÑÐºÐ°Ð½Ð½Ñ– "ÐžÐ·Ð½Ð°Ð¹Ð¾Ð¼Ð¸Ñ‚Ð¸ÑÑŒ"**
```sql
INSERT INTO TASK_ACKNOWLEDGEMENT (user_id, task_id, shift_date, shift_number)
VALUES (:current_user_id, :task_id, TRUNC(SYSDATE), GET_CURRENT_SHIFT());
```
âœ… **Ð¦Ðµ Ð´Ð¾Ð´Ð°Ñ” Ð·Ð°Ð¿Ð¸Ñ Ð¿Ñ€Ð¾ Ð¾Ð·Ð½Ð°Ð¹Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ**, ÑÐºÐµ Ð±ÑƒÐ´Ðµ ÑƒÐ½Ñ–ÐºÐ°Ð»ÑŒÐ½Ð¸Ð¼ Ð´Ð»Ñ ÐºÐ¾Ð¶Ð½Ð¾Ñ— Ð·Ð¼Ñ–Ð½Ð¸.

---

## **5. Ð—Ð°Ð¿Ð¸Ñ‚ Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÐ³Ð»ÑÐ´Ñƒ Ð»Ð¾Ð³Ñƒ Ð¾Ð·Ð½Ð°Ð¹Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ**
```sql
SELECT ta.user_id, u.username, ta.task_id, t.task_content, ta.shift_date, ta.shift_number, ta.acknowledged_at
FROM TASK_ACKNOWLEDGEMENT ta
JOIN USERS u ON ta.user_id = u.id
JOIN TASKS t ON ta.task_id = t.id
ORDER BY ta.acknowledged_at DESC;
```
âœ… ÐŸÐ¾ÐºÐ°Ð·ÑƒÑ” **Ð»Ð¾Ð³ ÑƒÑÑ–Ñ… Ð¾Ð·Ð½Ð°Ð¹Ð¾Ð¼Ð»ÐµÐ½ÑŒ**, Ð²Ñ–Ð´ÑÐ¾Ñ€Ñ‚Ð¾Ð²Ð°Ð½Ð¸Ð¹ Ð·Ð° Ð¾ÑÑ‚Ð°Ð½Ð½Ñ–Ð¼Ð¸ Ð·Ð°Ð¿Ð¸ÑÐ°Ð¼Ð¸.

---

## **ÐŸÑ–Ð´ÑÑƒÐ¼Ð¾Ðº Ñ€ÐµÐ°Ð»Ñ–Ð·Ð°Ñ†Ñ–Ñ—**
- **ÐšÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡ Ð¿Ð¾Ð²Ð¸Ð½ÐµÐ½ Ð½Ð°Ñ‚Ð¸ÑÐºÐ°Ñ‚Ð¸ "ÐžÐ·Ð½Ð°Ð¹Ð¾Ð¼Ð¸Ñ‚Ð¸ÑÑŒ" Ð½Ð° Ð¿Ð¾Ñ‡Ð°Ñ‚ÐºÑƒ ÐºÐ¾Ð¶Ð½Ð¾Ñ— Ð·Ð¼Ñ–Ð½Ð¸**.
- **Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡Ð½Ð¾ Ð²Ð¸Ð·Ð½Ð°Ñ‡Ð°Ñ” Ð·Ð¼Ñ–Ð½Ñƒ**.
- **Ð¯ÐºÑ‰Ð¾ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡ Ð¿Ñ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð² Ð·Ð¼Ñ–Ð½Ñƒ, Ð¹Ð¾Ð³Ð¾ Ð¾Ð·Ð½Ð°Ð¹Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð±Ñ–Ð»ÑŒÑˆÐµ Ð½Ðµ Ñ” Ð°ÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ð¸Ð¼**.
- **ÐŸÐµÑ€ÐµÐ³Ð»ÑÐ´ Ð»Ð¾Ð³Ñ–Ð² Ð´Ð¾Ð·Ð²Ð¾Ð»ÑÑ” ÐºÐµÑ€Ñ–Ð²Ð½Ð¸ÐºÐ°Ð¼ Ð±Ð°Ñ‡Ð¸Ñ‚Ð¸, Ñ…Ñ‚Ð¾ Ð¾Ð·Ð½Ð°Ð¹Ð¾Ð¼Ð»ÑŽÐ²Ð°Ð²ÑÑ**.

Ð¦Ñ Ñ€ÐµÐ°Ð»Ñ–Ð·Ð°Ñ†Ñ–Ñ Ð´Ð¾Ð·Ð²Ð¾Ð»ÑÑ” **Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡Ð½Ð¾ Ð½Ð°Ð³Ð°Ð´ÑƒÐ²Ð°Ñ‚Ð¸ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡Ñƒ Ð¿Ñ€Ð¾ Ð½ÐµÐ·Ð½Ð°Ð¹Ð¾Ð¼Ñ– Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ** Ñ‚Ð° **Ð²Ñ–Ð´ÑÑ‚ÐµÐ¶ÑƒÐ²Ð°Ñ‚Ð¸, ÐºÐ¾Ð»Ð¸ Ð²Ð¾Ð½Ð¸ Ð±ÑƒÐ»Ð¸ Ð¿ÐµÑ€ÐµÐ³Ð»ÑÐ½ÑƒÑ‚Ñ–**. ðŸš€