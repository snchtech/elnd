–©–æ–± —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ **—ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω—ñ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è** –≤ —Ç–∞–±–ª–∏—Ü—ñ `TASK_SUBTASKS`, –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏:

1. **–ü–æ–ª–µ `PARENT_ID`** ‚Äî –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–µ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è.  
2. **–ü–æ–ª–µ `LEVEL_NO` (–∞–±–æ `LEVEL`)** ‚Äî –∑–±–µ—Ä—ñ–≥–∞—î —Ä—ñ–≤–µ–Ω—å —ñ—î—Ä–∞—Ä—Ö—ñ—ó (1 ‚Äî –≤–µ—Ä—Ö–Ω—ñ–π —Ä—ñ–≤–µ–Ω—å, 2 ‚Äî –¥–æ—á—ñ—Ä–Ω—ñ–π —ñ —Ç.–¥.).  
3. (–û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ) **`SUBTASK_ORDER`** ‚Äî –≤–∏–∑–Ω–∞—á–∞—î –ø–æ—Ä—è–¥–æ–∫ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å —Å–µ—Ä–µ–¥ ‚Äú–±—Ä–∞—Ç—ñ–≤‚Äù.

---

## üîß –û–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ñ `TASK_SUBTASKS`

```sql
ALTER TABLE TASK_SUBTASKS ADD (
    PARENT_ID        NUMBER,                           -- ID –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–≥–æ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è
    LEVEL_NO         NUMBER DEFAULT 1,                 -- –†—ñ–≤–µ–Ω—å —ñ—î—Ä–∞—Ä—Ö—ñ—ó (1 = –≤–µ—Ä—Ö–Ω—ñ–π)
    SUBTASK_ORDER    NUMBER                            -- –ü–æ—Ä—è–¥–∫–æ–≤–∏–π –Ω–æ–º–µ—Ä —Å–µ—Ä–µ–¥ "—Å–µ—Å—Ç–µ—Ä"
);

-- –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ: –¥–æ–¥–∞—Ç–∏ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π –∫–ª—é—á –Ω–∞ —Å–∞–º—É —Ç–∞–±–ª–∏—Ü—é
ALTER TABLE TASK_SUBTASKS ADD CONSTRAINT FK_SUBTASK_PARENT
  FOREIGN KEY (PARENT_ID) REFERENCES TASK_SUBTASKS(ID);
```

---

## üß† –ü–æ—è—Å–Ω–µ–Ω–Ω—è:

| –ü–æ–ª–µ           | –û–ø–∏—Å                                                       |
|----------------|------------------------------------------------------------|
| `PARENT_ID`     | –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ `ID` —ñ–Ω—à–æ–≥–æ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è (NULL ‚Äî –≤–µ—Ä—Ö–Ω—ñ–π —Ä—ñ–≤–µ–Ω—å) |
| `LEVEL_NO`      | –ß–∏—Å–ª–æ, —è–∫–µ –≤–∫–∞–∑—É—î –Ω–∞ –≥–ª–∏–±–∏–Ω—É (1, 2, 3...) —ñ—î—Ä–∞—Ä—Ö—ñ—ó           |
| `SUBTASK_ORDER` | –ü–æ—Ä—è–¥–æ–∫ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è —Å–µ—Ä–µ–¥ –±—Ä–∞—Ç—ñ–≤ (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—à –ø—Ä–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—ñ) |

---

## üìä –Ø–∫ –≤–∏–≥–ª—è–¥–∞—Ç–∏–º—É—Ç—å –∑–∞–ø–∏—Å–∏

| ID | TASK_ID | SUBTASK_CONTENT      | PARENT_ID | LEVEL_NO | SUBTASK_ORDER |
|----|---------|----------------------|-----------|----------|----------------|
| 1  | 1001    | –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä    | NULL      | 1        | 1              |
| 2  | 1001    | –ó—ñ–±—Ä–∞—Ç–∏ –ª–æ–≥–∏         | 1         | 2        | 1              |
| 3  | 1001    | –û–Ω–æ–≤–∏—Ç–∏ –ø—Ä–æ—à–∏–≤–∫—É     | 1         | 2        | 2              |
| 4  | 1001    | –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏      | 3         | 3        | 1              |

---

## ‚úÖ –Ø–∫ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ —Ü–∏–º —É SQL

### üîΩ –í–∏–≤–µ—Å—Ç–∏ –¥–µ—Ä–µ–≤–æ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å:

```sql
SELECT 
  ID, TASK_ID, SUBTASK_CONTENT, PARENT_ID, LEVEL_NO, SUBTASK_ORDER
FROM TASK_SUBTASKS
WHERE TASK_ID = :P_TASK_ID
START WITH PARENT_ID IS NULL
CONNECT BY PRIOR ID = PARENT_ID
ORDER SIBLINGS BY SUBTASK_ORDER;
```

- `START WITH PARENT_ID IS NULL` ‚Äî –≤–µ—Ä—Ö–Ω—ñ –≤—É–∑–ª–∏
- `CONNECT BY PRIOR ID = PARENT_ID` ‚Äî —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–µ –¥–µ—Ä–µ–≤–æ
- `ORDER SIBLINGS BY SUBTASK_ORDER` ‚Äî –ø–æ—Ä—è–¥–æ–∫ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è ‚Äú–Ω–∞ —Ä—ñ–≤–Ω—ñ‚Äù

---

## ‚úÖ APEX –ø—ñ–¥—Ç—Ä–∏–º–∫–∞
–£ APEX —Ç–∏ –º–æ–∂–µ—à:

- **–í—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ –¥–µ—Ä–µ–≤–æ** —á–µ—Ä–µ–∑ **Tree Region**.
- **–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É** —á–µ—Ä–µ–∑ **Interactive Grid –∑ –∫–æ–ª–æ–Ω–∫–æ—é PARENT_ID** (Select List –∞–±–æ popup LOV).

---

## ‚úçÔ∏è –ü—ñ–¥—Å—É–º–æ–∫

| –©–æ –¥–æ–¥–∞–Ω–æ         | –ù–∞–≤—ñ—â–æ                                                |
|-------------------|--------------------------------------------------------|
| `PARENT_ID`        | –ü–æ–±—É–¥–æ–≤–∞ —ñ—î—Ä–∞—Ä—Ö—ñ—ó                                      |
| `LEVEL_NO`         | –î–ª—è –∑—Ä—É—á–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—é/–≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ä—ñ–≤–Ω—è               |
| `SUBTASK_ORDER`    | –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –¥–æ—á—ñ—Ä–Ω—ñ—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤                          |

–¶–µ –¥–∞—î –∑–º–æ–≥—É —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ **–±—É–¥—å-—è–∫—É –≤–∫–ª–∞–¥–µ–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑–∞–≤–¥–∞–Ω—å**, –ø–æ–¥—ñ–±–Ω–æ –¥–æ –ø–ª–∞–Ω—É/–¥–µ—Ä–µ–≤–∞ –∑–∞–¥–∞—á.

---

üîß –•–æ—á–µ—à ‚Äî –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ –∑ SQL-–∑–∞–ø–∏—Ç–æ–º –Ω–∞ —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å –≤ —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—ñ –¥–ª—è APEX Tree, –∞–±–æ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—î—é —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É –≤ IG/TreeView.

–ì–æ—Ç–æ–≤–∏–π –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –∫—Ä–æ–∫—É? üòä