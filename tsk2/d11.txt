–ß—É–¥–æ–≤–æ! –î–∞–ª—ñ –ø–æ–∫–∞–∂—É **–ø–æ–µ—Ç–∞–ø–Ω–æ**, —è–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤ Oracle APEX —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑ **Interactive Grid (IG)** –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è, –≤–∏–¥–∞–ª–µ–Ω–Ω—è **—ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–∏—Ö –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å** (`TASK_SUBTASKS`).

---

## ‚úÖ –©–æ –æ—Ç—Ä–∏–º–∞—î–º–æ:
- IG —ñ–∑ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è–º–∏ –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ `TASK_ID`;
- –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å **–¥–æ–¥–∞–≤–∞—Ç–∏** –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –∑ –ø—Ä–∏–≤‚Äô—è–∑–∫–æ—é –¥–æ `PARENT_ID`;
- **Select List —É –∫–æ–ª–æ–Ω—Ü—ñ "–ë–∞—Ç—å–∫—ñ–≤—Å—å–∫–µ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è"**;
- –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å **—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏, –≤–∏–¥–∞–ª—è—Ç–∏, —Å–æ—Ä—Ç—É–≤–∞—Ç–∏**;
- –¥–∏–Ω–∞–º—ñ—á–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è `LEVEL_NO`.

---

## üîπ 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ñ `TASK_SUBTASKS` (–ø—Ä–∏–∫–ª–∞–¥)
–ú–∞—î –º—ñ—Å—Ç–∏—Ç–∏ —Ç–∞–∫—ñ –ø–æ–ª—è:
```sql
ID                  NUMBER PRIMARY KEY,
TASK_ID             NUMBER,
SUBTASK_CONTENT     VARCHAR2(4000),
STATUS_ID           NUMBER,
PLANNING_DATE_END   DATE,
ACTUAL_DATE_END     DATE,
PARENT_ID           NUMBER,
LEVEL_NO            NUMBER,
SUBTASK_ORDER       NUMBER
```

---

## üîπ 2. –°—Ç–≤–æ—Ä—é—î–º–æ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑ IG

### üìå –ö—Ä–æ–∫–∏:
1. **App Builder ‚Üí Create Page ‚Üí Interactive Grid**
2. **Table/View Name:** `TASK_SUBTASKS`
3. **Where Clause:**  
   ```sql
   TASK_ID = :P_TASK_ID
   ```
   (—è–∫—â–æ `TASK_ID` –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —è–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä –∑—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∑–∞–≤–¥–∞–Ω–Ω—è)

4. –î–æ–¥–∞–π –ø–æ–ª–µ `TASK_ID` —è–∫ Hidden ‚Üí `Default Value` ‚Üí `:P_TASK_ID`  
   (—â–æ–± –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –Ω–æ–≤–æ–≥–æ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –≤–æ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ—Ç—Ä–∏–º—É–≤–∞–ª–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π `TASK_ID`)

---

## üîπ 3. –ù–∞–ª–∞—à—Ç–æ–≤—É—î–º–æ –∫–æ–ª–æ–Ω–∫–∏ –≤ IG

| –ü–æ–ª–µ              | –¢–∏–ø         | –ö–æ–º–µ–Ω—Ç–∞—Ä                               |
|-------------------|-------------|----------------------------------------|
| `SUBTASK_CONTENT` | Textarea    | –†–µ–¥–∞–≥–æ–≤–∞–Ω–∏–π –∑–º—ñ—Å—Ç                      |
| `PARENT_ID`       | Select List | –í–∏–±—ñ—Ä –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–≥–æ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è        |
| `LEVEL_NO`        | Hidden      | –†–æ–∑—Ä–∞—Ö–æ–≤—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ             |
| `SUBTASK_ORDER`   | Number      | –ü–æ—Ä—è–¥–æ–∫ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è                   |

---

## üîπ 4. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è **Select List –¥–ª—è PARENT_ID**

1. –£ –∫–æ–ª–æ–Ω—Ü—ñ `PARENT_ID` ‚Üí Type: **Select List**
2. SQL Query (–≤—Å–µ—Ä–µ–¥–∏–Ω—ñ IG):
```sql
SELECT SUBTASK_CONTENT || ' (ID:' || ID || ')' AS DISPLAY_VALUE, ID AS RETURN_VALUE
FROM TASK_SUBTASKS
WHERE TASK_ID = :P_TASK_ID
  AND ID != :ID -- –©–æ–± –Ω–µ –≤–∏–±—Ä–∞—Ç–∏ —Å–∞–º–æ–≥–æ —Å–µ–±–µ
```
> `:ID` ‚Äî –ø—Å–µ–≤–¥–æ–Ω—ñ–º –¥–ª—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Ä—è–¥–∫–∞ (–≤–±—É–¥–æ–≤–∞–Ω–∞ APEX –∑–º—ñ–Ω–Ω–∞ –≤ IG)

3. –î–æ–¥–∞—Ç–∏ Null Option: `"‚Äî –ë–µ–∑ –±–∞—Ç—å–∫–∞ ‚Äî"`

---

## üîπ 5. –î–∏–Ω–∞–º—ñ—á–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è `LEVEL_NO`

### üìå –ö—Ä–æ–∫:
- –î–æ–¥–∞–π **Dynamic Action** ‚Üí `When: Save [Interactive Grid]`

**PL/SQL Process** (–º–æ–∂–Ω–∞ –Ω–∞ —Ä—ñ–≤–Ω—ñ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –æ–±—Ä–æ–±–Ω–∏–∫–∞):
```plsql
BEGIN
  FOR r IN (
    SELECT ID, PARENT_ID
    FROM TASK_SUBTASKS
    WHERE TASK_ID = :P_TASK_ID
  ) LOOP
    DECLARE
      v_level NUMBER := 1;
      v_parent_id NUMBER := r.PARENT_ID;
    BEGIN
      WHILE v_parent_id IS NOT NULL LOOP
        SELECT PARENT_ID INTO v_parent_id
        FROM TASK_SUBTASKS
        WHERE ID = v_parent_id;

        v_level := v_level + 1;
      END LOOP;

      UPDATE TASK_SUBTASKS
      SET LEVEL_NO = v_level
      WHERE ID = r.ID;
    END;
  END LOOP;
END;
```

üìå **–ú–æ–∂–µ—à —Ç–∞–∫–æ–∂ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ `SUBTASK_ORDER` –≤—Ä—É—á–Ω—É –∞–±–æ —á–µ—Ä–µ–∑ drag-and-drop —É –º–∞–π–±—É—Ç–Ω—å–æ–º—É.**

---

## üîπ 6. –í–∏–¥–∞–ª–µ–Ω–Ω—è, –≤—Å—Ç–∞–≤–∫–∞, —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è

IG –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º—É—î:
- –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Ä—è–¥–∫–∞;
- —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è `textarea`;
- –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ä—è–¥–∫–∞ (–≤–∫–ª—é—á–Ω–æ –∑ –¥–æ—á—ñ—Ä–Ω—ñ–º–∏ ‚Äî **–±—É–¥–µ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å**, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ);
- —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É –æ–±—Ä–æ–±–∫—É –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è.

---

## üîπ 7. –í–∏–≤–µ–¥–µ–Ω–Ω—è –¥–µ—Ä–µ–≤–∞ (–¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ—ó –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó)

–ö–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ ‚Äî —Ç–∏ –º–æ–∂–µ—à –≤—ñ–¥–æ–±—Ä–∞–∑–∏—Ç–∏ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è —É –≤–∏–≥–ª—è–¥—ñ –¥–µ—Ä–µ–≤–∞ —á–µ—Ä–µ–∑:

```sql
SELECT 
  ID, SUBTASK_CONTENT, PARENT_ID
FROM TASK_SUBTASKS
WHERE TASK_ID = :P_TASK_ID
START WITH PARENT_ID IS NULL
CONNECT BY PRIOR ID = PARENT_ID
ORDER SIBLINGS BY SUBTASK_ORDER;
```

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:
- üå≥ –ü–æ–≤–Ω—ñ—Å—Ç—é —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å —É IG.
- üì• –ú–æ–∂–Ω–∞ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –∑–∞–ø–∏—Å–∏ –∑ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–º ID.
- üìù –ú–æ–∂–Ω–∞ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –∑–º—ñ—Å—Ç –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å.
- üóëÔ∏è –ú–æ–∂–Ω–∞ –≤–∏–¥–∞–ª—è—Ç–∏ –±—É–¥—å-—è–∫–µ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è.
- üîÑ –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ä—ñ–≤–Ω—è `LEVEL_NO` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ.

---

–•–æ—á–µ—à, —è –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ –¥–æ–¥–∞—Ç–∏ –∫–Ω–æ–ø–∫—É "–î–æ–¥–∞—Ç–∏ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è", drag-and-drop –¥–ª—è —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è, –∞–±–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è–º?

üöÄ –ì–æ—Ç–æ–≤–∏–π —Ä–æ–∑—à–∏—Ä—é–≤–∞—Ç–∏?