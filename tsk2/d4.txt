–¢–∞–∫, –º–æ–∂–Ω–∞ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ **—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è** —Ä–∞–∑–æ–º —ñ–∑ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è–º–∏, **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—é—á–∏ –Ω–æ–≤–∏–π –∑–∞–ø–∏—Å —É `TASKS`** —Ç–∞, –ø—Ä–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ, **–∫–æ–ø—ñ—é—é—á–∏ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –≤ `TASK_SUBTASKS`**.  

---

## **–Ø–∫ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è?**
1. **–°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–æ–≤–∏–π –∑–∞–ø–∏—Å —É `TASKS`**, –∫–æ–ø—ñ—é—é—á–∏ –≤—Å—ñ –ø–æ–ª—è, –∫—Ä—ñ–º `id`, `date_create`, `planning_date_end`, `actual_date_end`.  
   - `date_create = SYSDATE`
   - `planning_date_end = SYSDATE + 1`
   - `actual_date_end = NULL`
2. **–Ø–∫—â–æ —É –∑–∞–≤–¥–∞–Ω–Ω—è —î –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è**, —Ç–æ –≤–æ–Ω–∏ —Ç–∞–∫–æ–∂ –∫–æ–ø—ñ—é—é—Ç—å—Å—è –≤ `TASK_SUBTASKS`:
   - `task_id` –∑–º—ñ–Ω—é—î—Ç—å—Å—è –Ω–∞ –Ω–æ–≤–∏–π `task_id`, —â–æ –±—É–≤ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π.
   - `planning_date_end = SYSDATE + 1`
   - `actual_date_end = NULL`
3. **–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø–æ–≤–µ—Ä—Ç–∞—î –Ω–æ–≤–∏–π `task_id`**.

---

## **PL/SQL-–ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è —Ç–∞ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å**
```sql
CREATE OR REPLACE PROCEDURE COPY_TASK (
    p_task_id IN NUMBER,
    p_new_task_id OUT NUMBER
) AS
    v_new_task_id NUMBER;
BEGIN
    -- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É –≤ TASKS (–∫–æ–ø—ñ—é—î–º–æ –≤—Å—ñ –¥–∞–Ω—ñ –∫—Ä—ñ–º –¥–∞—Ç —ñ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∞)
    INSERT INTO TASKS (date_create, task_content, creator_id, planning_date_end, actual_date_end, 
                       status_id, department_id, unit_id, type_id)
    SELECT SYSDATE, task_content, creator_id, SYSDATE + 1, NULL, 
           status_id, department_id, unit_id, type_id
    FROM TASKS
    WHERE id = p_task_id
    RETURNING id INTO v_new_task_id; -- –û—Ç—Ä–∏–º—É—î–º–æ ID –Ω–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É

    -- –ö–æ–ø—ñ—é—î–º–æ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è, —è–∫—â–æ –≤–æ–Ω–∏ —î
    INSERT INTO TASK_SUBTASKS (task_id, subtask_content, status_id, planning_date_end, actual_date_end)
    SELECT v_new_task_id, subtask_content, status_id, SYSDATE + 1, NULL
    FROM TASK_SUBTASKS
    WHERE task_id = p_task_id;

    -- –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –Ω–æ–≤–∏–π task_id
    p_new_task_id := v_new_task_id;

    COMMIT;
END;
/
```
---

## **–Ø–∫ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä—É —Ç–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ ID –Ω–æ–≤–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è?**
```sql
DECLARE
    v_new_task_id NUMBER;
BEGIN
    COPY_TASK(101, v_new_task_id); -- –ö–æ–ø—ñ—é—î–º–æ –∑–∞–≤–¥–∞–Ω–Ω—è –∑ id = 101
    DBMS_OUTPUT.PUT_LINE('New Task ID: ' || v_new_task_id);
END;
/
```
‚úÖ **–Ø–∫—â–æ —É –∑–∞–≤–¥–∞–Ω–Ω—è `TASKS` –±—É–ª–∏ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è, –≤–æ–Ω–∏ —Ç–∞–∫–æ–∂ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–ø—ñ—é—é—Ç—å—Å—è.**  
‚úÖ **–ù–æ–≤–∞ –¥–∞—Ç–∞ –ø–æ—á–∞—Ç–∫—É –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è `SYSDATE`, –∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `SYSDATE + 1`**  
‚úÖ **–ü–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –Ω–æ–≤–∏–π `task_id`, —è–∫–∏–π –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–∞–ª—ñ**  

---

## **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤**
### **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–æ–≤—ñ —Å—Ç–≤–æ—Ä–µ–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è**
```sql
SELECT * FROM TASKS WHERE id = (SELECT MAX(id) FROM TASKS);
```
### **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω—ñ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è**
```sql
SELECT * FROM TASK_SUBTASKS WHERE task_id = (SELECT MAX(id) FROM TASKS);
```
---

## **–í–∏—Å–Ω–æ–≤–æ–∫**
üîπ **–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ `COPY_TASK` –¥–æ–∑–≤–æ–ª—è—î —à–≤–∏–¥–∫–æ –¥—É–±–ª—é–≤–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è**  
üîπ **–ü—Ä–∏ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å –≤–æ–Ω–∏ —Ç–µ–∂ –∫–æ–ø—ñ—é—é—Ç—å—Å—è**  
üîπ **–î–∞—Ç–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ**  
üîπ **–ù–æ–≤–∏–π `task_id` –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤ –ø–æ–¥–∞–ª—å—à–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ—è—Ö**  

–¶–µ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π —Å–ø–æ—Å—ñ–± –¥—É–±–ª—é–≤–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è —Ä–∞–∑–æ–º —ñ–∑ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è–º–∏ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è! üöÄ