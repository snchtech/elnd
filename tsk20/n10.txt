–¢–∞–∫, –ø–æ–º–∏–ª–∫–∞ `ORA-20101: Application collection already exists` –ø—Ä–∏ `CREATE_COLLECTION_FROM_QUERY` —É `Before Header` –∑–∞–∑–≤–∏—á–∞–π –æ–∑–Ω–∞—á–∞—î:

> **–í–∏ –Ω–∞–º–∞–≥–∞—î—Ç–µ—Å—å —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–ª–µ–∫—Ü—ñ—é, —è–∫–∞ –≤–∂–µ —ñ—Å–Ω—É—î —É —Å–µ—Å—ñ—ó, —ñ APEX –Ω–µ –¥–æ–∑–≤–æ–ª—è—î —Å—Ç–≤–æ—Ä–∏—Ç–∏ —ó—ó –∑–Ω–æ–≤—É –±–µ–∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è.**

---

### ‚úÖ –Ø–∫ –≤–∏—Ä—ñ—à–∏—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É:

#### üîÅ **–í–∞—Ä—ñ–∞–Ω—Ç 1 ‚Äî –û—á–∏—Å—Ç–∏—Ç–∏ –ø–µ—Ä–µ–¥ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è–º:**

–ü–µ—Ä–µ–¥ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è–º –∫–æ–ª–µ–∫—Ü—ñ—ó –¥–æ–¥–∞–π—Ç–µ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É —Ç–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è:

```plsql
BEGIN
  IF apex_collection.collection_exists('MY_COLLECTION') THEN
    apex_collection.delete_collection('MY_COLLECTION');
  END IF;

  apex_collection.create_collection_from_query(
    p_collection_name => 'MY_COLLECTION',
    p_query           => 'SELECT ... FROM ...',
    p_generate_md5    => 'YES'
  );
END;
```

> üîç **–î–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏**: —Ü–µ–π –∫–æ–¥ –≤—Å—Ç–∞–≤–ª—è—î—Ç—å—Å—è –≤ `Before Header` –∞–±–æ –≤ –æ–∫—Ä–µ–º–∏–π PL/SQL –ø—Ä–æ—Ü–µ—Å –ø–µ—Ä–µ–¥ `create_collection_from_query`.

---

#### üö´ **–í–∞—Ä—ñ–∞–Ω—Ç 2 ‚Äî –ù–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ, —è–∫—â–æ –≤–∂–µ —ñ—Å–Ω—É—î:**

–Ø–∫—â–æ –¥–∞–Ω—ñ –Ω–µ –∑–º—ñ–Ω—é—é—Ç—å—Å—è —á–∞—Å—Ç–æ, –º–æ–∂–Ω–∞ –Ω–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∫–æ–ª–µ–∫—Ü—ñ—é, —è–∫—â–æ –≤–æ–Ω–∞ –≤–∂–µ —î:

```plsql
BEGIN
  IF NOT apex_collection.collection_exists('MY_COLLECTION') THEN
    apex_collection.create_collection_from_query(
      p_collection_name => 'MY_COLLECTION',
      p_query           => 'SELECT ... FROM ...'
    );
  END IF;
END;
```

---

### üß† –î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–æ—Ä–∞–¥–∏:

1. **–ö–æ–ª–µ–∫—Ü—ñ—è –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ APEX session**, —Ç–æ–º—É –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ –≤ —Ç—ñ–π —Å–∞–º—ñ–π —Å–µ—Å—ñ—ó ‚Äî –≤–æ–Ω–∞ –≤—Å–µ —â–µ —ñ—Å–Ω—É—î.
2. –Ø–∫—â–æ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç–µ **–º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –≤ —Ä–µ–∂–∏–º—ñ Dialog**, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ —Ü—è —Å—Ç–æ—Ä—ñ–Ω–∫–∞ —Ç–µ–∂ –Ω–µ —Å—Ç–≤–æ—Ä—é—î –∫–æ–ª–µ–∫—Ü—ñ—é –∑ —Ç–∏–º –∂–µ —ñ–º–µ–Ω–µ–º –±–µ–∑ –æ—á–∏—â–µ–Ω–Ω—è.
3. –Ø–∫—â–æ —Ö–æ—á–µ—Ç–µ **–æ—á–∏—â–∞—Ç–∏ –∫–æ–ª–µ–∫—Ü—ñ—é –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞** ‚Äî –º–æ–∂–Ω–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ `DA` –≤ –º–æ–¥–∞–ª—å–Ω–æ–º—É –≤—ñ–∫–Ω—ñ, —è–∫–∏–π –≤–∏–∫–ª–∏–∫–∞—î **Ajax callback** –∑ `DELETE_COLLECTION`.

---

üîß **–†–µ–∑—é–º–µ**: –∑–∞–≤–∂–¥–∏ –ø–µ—Ä–µ–¥ `CREATE_COLLECTION_FROM_QUERY` —Ä–æ–±—ñ—Ç—å `IF collection_exists THEN delete_collection`, –∞–±–æ –∫–æ–Ω—Ç—Ä–æ–ª—é–π—Ç–µ, —â–æ–± –Ω–µ —Å—Ç–≤–æ—Ä—é–≤–∞–ª–∞—Å—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –±–µ–∑ –ø–æ—Ç—Ä–µ–±–∏. –¶–µ –Ω–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à–∞ –ø—Ä–∏—á–∏–Ω–∞ ORA-20101 —É APEX.
