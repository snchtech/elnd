–Ø–∫—â–æ —Ç–∏ –≤–∏—Ä—ñ—à–∏—à **–∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –≤–∏–±—Ä–∞–Ω—ñ –¥–Ω—ñ —Ç–∏–∂–Ω—è –≤ –æ–∫—Ä–µ–º—ñ–π —Ç–∞–±–ª–∏—Ü—ñ** (—â–æ —î –Ω–∞–π–±—ñ–ª—å—à **–Ω–æ—Ä–º–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–º** —ñ –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω–∏–º –≤–∞—Ä—ñ–∞–Ω—Ç–æ–º), —Ç–æ –æ—Å—å **–ø–æ–≤–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è**, –≤–∫–ª—é—á–Ω–æ –∑ –≤–∞—Ä—ñ–∞–Ω—Ç–æ–º –∑–≤‚Äô—è–∑–∫—É –∑ `TASK_SUBTASKS`, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ.

---

## üîß –ö—Ä–æ–∫ 1. –°—Ç–≤–æ—Ä–∏—Ç–∏ –æ–∫—Ä–µ–º—É —Ç–∞–±–ª–∏—Ü—é

```sql
CREATE TABLE TASK_TEMPLATE_WEEKDAYS (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TEMPLATE_ID NUMBER NOT NULL,
    WEEKDAY NUMBER(1) NOT NULL CHECK (WEEKDAY BETWEEN 1 AND 7),
    CONSTRAINT FK_TW_TEMPLATE
      FOREIGN KEY (TEMPLATE_ID)
      REFERENCES TASK_TEMPLATES(ID)
      ON DELETE CASCADE
);
```

* `WEEKDAY` ‚Äî —Ü–µ –¥–µ–Ω—å —Ç–∏–∂–Ω—è: `1` ‚Äî –Ω–µ–¥—ñ–ª—è, `2` ‚Äî –ø–æ–Ω–µ–¥—ñ–ª–æ–∫, ..., `7` ‚Äî —Å—É–±–æ—Ç–∞.
* –¶—è —Ç–∞–±–ª–∏—Ü—è –¥–æ–∑–≤–æ–ª—è—î **–º–∞—Ç–∏ —Å—Ç—ñ–ª—å–∫–∏ —Ä—è–¥–∫—ñ–≤, —Å–∫—ñ–ª—å–∫–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ** –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω—É.

---

## üß† –Ø–∫ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –¥–∞–Ω—ñ –∑ APEX (checkbox list)

1. –£ —Ñ–æ—Ä–º—ñ APEX —Å—Ç–≤–æ—Ä—é—î—à `checkbox` –∞–±–æ `shuttle` item (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `P6_WEEKDAYS`) –∑ return value = `1:–ü–æ–Ω–µ–¥—ñ–ª–æ–∫`, `2:–í—ñ–≤—Ç–æ—Ä–æ–∫` —ñ —Ç.–¥.

2. –î–æ–¥–∞—î—à **PL/SQL –ø—Ä–æ—Ü–µ—Å –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è**:

```plsql
BEGIN
  DELETE FROM TASK_TEMPLATE_WEEKDAYS WHERE TEMPLATE_ID = :P6_ID;

  FOR i IN 1 .. APEX_UTIL.STRING_TO_TABLE(:P6_WEEKDAYS).COUNT LOOP
    INSERT INTO TASK_TEMPLATE_WEEKDAYS (TEMPLATE_ID, WEEKDAY)
    VALUES (:P6_ID, TO_NUMBER(APEX_UTIL.STRING_TO_TABLE(:P6_WEEKDAYS)(i)));
  END LOOP;
END;
```

---

## üìä –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —É –∑–≤—ñ—Ç–∞—Ö / –ª–æ–≥—ñ—Ü—ñ

### –ó–∞–ø–∏—Ç —É—Å—ñ—Ö –¥–Ω—ñ–≤ –¥–ª—è —à–∞–±–ª–æ–Ω—É:

```sql
SELECT WEEKDAY FROM TASK_TEMPLATE_WEEKDAYS WHERE TEMPLATE_ID = :P6_ID
```

### –û—Ç—Ä–∏–º–∞—Ç–∏ —è–∫ —Å–ø–∏—Å–æ–∫:

```sql
SELECT LISTAGG(WEEKDAY, ', ') WITHIN GROUP (ORDER BY WEEKDAY)
FROM TASK_TEMPLATE_WEEKDAYS
WHERE TEMPLATE_ID = :P6_ID
```

---

## üîÑ –Ø–∫ –∑–≤'—è–∑–∞—Ç–∏ –∑ `TASK_SUBTASKS`?

> ‚ö†Ô∏è **–£ –±—ñ–ª—å—à–æ—Å—Ç—ñ –≤–∏–ø–∞–¥–∫—ñ–≤ –∑–≤‚Äô—è–∑–æ–∫ –º—ñ–∂ –¥–Ω—è–º–∏ —Ç–∏–∂–Ω—è —ñ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è–º–∏ –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω.** –í—Å—ñ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è —à–∞–±–ª–æ–Ω—É –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è –∑–∞ –æ–¥–Ω–∏–º –≥—Ä–∞—Ñ—ñ–∫–æ–º. –ê–ª–µ —è–∫—â–æ **–ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–¥–∞–≤–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ –¥–Ω—ñ —Ç–∏–∂–Ω—è –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –ø—ñ–¥—à–∞–±–ª–æ–Ω—ñ–≤**, —Ä–æ–±–∏–º–æ —Ç–∞–∫:

### –¢–∞–±–ª–∏—Ü—è:

```sql
CREATE TABLE TASK_SUBTASK_WEEKDAYS (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    SUBTASK_TEMPLATE_ID NUMBER NOT NULL,
    WEEKDAY NUMBER(1) NOT NULL CHECK (WEEKDAY BETWEEN 1 AND 7),
    CONSTRAINT FK_TSW_SUBTASK
      FOREIGN KEY (SUBTASK_TEMPLATE_ID)
      REFERENCES TASK_TEMPLATE_SUBTASKS(ID)
      ON DELETE CASCADE
);
```

### –£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É:

* –î–Ω—ñ —Ç–∏–∂–Ω—è –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è **–¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø—ñ–¥—à–∞–±–ª–æ–Ω—É –æ–∫—Ä–µ–º–æ**.
* –î–ª—è —à–∞–±–ª–æ–Ω—É –≤ —Ü—ñ–ª–æ–º—É ‚Äî —Ç–∞–±–ª–∏—Ü—è `TASK_TEMPLATE_WEEKDAYS`.
* –î–ª—è –ø—ñ–¥—à–∞–±–ª–æ–Ω—É ‚Äî —Ç–∞–±–ª–∏—Ü—è `TASK_SUBTASK_WEEKDAYS`.

---

## üîö –ü–µ—Ä–µ–≤–∞–≥–∏ –≤–∞—Ä—ñ–∞–Ω—Ç—É –∑ –æ–∫—Ä–µ–º–æ—é —Ç–∞–±–ª–∏—Ü–µ—é:

| –ü–µ—Ä–µ–≤–∞–≥–∞                    | –ü–æ—è—Å–Ω–µ–Ω–Ω—è                               |
| --------------------------- | --------------------------------------- |
| üîÑ –ì–Ω—É—á–∫—ñ—Å—Ç—å                | –õ–µ–≥–∫–æ –¥–æ–¥–∞–≤–∞—Ç–∏ / –≤–∏–¥–∞–ª—è—Ç–∏ –æ–∫—Ä–µ–º—ñ –¥–Ω—ñ    |
| üßº –ù–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è             | –î–∞–Ω—ñ –Ω–µ –¥—É–±–ª—é—é—Ç—å—Å—è —ñ –ª–µ–≥–∫–æ –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è |
| üìà –ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å          | –ü—Ä–∏–¥–∞—Ç–Ω–æ –¥–æ –±—É–¥—å-—è–∫–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –¥–Ω—ñ–≤    |
| üß© –ü—Ä–æ—Å—Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ APEX | –ß–µ—Ä–µ–∑ `checkbox` item + PL/SQL process  |

---

üîÅ –Ø–∫—â–æ –ø—ñ–¥–∫–∞–∂–µ—à ‚Äî –¥–ª—è **—á–æ–≥–æ —Å–∞–º–µ —Ç–∏ —Ö–æ—á–µ—à –∑–≤‚Äô—è–∑–∞—Ç–∏ –¥–Ω—ñ —Ç–∏–∂–Ω—è –∑ `TASK_SUBTASKS`** ‚Äî —è –º–æ–∂—É –ø–æ—Ä–µ–∫–æ–º–µ–Ω–¥—É–≤–∞—Ç–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É (–º–æ–∂–ª–∏–≤–æ, —ó—ó —ñ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ —É—Å–∫–ª–∞–¥–Ω—é–≤–∞—Ç–∏).
