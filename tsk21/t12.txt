–î—É–∂–µ —Ö–æ—Ä–æ—à–µ —ñ –ª–æ–≥—ñ—á–Ω–µ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è. –†–æ–∑–≥–ª—è–Ω–µ–º–æ –∫–æ–∂–Ω—É —á–∞—Å—Ç–∏–Ω—É –ø–æ —á–µ—Ä–∑—ñ —Ç–∞ –¥–∞–º –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ –ø–æ—Ä–∞–¥–∏.

---

## ‚úÖ **1. –£–º–æ–≤–∞ –¥–ª—è `PLANNED`:**

```sql
(:P1_TAB_MODE = 'PLANNED' AND s.STATUS_MAIN_ID <> 0 AND t.PLANNING_DATE_END > SYSDATE)
```

### üîç –ö–æ–º–µ–Ω—Ç–∞—Ä:

* `s.STATUS_MAIN_ID <> 0` ‚Äî —Ñ—ñ–ª—å—Ç—Ä—É—î –Ω–µ–∞—Ä—Ö—ñ–≤–Ω—ñ/–∞–∫—Ç–∏–≤–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è.
* `t.PLANNING_DATE_END > SYSDATE` ‚Äî –ø–æ–∫–∞–∑—É—î —Ç—ñ, —è–∫—ñ —â–µ —Ç—Ä–∏–≤–∞—é—Ç—å –∞–±–æ –ø–ª–∞–Ω—É—é—Ç—å—Å—è –≤ –º–∞–π–±—É—Ç–Ω—å–æ–º—É.

### ‚úÖ –í–∏—Å–Ω–æ–≤–æ–∫:

–¶–µ **–∫–æ—Ä–µ–∫—Ç–Ω–æ**, —è–∫—â–æ –ø—ñ–¥ "–ó–∞–ø–ª–∞–Ω–æ–≤–∞–Ω—ñ" –º–∞—é—Ç—å—Å—è –Ω–∞ —É–≤–∞–∑—ñ **–≤—Å—ñ –∞–∫—Ç–∏–≤–Ω—ñ –∞–±–æ –º–∞–π–±—É—Ç–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è**, —è–∫—ñ —â–µ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω—ñ.

> üîî –ú–æ–∂–µ—à –¥–æ–¥–∞—Ç–∏ `t.ACTUAL_DATE_END IS NULL`, —è–∫—â–æ —Ö–æ—á–µ—à –ø—Ä–∏–±—Ä–∞—Ç–∏ —Ç—ñ, —â–æ –≤–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω—ñ.

---

## ‚úÖ **2. –£–º–æ–≤–∞ –¥–ª—è `SHIFT`:**

```sql
(:P1_TAB_MODE = 'SHIFT' AND s.STATUS_MAIN_ID <> 0
AND (
  (t.PLANNING_DATE_START < :P1_SHIFT_END AND t.PLANNING_DATE_END > :P1_SHIFT_END)
  OR (t.PLANNING_DATE_END BETWEEN :P1_SHIFT_START AND :P1_SHIFT_END)
)
)
```

### üîç –ö–æ–º–µ–Ω—Ç–∞—Ä:

* `(t.PLANNING_DATE_START < shift_end AND t.PLANNING_DATE_END > shift_end)` ‚Äî —Ü–µ **–∑–∞–≤–¥–∞–Ω–Ω—è –≤ –ø—Ä–æ—Ü–µ—Å—ñ**.
* `t.PLANNING_DATE_END BETWEEN shift_start AND shift_end` ‚Äî **–∑–∞–∫—ñ–Ω—á—É—î—Ç—å—Å—è –Ω–∞ –∑–º—ñ–Ω—ñ**.
* –ê–ª–µ —Ç–∏ —â–µ —Ö–æ—á–µ—à **–ø–æ—á–∞—Ç–æ–∫ –Ω–∞ –∑–º—ñ–Ω—ñ**, –∞ —Ü—å–æ–≥–æ –ø–æ–∫–∏ —â–æ **–Ω–µ–º–∞**.

---

## ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–∞ —É–º–æ–≤–∞ –¥–ª—è `SHIFT`, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:

–ü–æ–∫–∞–∑–∞—Ç–∏ **–≤—Å—ñ –∑–∞–≤–¥–∞–Ω–Ω—è, —è–∫—ñ**:

* –ø–æ—á–∏–Ω–∞—é—Ç—å—Å—è –Ω–∞ –∑–º—ñ–Ω—ñ
* –∞–±–æ –∑–∞–∫—ñ–Ω—á—É—é—Ç—å—Å—è –Ω–∞ –∑–º—ñ–Ω—ñ
* –∞–±–æ –±—É–ª–∏ –≤ –ø—Ä–æ—Ü–µ—Å—ñ –ø—Ä–æ—Ç—è–≥–æ–º –∑–º—ñ–Ω–∏ (–ø–µ—Ä–µ–∫—Ä–∏–≤–∞—é—Ç—å —ó—ó)

```sql
(:P1_TAB_MODE = 'SHIFT' AND s.STATUS_MAIN_ID <> 0
AND (
    (t.PLANNING_DATE_START BETWEEN :P1_SHIFT_START AND :P1_SHIFT_END) -- –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –Ω–∞ –∑–º—ñ–Ω—ñ
 OR (t.PLANNING_DATE_END BETWEEN :P1_SHIFT_START AND :P1_SHIFT_END)   -- –∑–∞–∫—ñ–Ω—á—É—î—Ç—å—Å—è –Ω–∞ –∑–º—ñ–Ω—ñ
 OR (t.PLANNING_DATE_START <= :P1_SHIFT_START AND t.PLANNING_DATE_END >= :P1_SHIFT_END) -- –ø–æ–≤–Ω—ñ—Å—Ç—é –æ—Ö–æ–ø–ª—é—î –∑–º—ñ–Ω—É
)
)
```

---

## üîÑ –Ø–∫—â–æ —Ö–æ—á–µ—à **—Ç—ñ–ª—å–∫–∏** —Ç—ñ, —â–æ **–ø–æ—á–∏–Ω–∞—é—Ç—å—Å—è –∞–±–æ –∑–∞–∫—ñ–Ω—á—É—é—Ç—å—Å—è –Ω–∞ –∑–º—ñ–Ω—ñ** (–∞ –Ω–µ –ø–µ—Ä–µ–∫—Ä–∏–≤–∞—é—Ç—å):

```sql
(:P1_TAB_MODE = 'SHIFT' AND s.STATUS_MAIN_ID <> 0
AND (
    t.PLANNING_DATE_START BETWEEN :P1_SHIFT_START AND :P1_SHIFT_END
 OR t.PLANNING_DATE_END BETWEEN :P1_SHIFT_START AND :P1_SHIFT_END
)
)
```

> ‚ùó –¶–µ **–≤–∏–∫–ª—é—á–∞—î** –¥–æ–≤–≥—ñ –∑–∞–≤–¥–∞–Ω–Ω—è, —è–∫—ñ —Ç—Ä–∏–≤–∞—é—Ç—å –∫—ñ–ª—å–∫–∞ –∑–º—ñ–Ω, –∞–ª–µ –Ω–µ —Å—Ç–∞—Ä—Ç—É—é—Ç—å/–Ω–µ –∑–∞–∫—ñ–Ω—á—É—é—Ç—å—Å—è —Å–∞–º–µ –Ω–∞ —Ü—ñ–π –∑–º—ñ–Ω—ñ.

---

## ‚úÖ –ü–æ—Ä–∞–¥–∞ —â–æ–¥–æ UX:

–Ø–∫—â–æ —Ç–∏ —Ö–æ—á–µ—à **—Ä–µ–∞–ª—å–Ω–æ –≤—ñ–¥—Ä—ñ–∑–Ω—è—Ç–∏ SHIFT –≤—ñ–¥ PLANNED**:

* `PLANNED`: –∑–∞–≤–¥–∞–Ω–Ω—è, —è–∫—ñ —â–µ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω—ñ (`ACTUAL_DATE_END IS NULL`) —ñ –≤ –º–∞–π–±—É—Ç–Ω—å–æ–º—É (`PLANNING_DATE_END > SYSDATE`)
* `SHIFT`: –ø–æ–¥—ñ—ó, —â–æ –º–∞—é—Ç—å **—Ä–µ–∞–ª—å–Ω–∏–π –∑–≤'—è–∑–æ–∫ —ñ–∑ –ø–æ—Ç–æ—á–Ω–æ—é –∑–º—ñ–Ω–æ—é** (–ø–æ—á–∞—Ç–æ–∫/–∫—ñ–Ω–µ—Ü—å/–ø—Ä–æ—Ü–µ—Å)

---

## üìå –ü—ñ–¥—Å—É–º–æ–∫:

| –¢–∞–±       | –ü–æ—Ç–æ—á–Ω–∞ —É–º–æ–≤–∞                      | –ü—Ä–æ–±–ª–µ–º–∞                         | –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è                                                 |
| --------- | ---------------------------------- | -------------------------------- | ---------------------------------------------------------- |
| `PLANNED` | `PLANNING_DATE_END > SYSDATE`      | –ú–æ–∂–µ –≤–∫–ª—é—á–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è –≤ –ø—Ä–æ—Ü–µ—Å—ñ | –ú–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ `ACTUAL_DATE_END IS NULL`                     |
| `SHIFT`   | –ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –ø–æ–∫—Ä–∏—Ç–æ –ø–æ—á–∞—Ç–æ–∫/–∫—ñ–Ω–µ—Ü—å | –ó–±—ñ–≥–∞—î—Ç—å—Å—è –∑ `PLANNED`           | –í–∫–∞–∑–∞—Ç–∏ —á—ñ—Ç–∫–æ `start between`, `end between`, `–ø–µ—Ä–µ–∫—Ä–∏—Ç—Ç—è` |

---

–Ø–∫—â–æ —Ö–æ—á–µ—à ‚Äî –º–æ–∂—É –∑—ñ–±—Ä–∞—Ç–∏ –ø–æ–≤–Ω—É —É–º–æ–≤—É —É —Ñ–æ—Ä–º–∞—Ç—ñ `WHERE` –¥–ª—è –æ–±–æ—Ö —Ç–∞–±—ñ–≤.
