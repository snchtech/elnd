–û—Å—å —è–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª **‚Äú–Ü—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω‚Äù** —É –∫–∞—Ä—Ç—Ü—ñ –∑–∞–≤–¥–∞–Ω–Ω—è –≤ Oracle APEX:

---

## üîÅ 1. **–£–º–æ–≤–Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–Ω–æ–ø–∫–∏ ‚Äú–Ü—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω‚Äù**

### ‚û§ –£ —Ä–µ–≥—ñ–æ–Ω—ñ **PL/SQL Dynamic Content**:

```plsql
DECLARE
  v_count NUMBER;
BEGIN
  IF :P6_TASK_ACTION_MODE = 0 THEN
    SELECT COUNT(*) INTO v_count
    FROM TASK_CHANGE_LOG
    WHERE OBJECT_ID = :P6_TASK_ID AND OBJECT_TYPE = 'TASK';

    IF v_count > 0 THEN
      -- HTML –∫–Ω–æ–ø–∫–∏
      HTP.P('<button type="button" class="t-Button t-Button--noLabel t-Button--icon t-Button--hot" onclick="apex.navigation.dialog(' ||
            '''f?p=APP_ID:MODAL_HISTORY:::::P_HISTORY_OBJECT_ID,P_HISTORY_OBJECT_TYPE:' ||
            :P6_TASK_ID || ',TASK'', {title: ''–Ü—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω'', height: 500, width: 800}); return false;">');
      HTP.P('<span class="t-Icon fa fa-history"></span>');
      HTP.P('</button>');
    END IF;
  END IF;
END;
```

> üîí **–£–º–æ–≤–∏:**
>
> * –ö–Ω–æ–ø–∫–∞ –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —Ä–µ–∂–∏–º = 0 (`VIEW`)
> * –Ü —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —î —Ö–æ—á–∞ –± –æ–¥–∏–Ω –∑–∞–ø–∏—Å –≤ `TASK_CHANGE_LOG` –ø–æ —Ü—å–æ–º—É `TASK_ID`.

---

## üìÑ 2. **–ú–æ–¥–∞–ª—å–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ ‚Äî —Å—Ç–æ—Ä—ñ–Ω–∫–∞ —ñ—Å—Ç–æ—Ä—ñ—ó (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, page 50)**

### ‚û§ –í—Ö—ñ–¥–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏:

* `P50_HISTORY_OBJECT_ID` ‚Äî `TASK_ID` –∞–±–æ `TEMPLATE_ID`
* `P50_HISTORY_OBJECT_TYPE` ‚Äî `'TASK'` –∞–±–æ `'TEMPLATE'`

---

## üìä 3. **–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π –∑–≤—ñ—Ç –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ 50**

**SQL-–∑–∞–ø–∏—Ç –¥–æ `TASK_CHANGE_LOG`:**

```sql
SELECT 
  LOG_DATE       AS "–î–∞—Ç–∞ –∑–º—ñ–Ω–∏",
  USER_ID        AS "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á",
  FIELD_NAME     AS "–ü–æ–ª–µ",
  OLD_VALUE      AS "–ë—É–ª–æ",
  NEW_VALUE      AS "–°—Ç–∞–ª–æ"
FROM TASK_CHANGE_LOG
WHERE OBJECT_ID = :P50_HISTORY_OBJECT_ID
  AND OBJECT_TYPE = :P50_HISTORY_OBJECT_TYPE
ORDER BY LOG_DATE DESC
```

---

## üß© 4. **–î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è (–∑–∞ –±–∞–∂–∞–Ω–Ω—è–º):**

### ‚úî –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω:

–Ø–∫—â–æ —Ö–æ—á–µ—à –±–∞—á–∏—Ç–∏ –∑–º—ñ–Ω–∏ –ø–æ –≥—Ä—É–ø–∞—Ö (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É—Å—ñ –ø–æ–ª—è, –∑–º—ñ–Ω–µ–Ω—ñ –æ–¥–Ω–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º –≤ –æ–¥–Ω—É –¥–∞—Ç—É):

```sql
SELECT 
  LOG_DATE,
  USER_ID,
  LISTAGG(FIELD_NAME || ': ' || OLD_VALUE || ' ‚Üí ' || NEW_VALUE, CHR(10)) 
      WITHIN GROUP (ORDER BY FIELD_NAME) AS CHANGES
FROM TASK_CHANGE_LOG
WHERE OBJECT_ID = :P50_HISTORY_OBJECT_ID
  AND OBJECT_TYPE = :P50_HISTORY_OBJECT_TYPE
GROUP BY LOG_DATE, USER_ID
ORDER BY LOG_DATE DESC
```

---

## üß™ 5. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**

üîπ –°—Ç–≤–æ—Ä–∏ –ø—Ä–æ—Å—Ç–µ –∑–∞–≤–¥–∞–Ω–Ω—è ‚Üí –∑–º—ñ–Ω–∏ –π–æ–≥–æ –Ω–∞–∑–≤—É/–¥–∞—Ç—É
üîπ –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Å—è, —â–æ `TASK_CHANGE_LOG` –Ω–∞–ø–æ–≤–Ω—é—î—Ç—å—Å—è
üîπ –í—ñ–¥–∫—Ä–∏–π —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑–∞–≤–¥–∞–Ω–Ω—è ‚Äî –∑‚Äô—è–≤–ª—è—î—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ ‚Äú–Ü—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω‚Äù
üîπ –ü–µ—Ä–µ–≤—ñ—Ä –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ ‚Üí –ø–æ–≤–∏–Ω–Ω–∞ –±—É—Ç–∏ —Ö—Ä–æ–Ω–æ–ª–æ–≥—ñ—è –∑–º—ñ–Ω

---

–•–æ—á–µ—à ‚Äî –º–æ–∂—É –æ–¥—Ä–∞–∑—É –∑—Ä–æ–±–∏—Ç–∏ —â–µ –π –ø—Ä–∏–∫–ª–∞–¥ **–¥–ª—è —à–∞–±–ª–æ–Ω—ñ–≤ (TEMPLATE)** –∞–±–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑ —Ç–∞–±–∞–º–∏ (–ø–µ—Ä–µ–º–∏–∫–∞—á –º—ñ–∂ –∑–∞–≤–¥–∞–Ω–Ω—è–º —ñ —à–∞–±–ª–æ–Ω–æ–º).
