–¢–∞–∫, **—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π `apex.confirm` –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î –≤–≤–µ–¥–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É (textarea)**. –ê–ª–µ –≤–∏ –º–æ–∂–µ—Ç–µ **—Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω–µ –º–æ–¥–∞–ª—å–Ω–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∑ textarea**, —è–∫–µ –≤–∏–≥–ª—è–¥–∞—î –ø–æ–¥—ñ–±–Ω–æ –¥–æ `apex.confirm` —ñ –ø—Ä–∞—Ü—é—î –∞–Ω–∞–ª–æ–≥—ñ—á–Ω–æ.

---

## ‚úÖ –í–∞—Ä—ñ–∞–Ω—Ç: –ö–∞—Å—Ç–æ–º–Ω–µ –º–æ–¥–∞–ª—å–Ω–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∑ –ø–æ–ª–µ–º `textarea`

### üîß 1. **HTML –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞**

–†–æ–∑–º—ñ—Å—Ç–∏ **–ø—Ä–∏—Ö–æ–≤–∞–Ω–∏–π —Ä–µ–≥—ñ–æ–Ω (Static Content)** –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ –∑ `Static ID = customConfirmDialog`:

```html
<div id="customConfirmDialog" style="display: none;" title="–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∞–Ω—É–ª—é–≤–∞–Ω–Ω—è">
  <p>–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –∞–Ω—É–ª—é–≤–∞—Ç–∏ –∑–∞–ø–∏—Å?</p>
  <label for="cancelReason">–ü—Ä–∏—á–∏–Ω–∞ –∞–Ω—É–ª—é–≤–∞–Ω–Ω—è:</label>
  <textarea id="cancelReason" rows="3" style="width:100%"></textarea>
</div>
```

---

### üß† 2. **JavaScript –¥–ª—è –≤–∏–∫–ª–∏–∫—É —Ç–∞ –æ–±—Ä–æ–±–∫–∏**

–î–æ–¥–∞–π JS-—Ñ—É–Ω–∫—Ü—ñ—é –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ —É —Ä–æ–∑–¥—ñ–ª `Function and Global Variable Declaration` –∞–±–æ –ø—Ä—è–º–æ –≤ `Execute when Page Loads`.

```js
function showCustomConfirm(onConfirmCallback) {
  $('#cancelReason').val(''); // –û—á–∏—Å—Ç–∏—Ç–∏ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π —Ç–µ–∫—Å—Ç

  $('#customConfirmDialog').dialog({
    modal: true,
    buttons: {
      "–û–ö": function () {
        const reason = $('#cancelReason').val();
        $(this).dialog("close");
        onConfirmCallback(reason);
      },
      "–°–∫–∞—Å—É–≤–∞—Ç–∏": function () {
        $(this).dialog("close");
      }
    }
  });
}
```

---

### üß© 3. **–í–∏–∫–ª–∏–∫ –∑ –∫–Ω–æ–ø–∫–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∞–Ω—É–ª—é–≤–∞–Ω–Ω—è)**

–£ –¥—ñ—ó –≤–∞—à–æ—ó –∫–Ω–æ–ø–∫–∏, –∑–∞–º—ñ—Å—Ç—å `apex.confirm(...)`, –≤–∏–∫–ª–∏—á–∏ `showCustomConfirm`:

```js
showCustomConfirm(function(reasonText) {
  // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –ø—Ä–∏—á–∏–Ω—É –≤ –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏–π item
  $s('P6_CANCEL_REASON', reasonText);

  // –í–∏–∫–ª–∏–∫–∞—î–º–æ –ø—Ä–æ—Ü–µ—Å Apex (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, AJAX –∞–±–æ Submit)
  apex.server.process('ANUL_TASK', {
    x01: $v('P6_TASK_ID'),
    x02: reasonText
  }, {
    success: function(pData) {
      apex.message.showPageSuccess("–ó–∞–≤–¥–∞–Ω–Ω—è –∞–Ω—É–ª—å–æ–≤–∞–Ω–æ.");
      // –ú–æ–∂–Ω–∞ –æ–Ω–æ–≤–∏—Ç–∏ —Ä–µ–≥—ñ–æ–Ω–∏ –∞–±–æ –≤–∏–∫–æ–Ω–∞—Ç–∏ refresh
    }
  });
});
```

---

### üì• 4. **–ü—Ä–∏—Ö–æ–≤–∞–Ω–∏–π item P6\_CANCEL\_REASON (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)**

–ù–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ —Å—Ç–≤–æ—Ä—ñ—Ç—å –ø—Ä–∏—Ö–æ–≤–∞–Ω–µ –ø–æ–ª–µ `P6_CANCEL_REASON`, —è–∫–µ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —É –ø—Ä–æ—Ü–µ—Å–∞—Ö.

---

### üõ†Ô∏è 5. **PL/SQL –ø—Ä–æ—Ü–µ—Å, —è–∫–∏–π –∑–∞–ø–∏—Å—É—î –ø—Ä–∏—á–∏–Ω—É –∞–Ω—É–ª—é–≤–∞–Ω–Ω—è**

```plsql
BEGIN
  INSERT INTO SIGNATUREHISTORY (
    TASK_ID,
    ACTION_TYPE,
    NOTE,
    USER_ID,
    ACTION_DATE
  )
  VALUES (
    APEX_APPLICATION.G_X01,
    'CANCEL',
    APEX_APPLICATION.G_X02,
    NVL(sys_context('APEX$SESSION','APP_USER'), USER),
    SYSDATE
  );
END;
```

---

## ‚úÖ –ü–µ—Ä–µ–≤–∞–≥–∏

* –ü–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≤–∏–≥–ª—è–¥–æ–º —ñ –ª–æ–≥—ñ–∫–æ—é.
* –ü—Ä–∞—Ü—é—î —è–∫ `apex.confirm`, –∞–ª–µ –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –≤–≤–µ–¥–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö.
* –ú–æ–∂–Ω–∞ –ø–µ—Ä–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –π –¥–ª—è —ñ–Ω—à–∏—Ö –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω—å (–≤–∏–¥–∞–ª–µ–Ω–Ω—è, —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∑ –ø—Ä–∏–º—ñ—Ç–∫–æ—é —Ç–æ—â–æ).

---

–ì–æ—Ç–æ–≤–∏–π —Ç–∞–∫–æ–∂ –∑—Ä–æ–±–∏—Ç–∏ —Ü—é —Ñ–æ—Ä–º—É —è–∫ **–æ–∫—Ä–µ–º—É –º–æ–¥–∞–ª—å–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É APEX**, —è–∫—â–æ –±–∞–∂–∞—î—à ‚Äî –∞–ª–µ —Ä—ñ—à–µ–Ω–Ω—è —á–µ—Ä–µ–∑ `jQuery UI Dialog` —à–≤–∏–¥—à–µ –≤ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –π –∫—Ä–∞—â–µ —ñ–º—ñ—Ç—É—î `apex.confirm`.
