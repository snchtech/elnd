–©–æ–± **–∑–∞—Ñ—ñ–∫—Å—É–≤–∞—Ç–∏ –¥–∞—Ç—É –∞–Ω—É–ª—é–≤–∞–Ω–Ω—è –¥–ª—è –Ω–µ–¥–æ–∑–∞–ø–æ–≤–Ω–µ–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å**, —è–∫—ñ –ø–æ—Ç—Ä–∞–ø–ª—è—é—Ç—å –≤ –∞—Ä—Ö—ñ–≤ –Ω–∞–≤—ñ—Ç—å –±–µ–∑ –∑–∞–ø–∏—Å—É `actual_date_end` (—Ç–æ–±—Ç–æ –±–µ–∑ `SIGNATUREHISTORY` –¥–ª—è `stage_id = 6`), –ø—Ä–æ–ø–æ–Ω—É—é –Ω–∞—Å—Ç—É–ø–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è:

---

### ‚úÖ 1. **–ó–±–µ—Ä—ñ–≥–∞—Ç–∏ –¥–∞—Ç—É –∞–Ω—É–ª—é–≤–∞–Ω–Ω—è –≤ `SIGNATUREHISTORY` –Ω–∞–≤—ñ—Ç—å –¥–ª—è –Ω–µ–ø–æ–≤–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å**

–ù–∞–≤—ñ—Ç—å —è–∫—â–æ –Ω–µ –≤—Å—ñ –µ—Ç–∞–ø–∏ –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ, –ø—Ä–∏ –∞–Ω—É–ª—é–≤–∞–Ω–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è –º–æ–∂–Ω–∞ **–≤—Ä—É—á–Ω—É –≤—Å—Ç–∞–≤–∏—Ç–∏ –∑–∞–ø–∏—Å** –≤ `SIGNATUREHISTORY` –∑—ñ:

* `STAGE_ID = 6` (–µ—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è/–∞–Ω—É–ª—é–≤–∞–Ω–Ω—è)
* `STATUS_ID = 14` (–∞–Ω—É–ª—å–æ–≤–∞–Ω–æ)
* `TASK_ID = <your_id>`
* `NOTE = <–ø—Ä–∏—á–∏–Ω–∞>`
* `ACTION_DATE = SYSDATE`
* `USER_ID = :APP_USER`

üîß –¶–µ –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ —è–∫ —á–∞—Å—Ç–∏–Ω—É –ø—Ä–æ—Ü–µ—Å—É –∞–Ω—É–ª—é–≤–∞–Ω–Ω—è (—á–µ—Ä–µ–∑ `apex.server.process` –∞–±–æ –¥–∏–Ω–∞–º—ñ—á–Ω—É –¥—ñ—é PL/SQL).

---

### ‚úÖ 2. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ó–±–µ—Ä—ñ–≥–∞—Ç–∏ –¥–∞—Ç—É –∞–Ω—É–ª—é–≤–∞–Ω–Ω—è –≤ —Å–∞–º–æ–º—É TASKS**

–Ø–∫—â–æ –Ω–µ —Ö–æ—á–µ—à —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —à—Ç—É—á–Ω–∏–π –∑–∞–ø–∏—Å –≤ `SIGNATUREHISTORY`, –º–æ–∂–Ω–∞:

* –î–æ–¥–∞—Ç–∏ –Ω–æ–≤—É –∫–æ–ª–æ–Ω–∫—É –≤ `TASKS`:

  ```sql
  CANCELED_DATE DATE
  ```
* –ü—Ä–∏ –∞–Ω—É–ª—é–≤–∞–Ω–Ω—ñ –∑–∞–ø–∏—Å—É –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —Ü—é –∫–æ–ª–æ–Ω–∫—É –≤—Ä—É—á–Ω—É:

  ```sql
  UPDATE TASKS
  SET STATUS_ID = 14,
      CANCELED_DATE = SYSDATE
  WHERE ID = :TASK_ID;
  ```

---

### ‚úÖ 3. **–í–∏–≤–µ–¥–µ–Ω–Ω—è –≤ –∑–≤—ñ—Ç—ñ**

–ü–æ—Ç—ñ–º —É –∑–≤—ñ—Ç–∞—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π:

```sql
COALESCE(
  (
    SELECT h.ACTION_DATE
    FROM SIGNATUREHISTORY h
    JOIN SIGNATURERIGHTS r ON r.TASK_ID = t.ID AND r.STAGES_ID = 6
    WHERE h.STAGE_ID = r.STAGES_ID AND h.TASK_ID = t.ID AND h.STATUS_ID = 14
    FETCH FIRST 1 ROWS ONLY
  ),
  t.CANCELED_DATE
) AS ACTUAL_DATE_END
```

---

### üîÅ –†–µ–∑—é–º–µ:

| –í–∏–ø–∞–¥–æ–∫                       | –†—ñ—à–µ–Ω–Ω—è                                                                                            |
| ----------------------------- | -------------------------------------------------------------------------------------------------- |
| –ó–∞–ø–æ–≤–Ω–µ–Ω—ñ –µ—Ç–∞–ø–∏               | –í–∏–≤–æ–¥–∏—Ç–∏ –¥–∞—Ç—É –∑ `SIGNATUREHISTORY`                                                                 |
| –ß–∞—Å—Ç–∫–æ–≤–æ/–Ω–µ–∑–∞–ø–æ–≤–Ω–µ–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è | –ó–±–µ—Ä—ñ–≥–∞—Ç–∏ –¥–∞—Ç—É –∞–Ω—É–ª—é–≤–∞–Ω–Ω—è –≤ `TASKS.CANCELED_DATE` –∞–±–æ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∑–∞–ø–∏—Å –≤ `SIGNATUREHISTORY` –≤—Ä—É—á–Ω—É |

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ, –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ –æ—Ñ–æ—Ä–º–∏—Ç–∏ –ø—Ä–æ—Ü–µ—Å –∞–Ω—É–ª—é–≤–∞–Ω–Ω—è –∑ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º –æ–±–æ—Ö —Ç–∞–±–ª–∏—Ü—å (–∞–±–æ –æ–¥–Ω–æ–≥–æ –∑ –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤).
