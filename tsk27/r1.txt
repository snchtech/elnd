‚úÖ **–¢–æ–±—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏ –ª–µ–≥–∫—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –ø–µ—Ä–µ–¥ –æ—Å–Ω–æ–≤–Ω–æ—é –ª–æ–≥—ñ–∫–æ—é** ‚Äî —á–∏ —î –≤–∑–∞–≥–∞–ª—ñ –∑–∞–º—ñ—â–µ–Ω–Ω—è –¥–ª—è `:P0_USER_ID` —É `tab_no_replacer`. –Ø–∫—â–æ –Ω–µ–º–∞—î ‚Äî **–≤–∑–∞–≥–∞–ª—ñ –Ω—ñ—á–æ–≥–æ –Ω–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏** (—â–æ–± –Ω–µ –≤–∏—Ç—Ä–∞—á–∞—Ç–∏ —Ä–µ—Å—É—Ä—Å–∏).

---

### üîß **–û–Ω–æ–≤–ª–µ–Ω–∏–π PL/SQL-–∫–æ–¥ (Server-Side DA –∞–±–æ Before Header)**

```plsql
DECLARE
  l_tab_no_original   NUMBER;
  l_username_original VARCHAR2(100);
  l_position_id       NUMBER;
  l_department_id     NUMBER;
  l_unit_id           NUMBER;
  l_exists            BOOLEAN := FALSE;
BEGIN
  -- –°–ø–æ—á–∞—Ç–∫—É –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞: —á–∏ —ñ—Å–Ω—É—î –∑–∞–ø–∏—Å –∑–∞–º—ñ—â–µ–Ω–Ω—è –¥–ª—è —Ü—å–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
  SELECT CASE WHEN COUNT(*) > 0 THEN TRUE ELSE FALSE END
  INTO l_exists
  FROM user_substitution
  WHERE tab_no_replacer = :P0_USER_ID
    AND SYSDATE BETWEEN date_start AND NVL(date_end, SYSDATE + 1);

  IF l_exists THEN
    -- –Ø–∫—â–æ —ñ—Å–Ω—É—î –∞–∫—Ç–∏–≤–Ω–µ –∑–∞–º—ñ—â–µ–Ω–Ω—è ‚Äî –¥—ñ—Å—Ç–∞—î–º–æ –¥–∞–Ω—ñ
    SELECT tab_no_original, username_original
    INTO l_tab_no_original, l_username_original
    FROM user_substitution
    WHERE tab_no_replacer = :P0_USER_ID
      AND SYSDATE BETWEEN date_start AND NVL(date_end, SYSDATE + 1)
      AND ROWNUM = 1;

    :P0_NEW_USER_ID := l_tab_no_original;
    :P0_NEW_USERNAME := l_username_original;

    -- –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ –∑ USERS
    SELECT position_id, department_id, unit_id
    INTO :P0_NEW_POSITION_ID, :P0_NEW_DEPARTMENT_ID, :P0_NEW_UNIT_ID
    FROM users
    WHERE tab_no = l_tab_no_original;
  ELSE
    -- –Ø–∫—â–æ –∑–∞–º—ñ—â–µ–Ω–Ω—è –Ω–µ–º–∞ ‚Äî –æ—á–∏—â–∞—î–º–æ item'–∏
    :P0_NEW_USER_ID := NULL;
    :P0_NEW_USERNAME := NULL;
    :P0_NEW_POSITION_ID := NULL;
    :P0_NEW_DEPARTMENT_ID := NULL;
    :P0_NEW_UNIT_ID := NULL;
  END IF;
END;
```

---

### üí° –©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—å:

1. ‚úÖ –î–æ–¥–∞–Ω–æ –æ–∫—Ä–µ–º—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É —á–µ—Ä–µ–∑ `COUNT(*)` ‚Üí `l_exists`.
2. ‚úÖ –û—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ª–∏—à–µ **—è–∫—â–æ –∑–∞–ø–∏—Å —î**.
3. ‚úÖ –Ø–∫—â–æ –∑–∞–ø–∏—Å—ñ–≤ –Ω–µ–º–∞—î ‚Äî –Ω—ñ—á–æ–≥–æ –Ω–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è (—ñ –Ω–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è).

---

### ‚ö†Ô∏è –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (—Ç—ñ–ª—å–∫–∏ –æ–¥–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞)

–ú–æ–∂–µ—à —É–Ω–∏–∫–Ω—É—Ç–∏ `COUNT(*)`, —ñ –≤—ñ–¥—Ä–∞–∑—É –ø—Ä–æ–±—É–≤–∞—Ç–∏ `SELECT ... INTO` –∑ `NO_DATA_FOUND`, —è–∫ —Ç–∏ –≤–∂–µ –º–∞—î—à. –ê–ª–µ —Ü–µ–π –≤–∞—Ä—ñ–∞–Ω—Ç —ñ–∑ `l_exists`:

* –ó—Ä–æ–∑—É–º—ñ–ª—ñ—à–∏–π.
* –õ–µ–≥—à–µ —Ä–æ–∑—à–∏—Ä—é–≤–∞—Ç–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ª–æ–≥—É–≤–∞—Ç–∏ –ø–æ–¥—ñ—ó, –≤–∏–≤–æ–¥–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ç–æ—â–æ).
* –ù–µ –∑–∞–ø—É—Å–∫–∞—î –¥—Ä—É–≥–∏–π SELECT, —è–∫—â–æ –Ω–µ–º–∞—î –ø–æ—Ç—Ä–µ–±–∏.

---

–Ø–∫—â–æ —Ö–æ—á–µ—à ‚Äî –º–æ–∂—É –≤–∏–Ω–µ—Å—Ç–∏ —Ü–µ –≤ `Application Process` –∞–±–æ `Initialization PL/SQL Code` –Ω–∞ —Ä—ñ–≤–Ω—ñ –≤—Å—å–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É.
