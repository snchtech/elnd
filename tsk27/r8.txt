–©–æ–± —Å—Ç–≤–æ—Ä–∏—Ç–∏ —ñ–Ω–¥–µ–∫—Å —É —Ç–∞–±–ª–∏—Ü—ñ `SIGNATURERIGHTS` –¥–ª—è –ø–æ–ª—è `SUBTASK_ID`, —è–∫–∏–π –ø–æ—Å–∏–ª–∞—î—Ç—å—Å—è –Ω–∞ `TASK_SUBTASKS(ID)`, –≤–∏–∫–æ–Ω–∞–π:

---

### ‚úÖ –ü—Ä–æ—Å—Ç–∏–π —ñ–Ω–¥–µ–∫—Å –Ω–∞ `SUBTASK_ID`

```sql
CREATE INDEX idx_signaturerights_subtask_id ON signaturerights (subtask_id);
```

–¶–µ–π —ñ–Ω–¥–µ–∫—Å:

* –ø—Ä–∏—à–≤–∏–¥—à–∏—Ç—å –∑–∞–ø–∏—Ç–∏ —Ç–∏–ø—É:

  ```sql
  SELECT * FROM signaturerights WHERE subtask_id = :ID;
  ```
* –Ω–µ –ø–µ—Ä–µ–≤—ñ—Ä—è—î –∑–≤‚Äô—è–∑–æ–∫ —ñ–∑ `TASK_SUBTASKS` (—Ü–µ —Ä–æ–±–∏—Ç—å foreign key, —è–∫—â–æ –≤—ñ–Ω —î).

---

### üîí (–û–ø—Ü—ñ–π–Ω–æ) –°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π –∫–ª—é—á, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ –∑–≤‚Äô—è–∑–æ–∫:

```sql
ALTER TABLE signaturerights
ADD CONSTRAINT fk_sr_subtask
FOREIGN KEY (subtask_id)
REFERENCES task_subtasks (id)
DEFERRABLE INITIALLY DEFERRED;
```

> `DEFERRABLE INITIALLY DEFERRED` ‚Äî –¥–æ–∑–≤–æ–ª—è—î –≤—Å—Ç–∞–≤–ª—è—Ç–∏ –¥–∞–Ω—ñ –≤ –æ–±–æ—Ö —Ç–∞–±–ª–∏—Ü—è—Ö —É —Ä–∞–º–∫–∞—Ö –æ–¥–Ω—ñ—î—ó —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó (–∑—Ä—É—á–Ω–æ, —è–∫—â–æ —Ç–∏ –Ω–µ —Ö–æ—á–µ—à –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞ –º–æ–º–µ–Ω—Ç –≤—Å—Ç–∞–≤–∫–∏, –∞ –ª–∏—à–µ –Ω–∞ –º–æ–º–µ–Ω—Ç –∫–æ–º—ñ—Ç—É).

---

### üìå –ü—ñ–¥—Å—É–º–æ–∫:

| –î—ñ—è                                               | –ö–æ–º–∞–Ω–¥–∞                                                                        |
| ------------------------------------------------- | ------------------------------------------------------------------------------ |
| üîç –Ü–Ω–¥–µ–∫—Å –¥–ª—è –ø—Ä–∏—à–≤–∏–¥—à–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤                | `CREATE INDEX idx_signaturerights_subtask_id ON signaturerights (subtask_id);` |
| üîê (–û–ø—Ü—ñ–π–Ω–æ) –ó–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ –∑–≤‚Äô—è–∑–æ–∫ –∑ TASK\_SUBTASKS | `ALTER TABLE ... ADD CONSTRAINT fk ... FOREIGN KEY ...`                        |

–•–æ—á–µ—à ‚Äî –º–æ–∂—É –ø–æ–∫–∞–∑–∞—Ç–∏, —è–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ —ñ–Ω–¥–µ–∫—Å —É–∂–µ —ñ—Å–Ω—É—î.
