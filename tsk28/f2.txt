–Ø–∫—â–æ —Ç–∏ **–≤ `user_substitution` –≤ –ø–æ–ª—ñ `tab_no_original` (–∞–±–æ —ñ–Ω—à–æ–º—É –ø–æ–ª—ñ `user_id`) –∑–∞–≤–∂–¥–∏ –±—É–¥–µ—à –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —á–∏—Å–ª–æ**, —ñ:

* —è–∫—â–æ **–∑–∞–º—ñ—â–µ–Ω–Ω—è –∑–∞ –ø–æ—Å–∞–¥–æ—é/–¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–º/—é–Ω—ñ—Ç–æ–º** ‚Äî —Ç–æ `tab_no_original = 1` (—É–º–æ–≤–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è),
* —è–∫—â–æ **–∑–∞–º—ñ—â–µ–Ω–Ω—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞** ‚Äî —Ç–æ `tab_no_original = user_id`,

—Ç–æ –º–∏ –º–æ–∂–µ–º–æ **–ø–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ `:P0_NEW_USER_ID` –∑ `:P0_USER_ID`**:

---

### ‚úÖ **–û–Ω–æ–≤–ª–µ–Ω–∏–π –∫–æ–¥ (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–∏–π —ñ –Ω–∞–¥—ñ–π–Ω–∏–π)**

```plsql
BEGIN
  IF :P0_NEW_USER_ID IS NULL THEN
    RETURN 0; -- –Ω–µ–º–∞—î –∑–∞–º—ñ—â–µ–Ω–Ω—è
  ELSIF :P0_NEW_USER_ID = :P0_USER_ID THEN
    RETURN 0; -- –∑–∞–º—ñ—â–µ–Ω–Ω—è —Å–µ–±–µ ‚Äî —Ç–∞–∫–æ–∂ –Ω—ñ
  ELSE
    RETURN 1; -- –∑–∞–º—ñ—â–µ–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω–µ (–º–æ–∂–µ –±—É—Ç–∏ user_id –∞–±–æ "1")
  END IF;
END;
```

---

### ‚úÖ –ü–æ—è—Å–Ω–µ–Ω–Ω—è:

* –Ø–∫—â–æ `:P0_NEW_USER_ID = :P0_USER_ID` ‚Üí —Ü–µ –Ω–µ –∑–∞–º—ñ—â–µ–Ω–Ω—è.
* –Ø–∫—â–æ `:P0_NEW_USER_ID = 1` ‚Üí —Ü–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –∑–∞–º—ñ—â–µ–Ω–Ω—è –π–¥–µ –ø–æ `position_id + department_id + unit_id`, —ñ –≤–æ–Ω–æ **–≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è** –≤—ñ–¥ –ø–æ—Ç–æ—á–Ω–æ–≥–æ.
* –Ø–∫—â–æ `:P0_NEW_USER_ID` = `user_id —ñ–Ω—à–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞` ‚Üí —Ç–∞–∫–æ–∂ –∑–∞–º—ñ—â–µ–Ω–Ω—è.

---

### ‚ùó –û–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ:

1. –£ `Page Load` —á–∏ `DA`, —è–∫–∏–π –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î `:P0_NEW_USER_ID`, —Ç—Ä–µ–±–∞ –≥–∞—Ä–∞–Ω—Ç—É–≤–∞—Ç–∏:

   * –Ø–∫—â–æ `user_substitution.tab_no_original IS NULL` ‚Üí —Ç–æ–¥—ñ `:P0_NEW_USER_ID := 1`
   * –Ø–∫—â–æ —î —Å–ø—Ä–∞–≤–∂–Ω—ñ–π user ‚Üí `:P0_NEW_USER_ID := tab_no_original`

2. –£—Å—ñ —ñ–Ω—à—ñ item (`P0_NEW_POSITION_ID`, ...) —Ç–∞–∫–æ–∂ –º–∞—é—Ç—å –±—É—Ç–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ, —â–æ–± –ª–æ–≥—ñ–∫–∞ –∑–∞–º—ñ—â–µ–Ω–Ω—è –≤ —ñ–Ω—à–∏—Ö –º—ñ—Å—Ü—è—Ö –ø—Ä–∞—Ü—é–≤–∞–ª–∞ –∫–æ—Ä–µ–∫—Ç–Ω–æ.

---

üîÑ –Ø–∫—â–æ —Ö–æ—á–µ—à, —è –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ –æ–Ω–æ–≤–∏—Ç–∏ **PL/SQL-–∫–æ–¥ Page Load DA** –¥–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è `P0_NEW_USER_ID := 1`, —è–∫—â–æ `tab_no_original` –ø–æ—Ä–æ–∂–Ω—î.
