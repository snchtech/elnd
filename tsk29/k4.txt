–ü—Ä–∏—á–∏–Ω–∞, —á–æ–º—É —Ç–∏ –æ—Ç—Ä–∏–º—É—î—à `"POSITION, DEPARTMENT . ."` ‚Äî —Ü–µ —Ç–µ, —â–æ —Ç–∏ –∑–∞–≤–∂–¥–∏ –¥–æ–¥–∞—î—à —Ç—Ä–∏ —á–∞—Å—Ç–∏–Ω–∏ (–ø–æ–∑–∏—Ü—ñ—è, –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç, —é–∑–µ—Ä–Ω–µ–π–º/–ü–Ü–ë) –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–æ–≥–æ, —á–∏ –≤–æ–Ω–∏ NULL —á–∏ –Ω—ñ:

```sql
NVL(pos.NAME, '') || ', ' || NVL(dep.NAME, '') || ', ' || ...
```

–ö–æ–ª–∏ `u2.USERFIRSTNAME` —ñ `u2.LASTNAME` = NULL, —Ç–æ –ø—ñ—Å–ª—è `SUBSTR(...)` —Ü–µ –ø–æ—Ä–æ–∂–Ω—ñ —Ä—è–¥–∫–∏, —ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî `", , "`.

---

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è: –§–æ—Ä–º—É–≤–∞—Ç–∏ –±–ª–æ–∫ –ü–Ü–ë –ª–∏—à–µ —è–∫—â–æ USER\_ID —ñ—Å–Ω—É—î, —ñ —Å–∫–ª–µ—é–≤–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –Ω–µ–ø–æ—Ä–æ–∂–Ω—ñ —á–∞—Å—Ç–∏–Ω–∏

–û—Å—å **–æ–Ω–æ–≤–ª–µ–Ω–∏–π –±–ª–æ–∫**, —è–∫–∏–π:

* –§–æ—Ä–º—É—î –ü–Ü–ë –ª–∏—à–µ –∫–æ–ª–∏ `sr.USER_ID IS NOT NULL`
* –£–Ω–∏–∫–∞—î –∑–∞–π–≤–∏—Ö `, ,`
* –§–æ—Ä–º–∞—Ç: **"–ü–Ü–ë / –ø–æ—Å–∞–¥–∞ / –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç"**, –∞–±–æ –ø—Ä–æ—Å—Ç–æ "–ø–æ—Å–∞–¥–∞ / –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç", —è–∫—â–æ –Ω–µ–º–∞ —é–∑–µ—Ä–∞

---

### üîß –û–ù–û–í–õ–ï–ù–ò–ô –ö–û–î `CREATOR_INFO`:

```sql
(
  SELECT 
    '<span class="task_creator">' ||
      RTRIM(
        -- –Ø–∫—â–æ —î USER_ID ‚Äì –ø—Ä—ñ–∑–≤–∏—â–µ + —ñ–Ω—ñ—Ü—ñ–∞–ª–∏
        CASE 
          WHEN sr.USER_ID IS NOT NULL THEN 
            SUBSTR(u2.LASTNAME, 1, 1) || LOWER(SUBSTR(u2.LASTNAME, 2)) || ' ' ||
            SUBSTR(u2.USERFIRSTNAME, 1, 1) || '. ' ||
            SUBSTR(u2.USERLASTNAME, 1, 1) || '.'
          ELSE ''
        END ||
        CASE WHEN sr.USER_ID IS NOT NULL AND (pos.NAME IS NOT NULL OR dep.NAME IS NOT NULL) THEN ', ' ELSE '' END ||
        -- –ü–æ—Å–∞–¥–∞
        NVL(pos.NAME, '') ||
        CASE WHEN pos.NAME IS NOT NULL AND dep.NAME IS NOT NULL THEN ', ' END ||
        -- –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç
        NVL(dep.NAME, '')
      , ', ') ||  -- –ü—Ä–∏–±—Ä–∞—Ç–∏ –∑–∞–π–≤—É –∫–æ–º—É
    '</span>' ||

    -- SIGNATURE INFO
    CASE 
      WHEN sr.USER_ID IS NOT NULL THEN
        (
          SELECT 
            CASE 
              WHEN h.SIGNER_BY = sr.USER_ID THEN 
                '<span class="signer_info">' || TO_CHAR(h.SIGNER_DATE, 'DD.MM.YYYY HH24:MI') || '</span>'
              ELSE 
                '<span class="signer_info">–í–∏–¥–∞–Ω–æ: ' || us.USERNAME || ', ' || TO_CHAR(h.SIGNER_DATE, 'DD.MM.YYYY HH24:MI') || '</span>'
            END
          FROM SIGNATUREHISTORY h
          JOIN USER_TABLE us ON us.ID = h.SIGNER_BY
          WHERE h.SIGNRIGHT_ID = sr.ID
          FETCH FIRST ROW ONLY
        )
      ELSE
        (
          SELECT '<span class="signer_info">' || us.USERNAME || ', ' || TO_CHAR(h.SIGNER_DATE, 'DD.MM.YYYY HH24:MI') || '</span>'
          FROM SIGNATUREHISTORY h
          JOIN USER_TABLE us ON us.ID = h.SIGNER_BY
          WHERE h.SIGNRIGHT_ID = sr.ID
          FETCH FIRST ROW ONLY
        )
    END
  FROM SIGNATURERIGHTS sr
  LEFT JOIN POSITION_TABLE pos ON pos.ID = sr.POSITION_ID
  LEFT JOIN DEPARTMENT_TABLE dep ON dep.ID = sr.DEPARTMENT_ID
  LEFT JOIN USER_TABLE u2 ON u2.ID = sr.USER_ID
  WHERE sr.TASK_ID = t.ID AND sr.STAGES_ID = 1
  FETCH FIRST ROW ONLY
) AS CREATOR_INFO
```

---

### üß™ –ü—Ä–∏–∫–ª–∞–¥–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤:

1. –Ø–∫—â–æ —î —é–∑–µ—Ä:

```
–Ü–≤–∞–Ω–æ–≤ –ê.–ê., –Ü–Ω–∂–µ–Ω–µ—Ä, –í—ñ–¥–¥—ñ–ª –ø—Ä–æ–¥–∞–∂—ñ–≤
```

2. –Ø–∫—â–æ —é–∑–µ—Ä–∞ –Ω–µ–º–∞—î:

```
–Ü–Ω–∂–µ–Ω–µ—Ä, –í—ñ–¥–¥—ñ–ª –ø—Ä–æ–¥–∞–∂—ñ–≤
```

3. –Ø–∫—â–æ –ª–∏—à–µ –ø–æ–∑–∏—Ü—ñ—è:

```
–Ü–Ω–∂–µ–Ω–µ—Ä
```

4. –Ø–∫—â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ–º–∞—î ‚Äî –±—É–¥–µ –ø–æ—Ä–æ–∂–Ω—ñ–π –±–ª–æ–∫ –±–µ–∑ –∑–∞–π–≤–∏—Ö –∫–æ–º.

---

–•–æ—á–µ—à ‚Äî –º–æ–∂–µ–º–æ —â–µ –¥–æ–¥–∞—Ç–∏ —Å—Ç–∏–ª—ñ–∑–∞—Ü—ñ—é –ø—ñ–¥ —Ñ–æ—Ä–º–∞—Ç `–Ü–≤–∞–Ω–æ–≤ –ê.–ê. / –Ü–Ω–∂–µ–Ω–µ—Ä / –í—ñ–¥–¥—ñ–ª`.
