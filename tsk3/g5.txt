–¶–µ **–¥—É–∂–µ –≤–∞–∂–ª–∏–≤–µ —ñ –ø—Ä–∞–≤–∏–ª—å–Ω–µ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è** üî• ‚Äî —è–∫ **–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ APEX Automation**, —â–æ–±:

- ‚è±Ô∏è –ø–µ—Ä—ñ–æ–¥–∏—á–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è —Å—Ç–≤–æ—Ä—é–≤–∞–ª–∏—Å—å **–≤—á–∞—Å–Ω–æ**,
- üß† —ñ –ø—Ä–∏ —Ü—å–æ–º—É **–Ω–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞–ª–∏** –ë–î.

---

## üéØ –¶—ñ–ª—å:

> ‚úÖ –û–±—Ä–æ–±–∏—Ç–∏ –≤—Å—ñ –∑–∞–≤–¥–∞–Ω–Ω—è, —è–∫—ñ –º–∞—é—Ç—å –±—É—Ç–∏ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ  
> üß© –ó —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –¥–≤–æ—Ö —Ä–µ–∂–∏–º—ñ–≤:
> - **`DAILY` (–ø–µ—Ä—ñ–æ–¥ —É –¥–Ω—è—Ö)**
> - **`HOURLY` (–∑–∞–ø—É—Å–∫–∏ —â–æ–¥–Ω—è –≤ –ø–µ–≤–Ω—ñ –≥–æ–¥–∏–Ω–∏)**

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è: **–û–¥–Ω–∞ Automation ‚Üí –Ü–Ω—Ç–µ—Ä–≤–∞–ª 5 —Ö–≤–∏–ª–∏–Ω**

### –ß–æ–º—É —Å–∞–º–µ —Ç–∞–∫:

| –ü—Ä–∏—á–∏–Ω–∞                            | –ü–æ—è—Å–Ω–µ–Ω–Ω—è                                                                 |
|------------------------------------|--------------------------------------------------------------------------|
| ‚è±Ô∏è 5 —Ö–≤ ‚Äî "–∑–æ–ª–æ—Ç–∞ —Å–µ—Ä–µ–¥–∏–Ω–∞"        | –ù–µ –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂—É—î –ë–î, –∞–ª–µ –≥–∞—Ä–∞–Ω—Ç—É—î –≤—á–∞—Å–Ω—ñ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó                     |
| üß© –ü—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è `HOURLY`           | –î–∞—î –∑–º–æ–≥—É "–≤–ø—ñ–π–º–∞—Ç–∏" –ø–æ—Ç—Ä—ñ–±–Ω–∏–π –º–æ–º–µ–Ω—Ç —ñ–∑ ¬±2 —Ö–≤ –ø–æ—Ö–∏–±–∫–∏                   |
| üìÖ –ü—Ä–∞—Ü—é—î —ñ –¥–ª—è `DAILY`             | –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î `NEXT_RUN_DATE <= SYSDATE`                             |
| ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞                        | –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –±–∞–≥–∞—Ç–æ Automation'—ñ–≤ –∞–±–æ Jobs                     |

---

## ‚öôÔ∏è –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î –≤ Automation (–∑–∞–≥–∞–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞)

```plsql
DECLARE
  v_now DATE := SYSDATE;
BEGIN
  -- –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —à–∞–±–ª–æ–Ω–∏ –∑ DAILY —Ä–µ–∂–∏–º–æ–º
  FOR t IN (
    SELECT * FROM TASK_TEMPLATES
    WHERE PERIOD_MODE = 'DAILY'
      AND NEXT_RUN_DATE <= v_now
      AND STATUS_ID = (SELECT ID FROM MAIN_STATUS WHERE CODE = 'ACTIVE')
  ) LOOP
    GENERATE_TASK(t.ID);  -- —Ç–≤–æ—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó
  END LOOP;

  -- –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ HOURLY —à–∞–±–ª–æ–Ω–∏
  FOR t IN (
    SELECT * FROM TASK_TEMPLATES
    WHERE PERIOD_MODE = 'HOURLY'
      AND STATUS_ID = (SELECT ID FROM MAIN_STATUS WHERE CODE = 'ACTIVE')
  ) LOOP
    FOR time_str IN (
      SELECT REGEXP_SUBSTR(t.HOURLY_TIMES, '[^,]+', 1, LEVEL) AS time_val
      FROM dual
      CONNECT BY LEVEL <= REGEXP_COUNT(t.HOURLY_TIMES, ',') + 1
    ) LOOP
      DECLARE
        v_target DATE := TRUNC(v_now) + TO_DSINTERVAL('0 ' || time_str.time_val || ':00');
        v_offset DATE := v_target + NUMTODSINTERVAL(t.HOURLY_OFFSET_MIN, 'MINUTE');
      BEGIN
        -- –Ø–∫—â–æ –∑–∞—Ä–∞–∑ ¬±2 —Ö–≤–∏–ª–∏–Ω–∏ –≤—ñ–¥ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–æ–≤–æ–≥–æ —á–∞—Å—É ‚Üí –∑–∞–ø—É—Å–∫–∞—î–º–æ
        IF ABS((v_now - v_offset) * 1440) < 2 THEN
          GENERATE_TASK(t.ID);
        END IF;
      END;
    END LOOP;
  END LOOP;
END;
```

---

## üìÖ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è APEX Automation

| –ü–æ–ª–µ                 | –ó–Ω–∞—á–µ–Ω–Ω—è                          |
|----------------------|-----------------------------------|
| **Schedule**         | `Every 5 Minutes`                 |
| **Type**             | PL/SQL Code                       |
| **Enabled**          | –¢–∞–∫                               |
| **Run As User**      | `APEX$PUBLIC_USER` –∞–±–æ —Å–∏—Å—Ç–µ–º–Ω–∏–π  |
| **Error Handling**   | –õ–æ–≥—É–≤–∞—Ç–∏ –ø–æ–º–∏–ª–∫–∏, –æ–ø—Ü—ñ–π–Ω–æ email   |

---

## üîí –ë–µ–∑–ø–µ–∫–∞ —ñ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

- ‚úÖ –û–±–º–µ–∂–∏—Ç–∏ `WHERE STATUS_ID = ACTIVE`
- ‚úÖ –ö–µ—à—É–≤–∞—Ç–∏ `MAIN_STATUS.ID` —É –∑–º—ñ–Ω–Ω—É
- ‚úÖ –ù–µ –∑–∞–ø—É—Å–∫–∞—Ç–∏ `GENERATE_TASK()` –¥–≤—ñ—á—ñ –¥–ª—è –æ–¥–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω—É ‚Äî **–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –º—ñ—Ç–∫—É –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –∑–∞–ø—É—Å–∫—É** –∞–±–æ `NEXT_RUN_DATE`

---

## üí° –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è: —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–æ —á–∞—Å—É

–©–æ–± –Ω–µ –ø–µ—Ä–µ–±–∏—Ä–∞—Ç–∏ –≤—Å—ñ `TASK_TEMPLATES`, –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –≤ `WHERE`:
```sql
AND (
   (PERIOD_MODE = 'DAILY' AND NEXT_RUN_DATE <= SYSDATE)
OR (PERIOD_MODE = 'HOURLY' AND INSTR(HOURLY_TIMES, TO_CHAR(SYSDATE, 'HH24:MI')) > 0)
)
```
(–∞–ª–µ –¥–ª—è `HOURLY` –∑ offset ‚Äî –∫—Ä–∞—â–µ –∑–∞–ª–∏—à–∏—Ç–∏ —Ä—É—á–Ω—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É —á–∞—Å—É, —è–∫ –≤–∏—â–µ)

---

## ‚úÖ –í–∏—Å–Ω–æ–≤–æ–∫:

| –ü–∞—Ä–∞–º–µ—Ç—Ä              | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è                      |
|------------------------|-----------------------------------|
| ‚è±Ô∏è –Ü–Ω—Ç–µ—Ä–≤–∞–ª            | –ö–æ–∂–Ω—ñ 5 —Ö–≤–∏–ª–∏–Ω                    |
| üß† –õ–æ–≥—ñ–∫–∞              | –û–¥–Ω–∞ Automation –æ–±—Ä–æ–±–ª—è—î –æ–±–∏–¥–≤–∞ —Ä–µ–∂–∏–º–∏ |
| üß© –†–µ–∂–∏–º–∏               | `DAILY`, `HOURLY` –∑ offset       |
| üßº –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏            | –í—Ä–∞—Ö–æ–≤—É—î —á–∞—Å –∑–∞–ø—É—Å–∫—É + —É–Ω–∏–∫–∞—î –¥—É–±–ª—é–≤–∞–Ω—å |

---

üîß –•–æ—á–µ—à ‚Äî –¥–æ–ø–æ–º–æ–∂—É:
- –û—Ñ–æ—Ä–º–∏—Ç–∏ `GENERATE_TASK(t.ID)` —è–∫ –ø—Ä–æ—Ü–µ–¥—É—Ä—É;
- –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ Automation —á–µ—Ä–µ–∑ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å APEX;
- –î–æ–¥–∞—Ç–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤.

üì¶ –ì–æ—Ç–æ–≤–∏–π —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏?