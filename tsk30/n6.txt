–©–æ–± —É –∑–≤—ñ—Ç—ñ (IR) –¥–æ–¥–∞—Ç–∏ **—á–µ–∫–±–æ–∫—Å –Ω–∞–ø—Ä–æ—Ç–∏ –∫–æ–∂–Ω–æ–≥–æ —Ä—è–¥–∫–∞** —Ç–∞ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –æ–±—Ä–æ–±–∫—É –≤–∏–±—Ä–∞–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å –∫–Ω–æ–ø–∫–æ—é **¬´–û–∑–Ω–∞–π–æ–º–∏—Ç–∏—Å—å —ñ–∑ –æ–±—Ä–∞–Ω–∏–º–∏¬ª**, –∑—Ä–æ–±–∏ —Ç–∞–∫:

---

## ‚úÖ –ö–†–û–ö 1: –î–æ–¥–∞–π –∫–æ–ª–æ–Ω–∫—É –∑ —á–µ–∫–±–æ–∫—Å–æ–º —É SQL-–∑–∞–ø–∏—Ç IR

–û–Ω–æ–≤–ª–µ–Ω–∏–π –∑–∞–ø–∏—Ç:

```sql
SELECT 
  t.ID as TASK_ID,
  apex_item.checkbox(1, t.ID) AS SELECT_ROW, -- –ß–µ–∫–±–æ–∫—Å (name="f01", –∑–Ω–∞—á–µ–Ω–Ω—è = TASK_ID)
  
  '–ó–º—ñ–Ω–∞ ' || TO_CHAR(:PXX_SHIFT_START, 'DD.MM.YYYY HH24:MI') || ' ‚Äî ' || TO_CHAR(:PXX_SHIFT_END, 'HH24:MI') AS TASK_SHIFT,
  
  CASE 
    WHEN t.TASK_TYPE = 2 THEN 
      (SELECT LISTAGG(st.SUBTASK_CONTENT, '; ') 
         WITHIN GROUP (ORDER BY st.SUBTASK_ORDER)
       FROM TASK_SUBTASKS st 
       WHERE st.TASK_ID = t.ID)
    ELSE 
      t.TASK_CONTENT
  END AS TASK_CONTENT,
  
  t.PLANNING_DATE_START,
  t.PLANNING_DATE_END,
  
  'f?p=&APP_ID.:6:&SESSION.::&DEBUG.:6:P6_TASK_ID:' || t.ID AS LINK_TO_DETAILS

FROM TASKS t
WHERE NOT EXISTS (
    SELECT 1 
    FROM TASK_VIEWED v 
    WHERE v.TASK_ID = t.ID 
      AND v.USER_ID = :PXX_USER_ID 
      AND v.DATE_VIEWED BETWEEN :PXX_SHIFT_START AND :PXX_SHIFT_END
)
```

> ‚ö†Ô∏è –û–±–æ–≤'—è–∑–∫–æ–≤–æ: —É –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—è—Ö –∑–≤—ñ—Ç—É –≤ **Column Attributes** –¥–ª—è `SELECT_ROW`:

* Set **Escape special characters** = `No`
* Set **Display as** = `Standard Report Column`

---

## ‚úÖ –ö–†–û–ö 2: –î–æ–¥–∞–π –∫–Ω–æ–ø–∫—É **¬´–û–∑–Ω–∞–π–æ–º–∏—Ç–∏—Å—å —ñ–∑ –æ–±—Ä–∞–Ω–∏–º–∏¬ª**

* –ö–Ω–æ–ø–∫–∞ —Ç–∏–ø—É: **Submit Page**
* Static ID: `btn_confirm_selected`

---

## ‚úÖ –ö–†–û–ö 3: –°—Ç–≤–æ—Ä–∏ –æ–±—Ä–æ–±–Ω–∏–∫ (Process) —Ç–∏–ø—É **PL/SQL**

* –ù–∞–∑–≤–∞: `Insert Task Viewed`
* –¢–∏–ø: *PL/SQL Code*
* **Condition**: *When Button Pressed* ‚Üí `btn_confirm_selected`

```plsql
FOR i IN 1..APEX_APPLICATION.G_F01.COUNT LOOP
  INSERT INTO TASK_VIEWED (ID, USER_ID, TASK_ID, DATE_VIEWED)
  VALUES (
    TASK_VIEWED_SEQ.NEXTVAL, 
    :PXX_USER_ID, 
    APEX_APPLICATION.G_F01(i), 
    SYSDATE
  );
END LOOP;
```

---

## ‚úÖ –ö–†–û–ö 4: –û–Ω–æ–≤–∏ –∑–≤—ñ—Ç –ø—ñ—Å–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è

* –ü—ñ—Å–ª—è –≤—Å—Ç–∞–≤–∫–∏ –¥–æ–¥–∞–π **True Action** ‚Üí *Refresh Region*
* –û–±–µ—Ä–∏ —Å–≤–æ—é IR —Ä–µ–≥—ñ–æ–Ω (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `Tasks_IR`)

---

## üîç –†–µ–∑—É–ª—å—Ç–∞—Ç

1. –ó‚Äô—è–≤–∏—Ç—å—Å—è –∫–æ–ª–æ–Ω–∫–∞ –∑ —á–µ–∫–±–æ–∫—Å–∞–º–∏ –≤ –∫–æ–∂–Ω–æ–º—É —Ä—è–¥–∫—É.
2. –ü—ñ—Å–ª—è –≤–∏–±–æ—Ä—É —á–µ–∫–±–æ–∫—Å—ñ–≤ —ñ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –∫–Ω–æ–ø–∫–∏ **¬´–û–∑–Ω–∞–π–æ–º–∏—Ç–∏—Å—å —ñ–∑ –æ–±—Ä–∞–Ω–∏–º–∏¬ª**:

   * –î–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `TASK_VIEWED`.
   * –ó–≤—ñ—Ç –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è, —ñ –≤–∂–µ –æ–∑–Ω–∞–π–æ–º–ª–µ–Ω—ñ –∑–∞–ø–∏—Å–∏ –∑–Ω–∏–∫–∞—é—Ç—å.

---

üîî –•–æ—á–µ—à, —è –ø–æ–∫–∞–∂—É —â–µ –π —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é "–û–∑–Ω–∞–π–æ–º–∏—Ç–∏—Å—å —ñ–∑ —É—Å—ñ–º–∞" (–º–∞—Å–æ–≤–æ, –±–µ–∑ —á–µ–∫–±–æ–∫—Å—ñ–≤)?
