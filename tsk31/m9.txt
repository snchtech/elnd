–©–æ–± –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ `POPUP LOV` —É Oracle APEX –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è `DEPARTMENT`, —è–∫–µ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ **—Ä–µ–∂–∏–º—É –∑–∞–º—ñ—â–µ–Ω–Ω—è** (—Ç–æ–±—Ç–æ `P0_SUBSTITUTION_MODE = 1` —á–∏ `0`), —Ç–∏ –º–æ–∂–µ—à –∑—Ä–æ–±–∏—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω–µ:

---

### üîß **1. SQL-–∑–∞–ø–∏—Ç –¥–ª—è LOV –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ç–∞–±–ª–∏—Ü—ñ `USERS`**

```sql
SELECT
  u.UCHASTOK_SHORT_NAME AS DISPLAY_VALUE,
  u.UCHASTOK AS RETURN_VALUE
FROM
  USERS u
WHERE
  u.SPR_DEPARTMENT_ID = CASE
    WHEN :P0_SUBSTITUTION_MODE = 1 THEN :P0_NEW_DEPARTMENT_ID
    ELSE :P0_CUR_USER_DEPARTMENT
  END
```

---

### üß© **2. –Ø–∫ —Ü–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏:**

–£ –ø–æ–ª—ñ `List of Values` –≤ APEX:

* **Type**: `SQL Query`
* **Return value**: `UCHASTOK`
* **Display value**: `UCHASTOK_SHORT_NAME` –∞–±–æ `UCHASTOK` (—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)

---

### ‚úÖ **3. –î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–æ—Ä–∞–¥–∏**

* –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Å—è, —â–æ `P0_SUBSTITUTION_MODE`, `P0_NEW_DEPARTMENT_ID`, `P0_CUR_USER_DEPARTMENT` –¥–æ—Å—Ç—É–ø–Ω—ñ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ (–º–∞—é—Ç—å –±—É—Ç–∏ `Session State`).
* –Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—à —Ç–∞–±–ª–∏—Ü—é `STRUCTR` –∑–∞–º—ñ—Å—Ç—å `USERS` –¥–ª—è LOV, –∑–∞–º—ñ–Ω–∏ —É SQL `FROM USERS` –Ω–∞ `FROM STRUCTR`.

---

### üìå –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –∑ `TSEH_ID` (—è–∫—â–æ —Ñ—ñ–ª—å—Ç—Ä —ñ–¥–µ –ø–æ `TSEH_ID`, –∞ –Ω–µ `SPR_DEPARTMENT_ID`)

```sql
SELECT
  s.UCHASTOK_SHORT_NAME AS DISPLAY_VALUE,
  s.UCHASTOK AS RETURN_VALUE
FROM
  STRUCTR s
WHERE
  s.TSEH_ID = CASE
    WHEN :P0_SUBSTITUTION_MODE = 1 THEN :P0_NEW_DEPARTMENT_ID
    ELSE :P0_CUR_USER_DEPARTMENT
  END
  AND s.DATE_END IS NULL
```

---

üîî –Ø–∫—â–æ —Ç—Ä–µ–±–∞ –ø–æ–∫–∞–∑–∞—Ç–∏ –ª–∏—à–µ –∑–Ω–∞—á–µ–Ω–Ω—è `UCHASTOK`, —è–∫–µ –≤–∂–µ –æ–±—Ä–∞–Ω–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º, —ñ –Ω–µ –¥–∞–≤–∞—Ç–∏ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–º—ñ–Ω–∏—Ç–∏ ‚Äî –∫—Ä–∞—â–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π **Display Only** item –∑ `Display as Text`.

–ì–æ—Ç–æ–≤–∏–π –¥–æ–ø–æ–º–æ–≥—Ç–∏ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ü–µ –≤ APEX-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ —á–∏ –∑ Dynamic Action.
