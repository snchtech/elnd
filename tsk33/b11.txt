–î–æ–¥–∞—Ç–∏ `EXCEPTION`-–æ–±—Ä–æ–±–∫—É –¥–æ –∫–æ–¥—É, —â–æ —Å—Ç–≤–æ—Ä—é—î –∫–æ–ª–µ–∫—Ü—ñ—ó –≤ Oracle APEX, ‚Äî —Ü–µ **—Ö–æ—Ä–æ—à–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞**, –æ—Å–æ–±–ª–∏–≤–æ –∫–æ–ª–∏ —Ç–∏:

* –ü—Ä–∞—Ü—é—î—à –∑ **–¥–∂–µ—Ä–µ–ª–∞–º–∏ —á–µ—Ä–µ–∑ DBLINK**, —è–∫—ñ –º–æ–∂—É—Ç—å –¥–∞—Ç–∏ –ø–æ–º–∏–ª–∫—É –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è.
* –°—Ç–≤–æ—Ä—é—î—à –∫–æ–ª–µ–∫—Ü—ñ—ó **–≤ Before Header**, —â–æ –≤–ø–ª–∏–≤–∞—î –Ω–∞ —Ä–µ–Ω–¥–µ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏.
* –ú–∞—î—à –∑–∞–ø–∏—Ç–∏, —è–∫—ñ **–º–æ–∂—É—Ç—å –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –ø–æ–º–∏–ª–∫—É —Ç–∏–ø—É ORA-01403 (no data)** –∞–±–æ —â–æ—Å—å –ø–æ–¥—ñ–±–Ω–µ.

---

## ‚úÖ –©–æ –¥–∞—î –æ–±–≥–æ—Ä—Ç–∫–∞ `EXCEPTION`?

1. **–ó–∞—Ö–∏—Å—Ç —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –≤—ñ–¥ –ø–∞–¥—ñ–Ω–Ω—è** ‚Äî —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –Ω–µ –≤–ø–∞–¥–µ –∑ –ø–æ–º–∏–ª–∫–æ—é APEX, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –∫–æ–ª–µ–∫—Ü—ñ—é –Ω–µ –≤–¥–∞–ª–æ—Å—è —Å—Ç–≤–æ—Ä–∏—Ç–∏.
2. **–ö—Ä–∞—â–∞ UX** ‚Äî –∑–∞–º—ñ—Å—Ç—å "–≤–∏—Å–∫–∞–∫—É–≤–∞–Ω–Ω—è" –ø–æ–º–∏–ª–∫–∏, —Ç–∏ –º–æ–∂–µ—à –ø–æ–∫–∞–∑–∞—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–π –∑–≤—ñ—Ç –∞–±–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
3. **–õ–µ–≥—à–µ –¥—ñ–∞–≥–Ω–æ—Å—Ç—É–≤–∞—Ç–∏** ‚Äî –º–æ–∂–µ—à –¥–æ–¥–∞—Ç–∏ `apex_debug.message`, —â–æ–± –ª–æ–≥—É–≤–∞—Ç–∏ –ø–æ–º–∏–ª–∫–∏.

---

## üîß –Ø–∫ –∫—Ä–∞—â–µ –æ—Ñ–æ—Ä–º–∏—Ç–∏ `EXCEPTION` —É —Ç–≤–æ—î–º—É –∫–æ–¥—ñ

–û—Å—å –¥–æ–æ–ø—Ä–∞—Ü—å–æ–≤–∞–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç —Ç–≤–æ–≥–æ –∫–æ–¥—É –∑ **EXCEPTION-–±–ª–æ–∫–∞–º–∏**:

```plsql
DECLARE
  v_collection VARCHAR2(255);
BEGIN
  IF :P6_TASK_MODE = 0 AND :P6_TASK_TYPE = 2 THEN
    -- === TASK_SUBTASKS_COLLECTION ===
    BEGIN
      IF APEX_COLLECTION.COLLECTION_EXISTS('TASK_SUBTASKS_COLLECTION') THEN
        APEX_COLLECTION.DELETE_COLLECTION('TASK_SUBTASKS_COLLECTION');
      END IF;

      APEX_COLLECTION.CREATE_COLLECTION('TASK_SUBTASKS_COLLECTION');

      IF :P6_TASK_ID IS NOT NULL THEN
        FOR r IN (
          SELECT
            TASK_ID,
            SUBTASK_CONTENT,
            PLANNING_DATE_END,
            PARENT_ID,
            SUBTASK_ORDER,
            STATUS_ID,
            ID
          FROM TaskTracker.TASK_SUBTASKS@TO_TASKTRACKER10
          WHERE TASK_ID = :P6_TASK_ID
        ) LOOP
          APEX_COLLECTION.ADD_MEMBER(
            p_collection_name => 'TASK_SUBTASKS_COLLECTION',
            p_c001 => r.TASK_ID,
            p_c002 => r.SUBTASK_CONTENT,
            p_d001 => r.PLANNING_DATE_END,
            p_c003 => r.PARENT_ID,
            p_c004 => r.SUBTASK_ORDER,
            p_c005 => r.STATUS_ID,
            p_d002 => SYSDATE,
            p_d003 => NULL,
            p_c006 => :P0_CUR_USER_TABNO,
            p_c007 => NULL,
            p_c009 => r.ID,
            p_n001 => 0
          );
        END LOOP;
      END IF;
    EXCEPTION
      WHEN OTHERS THEN
        apex_debug.message('Error in TASK_SUBTASKS_COLLECTION: %s', SQLERRM);
    END;

  ELSIF :P6_TASK_MODE = 1 AND :P6_TASK_TYPE = 2 THEN
    -- === TASK_TEMPLATE_SUBTASKS_COLLECTION ===
    BEGIN
      IF APEX_COLLECTION.COLLECTION_EXISTS('TASK_TEMPLATE_SUBTASKS_COLLECTION') THEN
        APEX_COLLECTION.DELETE_COLLECTION('TASK_TEMPLATE_SUBTASKS_COLLECTION');
      END IF;

      APEX_COLLECTION.CREATE_COLLECTION('TASK_TEMPLATE_SUBTASKS_COLLECTION');

      IF :P6_TASK_ID IS NOT NULL THEN
        FOR r IN (
          SELECT
            TEMPLATE_ID,
            SUBTASK_CONTENT,
            PARENT_ID,
            SUBTASK_ORDER,
            STATUS_ID,
            ID,
            TERM_DAYS
          FROM TaskTracker.TASK_TEMPLATE_SUBTASKS@TO_TASKTRACKER10
          WHERE TEMPLATE_ID = :P6_TASK_ID
        ) LOOP
          APEX_COLLECTION.ADD_MEMBER(
            p_collection_name => 'TASK_TEMPLATE_SUBTASKS_COLLECTION',
            p_c001 => r.TEMPLATE_ID,
            p_c002 => r.SUBTASK_CONTENT,
            p_d001 => NULL,
            p_c003 => r.PARENT_ID,
            p_c004 => r.SUBTASK_ORDER,
            p_c005 => r.STATUS_ID,
            p_d002 => SYSDATE,
            p_d003 => NULL,
            p_c006 => :P0_CUR_USER_TABNO,
            p_c007 => NULL,
            p_c009 => r.ID,
            p_n001 => 1,
            p_n002 => r.TERM_DAYS
          );
        END LOOP;
      END IF;
    EXCEPTION
      WHEN OTHERS THEN
        apex_debug.message('Error in TASK_TEMPLATE_SUBTASKS_COLLECTION: %s', SQLERRM);
    END;
  END IF;
END;
```

---

## üß† –©–æ —Å–∞–º–µ –ø–æ–∫—Ä–∏–≤–∞—î—Ç—å—Å—è —Ü–∏–º –ø—ñ–¥—Ö–æ–¥–æ–º:

| –ú–æ–∂–ª–∏–≤–∞ –ø–æ–º–∏–ª–∫–∞                            | –ü–æ–∫—Ä–∏–≤–∞—î—Ç—å—Å—è? | –†–µ–∑—É–ª—å—Ç–∞—Ç                        |
| ------------------------------------------ | ------------- | -------------------------------- |
| DBLINK –Ω–µ –ø—Ä–∞—Ü—é—î (ORA-12154, ORA-12541...) | ‚úÖ             | –ù–µ –æ–±–≤–∞–ª–∏—Ç—å —Å—Ç–æ—Ä—ñ–Ω–∫—É             |
| –ö–æ–ª–µ–∫—Ü—ñ—è –≤–∂–µ —ñ—Å–Ω—É—î                         | ‚úÖ             | –ë–µ–∑–ø–µ—á–Ω–æ –≤–∏–¥–∞–ª–∏—Ç—å—Å—è —ñ —Å—Ç–≤–æ—Ä–∏—Ç—å—Å—è |
| –ü–æ–º–∏–ª–∫–∏ –≤ `ADD_MEMBER` (null, —Ñ–æ—Ä–º–∞—Ç...)   | ‚úÖ             | –õ–æ–≥—É—é—Ç—å—Å—è –≤ `apex_debug`         |

---

## üìå –ü–æ—Ä–∞–¥–∞:

> –Ø–∫—â–æ —Ö–æ—á–µ—à, –º–æ–∂–µ—à **–∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ –ø–æ–º–∏–ª–∫–∏ –≤ `apex_debug` —Ç—ñ–ª—å–∫–∏ –≤ debug —Ä–µ–∂–∏–º—ñ**:

```plsql
IF apex_application.g_debug THEN
  apex_debug.message('...');
END IF;
```

---

## üîö –í–∏—Å–Ω–æ–≤–æ–∫:

‚úÖ –¢–∞–∫, **–≤–∞—Ä—Ç–æ –æ–±–≥–æ—Ä—Ç–∞—Ç–∏ –∫—Ä–∏—Ç–∏—á–Ω—ñ —á–∞—Å—Ç–∏–Ω–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ–ª–µ–∫—Ü—ñ–π —É `BEGIN ... EXCEPTION`**, –æ—Å–æ–±–ª–∏–≤–æ:

* –Ø–∫—â–æ –∫–æ–ª–µ–∫—Ü—ñ—ó —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è **–ø—ñ–¥ —á–∞—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏**
* –Ø–∫—â–æ —î **–∑–æ–≤–Ω—ñ—à–Ω—ñ –¥–∂–µ—Ä–µ–ª–∞** —á–µ—Ä–µ–∑ DBLINK
* –Ø–∫—â–æ **–≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –∫–æ–ª–µ–∫—Ü—ñ—ó –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞**, —ñ –∫—Ä–∞—â–µ –ø–æ–∫–∞–∑–∞—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É –±–µ–∑ –Ω–µ—ó

üîî –•–æ—á–µ—à ‚Äî —è –º–æ–∂—É –∞–¥–∞–ø—Ç—É–≤–∞—Ç–∏ —Ü—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —É –≤–∏–≥–ª—è–¥—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –∞–±–æ —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–æ—ó –ø—Ä–æ—Ü–µ–¥—É—Ä–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–ª–µ–∫—Ü—ñ–π —ñ–∑ –ª–æ–≥—É–≤–∞–Ω–Ω—è–º.
