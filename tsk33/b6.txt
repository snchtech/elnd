–©–æ–± **–ø—ñ—Å–ª—è `refresh` Interactive Grid (IG)** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é–≤–∞–≤—Å—è **progress bar**, —è–∫–∏–π —Ñ–æ—Ä–º—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ **Dynamic Action (DA) + AJAX Callback Process**, –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—É –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å:

---

## ‚úÖ –ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ö–µ–º–∞:

1. ‚úÖ **IG –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è (Refresh)**
2. ‚úÖ –ü—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è ‚Üí –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è **AJAX-–ø—Ä–æ—Ü–µ—Å** –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä–∞
3. ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—Å—Ç–∞–≤–ª—è—î—Ç—å—Å—è —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `#progressBarContainer`

---

## üîß –ü—Ä–∏–∫–ª–∞–¥ –ø–æ–∫—Ä–æ–∫–æ–≤–æ—ó —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó:

---

### üîπ 1. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä–∞ (—É HTML)

–£ —Ä–µ–≥—ñ–æ–Ω—ñ Static Content –∞–±–æ –ø—ñ–¥ IG –¥–æ–¥–∞–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

```html
<div id="progressBarContainer"></div>
```

---

### üîπ 2. –°—Ç–≤–æ—Ä–∏ **AJAX Callback Process**

* –ù–∞–∑–≤–∞: `LOAD_PROGRESS_BAR`
* –¢–∏–ø: PL/SQL
* –ö–æ–¥:

```plsql
DECLARE
  l_html CLOB := '';
BEGIN
  -- –¢—É—Ç —Ç–≤—ñ–π –∫–æ–¥ –ø–æ–±—É–¥–æ–≤–∏ –ø—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä–∞, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:
  l_html := '<div class="subtask-progress">';

  FOR rec IN (
    SELECT MAX(CASE WHEN sh.ID IS NOT NULL THEN 1 ELSE 0 END) AS IS_SIGNED
    FROM TaskTracker.SIGNATURERIGHTS@TO_TASKTRACKER10 sr
    LEFT JOIN TaskTracker.SIGNATUREHISTORY@TO_TASKTRACKER10 sh
      ON sr.ID = sh.SIGNRIGHT_ID
    WHERE sr.TASK_ID = :P5_TASK_ID
    GROUP BY sr.SUBTASK_ID
    ORDER BY 1 DESC
  ) LOOP
    IF rec.IS_SIGNED = 1 THEN
      l_html := l_html || '<span class="subtask-box filled"></span>';
    ELSE
      l_html := l_html || '<span class="subtask-box empty"></span>';
    END IF;
  END LOOP;

  l_html := l_html || '</div>';

  -- –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ HTML
  HTP.P(l_html);
END;
```

> üîÅ –ù–µ –∑–∞–±—É–¥—å –≤–∫–∞–∑–∞—Ç–∏ `P5_TASK_ID` —É ‚ÄúPage Items to Submit‚Äù —É JavaScript (–Ω–∏–∂—á–µ).

---

### üîπ 3. –î–æ–¥–∞–π JavaScript-—Ñ—É–Ω–∫—Ü—ñ—é, —è–∫–∞ –≤–∏–∫–ª–∏–∫–∞—î AJAX —ñ –≤—Å—Ç–∞–≤–ª—è—î –ø—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä:

```javascript
function refreshProgressBar() {
  apex.server.process("LOAD_PROGRESS_BAR", {
    pageItems: "#P5_TASK_ID"
  }, {
    success: function (pData) {
      $("#progressBarContainer").html(pData);
    },
    error: function (jqXHR, textStatus, errorThrown) {
      console.error("Progress bar error:", textStatus);
    }
  });
}
```

---

### üîπ 4. –î–æ–¥–∞–π Dynamic Action:

* **Name**: `Refresh Progress Bar After IG Refresh`
* **Event**: `Custom`

  * **Event Name**: `refresh_progress_bar`
* **Action**: `Execute JavaScript Code`

  ```javascript
  refreshProgressBar();
  ```

---

### üîπ 5. –î–æ–¥–∞–π JS —É –ø–æ–¥—ñ—é `After Refresh` IG:

* –í—ñ–¥–∫—Ä–∏–π IG ‚Üí –≤–∫–ª–∞–¥–∫–∞ **Advanced** ‚Üí **Events**
* –î–æ–¥–∞–π:

  * **Event**: `After Refresh`
  * **Action**: `Execute JavaScript Code`:

    ```javascript
    apex.event.trigger(document, 'refresh_progress_bar');
    ```

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:

* –ö–æ–ª–∏ —Ç–∏ –≤–∏–∫–ª–∏–∫–∞—î—à `apex.region("myIG").refresh();`
* –ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è IG ‚Üí –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è AJAX ‚Üí –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –±–ª–æ–∫ `#progressBarContainer`

---

## üìå –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –±–µ–∑ Custom Event

–Ø–∫—â–æ –Ω–µ —Ö–æ—á–µ—à —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –æ–∫—Ä–µ–º—É –ø–æ–¥—ñ—é, –ø—Ä–æ—Å—Ç–æ –¥–æ–¥–∞–π `refreshProgressBar();` –ø—Ä—è–º–æ –ø—ñ—Å–ª—è `IG refresh`:

```javascript
apex.region("myIG").refresh();
refreshProgressBar();
```

–ê–ª–µ —Ç–æ–¥—ñ —î —Ä–∏–∑–∏–∫, —â–æ –ø—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä –æ–Ω–æ–≤–∏—Ç—å—Å—è **–¥–æ** –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è IG.

---

–•–æ—á–µ—à ‚Äî –Ω–∞–¥—ñ—à–ª–∏ —Ç–æ—á–Ω—É –Ω–∞–∑–≤—É IG, ID –ø—Ä–æ–≥—Ä–µ—Å-–±–ª–æ–∫—É, —ñ —è –∑–≥–µ–Ω–µ—Ä—É—é –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –∫–æ–¥ –ø—ñ–¥ —Ç–µ–±–µ.
