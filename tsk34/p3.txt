–û—Å—å –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–∏–π —ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥—É –¥–ª—è —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è `EXECUTOR_INFO`, —è–∫–∏–π:

1. –í–∏–ø—Ä–∞–≤–ª—è—î –≤—Å—ñ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–Ω—ñ –ø–æ–º–∏–ª–∫–∏ –∑—ñ —Å–∫–∞–Ω—É.
2. –†–µ–∞–ª—ñ–∑—É—î –Ω–æ–≤—É –ª–æ–≥—ñ–∫—É: —è–∫—â–æ –≤ `SIGNATUREHISTORY` –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ `BY_CHIEF_MARK` —Ç–∞ `CHIEF_POSITION`, —Ç–æ –≤–∏–≤–æ–¥–∏—Ç—å—Å—è `"–í–∏–∫–æ–Ω–∞–Ω–æ: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á (–ø–æ—Å–∞–¥–∞) –≤—ñ–¥ —ñ–º–µ–Ω—ñ..."`, —ñ –¥–∞–ª—ñ –∑–≤–∏—á–∞–π–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ø—ñ–¥–ø–∏—Å–∞–Ω—Ç–∞ (`SIGNER_BY`).

---

### ‚úÖ –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç:

```sql
(
  SELECT LISTAGG(
    '<span class="task-creator exctr-ttl-delim">'
    || '<span class="tak-creator-number">' || sr2.SORT_ORDER || '.</span> '
    || RTRIM(
      CASE
        WHEN sr2.USER_TABNO IS NOT NULL THEN
          u3.FAMILIA || ' ' || SUBSTR(u3.IMYA, 1, 1) || '. ' || SUBSTR(u3.OTCHESTVO, 1, 1) || '.'
          || ', ' || u3.SPR_DOLZNOST || ', ' || u3.TSEH_SHORT
        ELSE ''
      END
      || CASE 
           WHEN sr2.USER_TABNO IS NOT NULL AND (pos2.NAME IS NOT NULL OR dep.SHORT_NAME IS NOT NULL) THEN ', ' 
         END
      || NVL(pos2.NAME, '')
      || CASE 
           WHEN pos2.NAME IS NOT NULL AND dep.SHORT_NAME IS NOT NULL THEN ', ' 
         END
      || NVL(dep.SHORT_NAME, ''),
      ', '
    )
    || '</span>' ||
    
    -- –ü—ñ–¥–ø–∏—Å / –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
    (
      SELECT 
        CASE 
          WHEN h.BY_CHIEF_MARK IS NOT NULL AND h.CHIEF_POSITION IS NOT NULL THEN
            '<span class="signer_info">'
            || '<span class="exctr-ttl">–í–∏–∫–æ–Ω–∞–Ω–æ: </span><br />'
            || (uc.FAMILIA || ' ' || SUBSTR(uc.IMYA, 1, 1) || '. ' || SUBSTR(uc.OTCHESTVO, 1, 1) || '.') 
            || ', ' || uc.SPR_DOLZNOST || ' (' || h.CHIEF_POSITION || ')' 
            || ' ‚Äî –≤—ñ–¥ —ñ–º–µ–Ω—ñ<br />'
            || us.FAMILIA || ' ' || SUBSTR(us.IMYA, 1, 1) || '. ' || SUBSTR(us.OTCHESTVO, 1, 1) || '.' 
            || ', ' || us.SPR_DOLZNOST || ', ' || us.TSEH_SHORT || ', '
            || TO_CHAR(h.SIGNER_DATE, 'DD.MM.YYYY HH24:MI') 
            || '</span>'

          WHEN h.SIGNER_BY = sr2.USER_TABNO THEN
            '<span class="signer_info">'
            || '<span class="exctr-ttl">–í–∏–∫–æ–Ω–∞–Ω–æ: </span><br />'
            || TO_CHAR(h.SIGNER_DATE, 'DD.MM.YYYY HH24:MI') 
            || '</span>'

          ELSE
            '<span class="signer_info">'
            || '<span class="exctr-ttl">–í–∏–∫–æ–Ω–∞–Ω–æ: </span><br />'
            || us.FAMILIA || ' ' || SUBSTR(us.IMYA, 1, 1) || '. ' || SUBSTR(us.OTCHESTVO, 1, 1) || '.' 
            || ', ' || us.SPR_DOLZNOST || ', ' || us.TSEH_SHORT || ', '
            || TO_CHAR(h.SIGNER_DATE, 'DD.MM.YYYY HH24:MI') 
            || '</span>'
        END
      FROM TaskTracker.SIGNATUREHISTORY@To_Tasktracker10 h
      LEFT JOIN KBS.Personal@To_Tasktracker10 us ON h.SIGNER_BY = us.TAB_NO AND us.PRIZNAK IS NULL
      LEFT JOIN KBS.Personal@To_Tasktracker10 uc ON h.BY_CHIEF_MARK = uc.TAB_NO AND uc.PRIZNAK IS NULL
      WHERE h.SIGNRIGHT_ID = sr2.ID
      FETCH FIRST ROW ONLY
    ),
  ' ' ON OVERFLOW TRUNCATE)
  WITHIN GROUP (ORDER BY sr2.ID)

FROM TaskTracker.SIGNATURERIGHTS@To_Tasktracker10 sr2
LEFT JOIN kbs.spr_dolznost@To_Tasktracker10 pos2 ON sr2.POSITION_ID = pos2.KOD
LEFT JOIN kbs.spr_department@to_tasktracker10 dep ON dep.ID = sr2.DEPARTMENT_ID
LEFT JOIN KBS.Personal@To_Tasktracker10 u3 ON sr2.USER_TABNO = u3.TAB_NO AND u3.PRIZNAK IS NULL
WHERE sr2.TASK_ID = t.ID AND sr2.STAGES_ID = 4
```

---

## ‚úÖ –©–æ –≤—Ä–∞—Ö–æ–≤–∞–Ω–æ:

| –£–º–æ–≤–∞                                                      | –†–µ–∑—É–ª—å—Ç–∞—Ç                                                 |
| ---------------------------------------------------------- | --------------------------------------------------------- |
| `BY_CHIEF_MARK IS NOT NULL AND CHIEF_POSITION IS NOT NULL` | –î–æ–¥–∞—î—Ç—å—Å—è: ‚Äú–í–∏–∫–æ–Ω–∞–Ω–æ: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á (–ø–æ—Å–∞–¥–∞) ‚Äî –≤—ñ–¥ —ñ–º–µ–Ω—ñ...‚Äù |
| `SIGNER_BY = USER_TABNO`                                   | –î–æ–¥–∞—î—Ç—å—Å—è –ø—Ä–æ—Å—Ç–æ –¥–∞—Ç–∞ –ø—ñ–¥–ø–∏—Å—É                             |
| –Ü–Ω—à–∏–π –≤–∏–ø–∞–¥–æ–∫                                              | –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø–æ–≤–Ω–µ –ü–Ü–ë –ø—ñ–¥–ø–∏—Å–∞–Ω—Ç–∞, –ø–æ—Å–∞–¥–∞, —Ü–µ—Ö, –¥–∞—Ç–∞       |

---

üîî –Ø–∫—â–æ —Ö–æ—á–µ—à –≤–∏–Ω–µ—Å—Ç–∏ —Ü–µ–π –±–ª–æ–∫ —É –≤—å—é—Ö—É –∞–±–æ —Ñ—É–Ω–∫—Ü—ñ—é ‚Äî –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É–≤–∞—Ç–∏ —â–µ –∫—Ä–∞—â–µ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.
