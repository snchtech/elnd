–¢–≤–æ—è —Å–∏—Ç—É–∞—Ü—ñ—è —Ü—ñ–ª–∫–æ–º —Ç–∏–ø–æ–≤–∞ –¥–ª—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∑ —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–º —Ä–µ–∂–∏–º–æ–º (—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è/–ø–µ—Ä–µ–≥–ª—è–¥) —ñ –ø–µ—Ä–µ–º–∏–∫–∞—á–µ–º –º—ñ–∂ "–∑–∞–≤–¥–∞–Ω–Ω—è–º" —Ç–∞ "—à–∞–±–ª–æ–Ω–æ–º", –∞–ª–µ —ñ–∑ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–æ—é –ø–æ–≤–µ–¥—ñ–Ω–∫–æ—é –¥–ª—è IG, —è–∫—ñ “ë—Ä—É–Ω—Ç—É—é—Ç—å—Å—è –Ω–∞ –∫–æ–ª–µ–∫—Ü—ñ—è—Ö.

---

## ‚úÖ –¶—ñ–ª—ñ:

| –†–µ–∂–∏–º `P_TASK_TYPE_MODE` | –ó–Ω–∞—á–µ–Ω–Ω—è                                    | –û—á—ñ–∫—É–≤–∞–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞                         |
| ------------------------ | ------------------------------------------- | ------------------------------------------- |
| 0 ‚Äì –ü–µ—Ä–µ–≥–ª—è–¥             | –ó–∞–≤–¥–∞–Ω–Ω—è / –®–∞–±–ª–æ–Ω (`P_TASK_MODE`) –≤–∏–∑–Ω–∞—á–µ–Ω–æ | –ü–æ–∫–∞–∑ –ª–∏—à–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ–≥–æ IG                  |
| 1 ‚Äì –°—Ç–≤–æ—Ä–µ–Ω–Ω—è            | –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Å–∞–º –æ–±–∏—Ä–∞—î `P_TASK_MODE`         | –ü–æ–∫–∞–∑ **–æ–±–æ—Ö** IG (–ø–µ—Ä–µ–º–∏–∫–∞—î—Ç—å—Å—è –≤—ñ–∑—É–∞–ª—å–Ω–æ) |
| 2 ‚Äì –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è          | –ó–∞–≤–¥–∞–Ω–Ω—è / –®–∞–±–ª–æ–Ω (`P_TASK_MODE`) –≤–∏–∑–Ω–∞—á–µ–Ω–æ | –ü–æ–∫–∞–∑ –ª–∏—à–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ–≥–æ IG                  |

---

## üî• –ü—Ä–æ–±–ª–µ–º–∞:

APEX Interactive Grid —Ä–µ–≥—ñ–æ–Ω–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—å —Å–≤—ñ–π SQL –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä—ñ ‚Äî **–Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –∫–æ–ª–µ–∫—Ü—ñ—è –Ω–µ —ñ—Å–Ω—É—î**, —â–æ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –ø–æ–º–∏–ª–∫–∏. –¢–æ–±—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∞–±–æ:

1. **–ù–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç–∏ –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω–∏–π IG**,
2. **–ê–±–æ –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –æ–±–æ—Ö –∫–æ–ª–µ–∫—Ü—ñ–π –≤ —Ä–µ–∂–∏–º—ñ `P_TASK_TYPE_MODE = 1`**

---

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è: –ø–æ—î–¥–Ω–∞–Ω–Ω—è —É–º–æ–≤–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É + —Ä–æ–∑—É–º–Ω–æ—ó —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∫–æ–ª–µ–∫—Ü—ñ–π

---

### üîπ 1. **–£–º–æ–≤–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É –¥–ª—è IG —Ä–µ–≥—ñ–æ–Ω—ñ–≤**

#### IG: `subtasks`

```
Condition Type: PL/SQL Expression
Expression:
:P_TASK_TYPE_MODE = 0 AND :P_TASK_MODE = 0 OR
:P_TASK_TYPE_MODE = 2 AND :P_TASK_MODE = 0 OR
:P_TASK_TYPE_MODE = 1
```

#### IG: `subtemplates`

```
Condition Type: PL/SQL Expression
Expression:
:P_TASK_TYPE_MODE = 0 AND :P_TASK_MODE = 1 OR
:P_TASK_TYPE_MODE = 2 AND :P_TASK_MODE = 1 OR
:P_TASK_TYPE_MODE = 1
```

> üîÅ –£ —Ä–µ–∂–∏–º—ñ `1` –ø–æ–∫–∞–∑—É—é—Ç—å—Å—è **–æ–±–∏–¥–≤–∞**, –±–æ `switch` –º—ñ–∂ –Ω–∏–º–∏ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –≤ UI

---

### üîπ 2. **–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–æ–ª–µ–∫—Ü—ñ–π —É Before Header**

```plsql
BEGIN
  IF :P_TASK_TYPE_MODE = 1 THEN
    -- –°—Ç–≤–æ—Ä—é—î–º–æ –æ–±–∏–¥–≤—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó (—ñ —à–∞–±–ª–æ–Ω–∏, —ñ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è)
    CREATE_SUBTASK_COLLECTION(:P_TASK_ID);
    CREATE_SUBTEMPLATE_COLLECTION(:P_TASK_ID);
  
  ELSIF :P_TASK_TYPE_MODE IN (0, 2) THEN
    IF :P_TASK_MODE = 0 THEN
      CREATE_SUBTASK_COLLECTION(:P_TASK_ID);
    ELSIF :P_TASK_MODE = 1 THEN
      CREATE_SUBTEMPLATE_COLLECTION(:P_TASK_ID);
    END IF;
  END IF;
END;
```

> üîÅ `CREATE_SUBTASK_COLLECTION` —ñ `CREATE_SUBTEMPLATE_COLLECTION` ‚Äî –æ–∫—Ä–µ–º—ñ –ø—Ä–æ—Ü–µ–¥—É—Ä–∏ –∞–±–æ —á–∞—Å—Ç–∏–Ω–∏ –∫–æ–¥—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è APEX collections (—Ç–∏ —ó—Ö —É–∂–µ –º–∞—î—à)

---

### üîπ 3. **–£ JS (–∞–±–æ CSS)** –ø—Ä–∏—Ö–æ–≤—É–π/–ø–µ—Ä–µ–º–∏–∫–∞–π IG —Ä–µ–≥—ñ–æ–Ω–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `switch`

```javascript
// –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –ø—Ä–∏ –∑–º—ñ–Ω—ñ radio-–∫–Ω–æ–ø–∫–∏ `P_TASK_MODE`
apex.item("P_TASK_MODE").setValue("1"); // —à–∞–±–ª–æ–Ω
$("#subtask_ig_region").hide();
$("#subtemplate_ig_region").show();
```

> –ê–±–æ —á–µ—Ä–µ–∑ APEX Dynamic Action ‚Üí `Show / Hide`

---

## ‚ö†Ô∏è –†–∏–∑–∏–∫–∏ —Ç–∞ best practices

| –†–∏–∑–∏–∫                                     | –†—ñ—à–µ–Ω–Ω—è                                                                      |
| ----------------------------------------- | ---------------------------------------------------------------------------- |
| ‚ùå APEX –ø–∞–¥–∞—î –ø—Ä–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ–π –∫–æ–ª–µ–∫—Ü—ñ—ó       | –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π —É–º–æ–≤—É —Ä–µ–Ω–¥–µ—Ä—É + —Å—Ç–≤–æ—Ä—é–π –∫–æ–ª–µ–∫—Ü—ñ—ó —è–≤–Ω–æ                           |
| ‚ùå –ó–∞–≤–∏—Å–∞–Ω–Ω—è –ø—Ä–∏ –ø–æ–≤—ñ–ª—å–Ω–∏—Ö –∑–∞–ø–∏—Ç–∞—Ö         | –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π `APEX_COLLECTION.CREATE_COLLECTION_FROM_QUERY` –ª–∏—à–µ –ø—Ä–∏ –ø–æ—Ç—Ä–µ–±—ñ |
| ‚ùå –ü–æ–≤—Ç–æ—Ä–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–ª–µ–∫—Ü—ñ–π –ø—Ä–∏ refresh | –ó–∞–≤–∂–¥–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è–π —á–µ—Ä–µ–∑ `APEX_COLLECTION.COLLECTION_EXISTS`                   |
| ‚ùå –ö–æ–Ω–∫—É—Ä–µ–Ω—Ü—ñ—è –¥–≤–æ—Ö IG –æ–¥–Ω–æ—á–∞—Å–Ω–æ           | –í—ñ–¥–æ–±—Ä–∞–∂–∞–π –ª–∏—à–µ –æ–¥–∏–Ω IG –æ–¥–Ω–æ—á–∞—Å–Ω–æ —É —Ä–µ–∂–∏–º–∞—Ö 0/2                              |

---

## ‚úÖ –†–µ–∑—é–º–µ –¥—ñ–π:

1. –í—Å—Ç–∞–Ω–æ–≤–∏ `Server-side condition` –Ω–∞ –∫–æ–∂–µ–Ω IG, –≤—Ä–∞—Ö–æ–≤—É—é—á–∏ `P_TASK_TYPE_MODE` + `P_TASK_MODE`
2. –°—Ç–≤–æ—Ä–∏ –æ–±–∏–¥–≤—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó –≤ —Ä–µ–∂–∏–º—ñ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è (`P_TASK_TYPE_MODE = 1`)
3. –ü–æ–∫–∞–∑—É–π –ª–∏—à–µ —Ç–æ–π IG, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Ä–µ–∂–∏–º—É, –∫—Ä—ñ–º —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è ‚Äî —Ç–∞–º –ø–µ—Ä–µ–º–∏–∫–∞–π –≤—ñ–∑—É–∞–ª—å–Ω–æ
4. –ó–∞–≤–∂–¥–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è–π –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –∫–æ–ª–µ–∫—Ü—ñ–π —á–µ—Ä–µ–∑ `APEX_COLLECTION.COLLECTION_EXISTS` –ø–µ—Ä–µ–¥ `CREATE_COLLECTION`

---

üîî –Ø–∫—â–æ —Ö–æ—á–µ—à ‚Äî —è –º–æ–∂—É –ø—ñ–¥–≥–æ—Ç—É–≤–∞—Ç–∏ —Ç–æ—á–Ω–∏–π –∫–æ–¥ –ø—Ä–æ—Ü–µ–¥—É—Ä `CREATE_SUBTASK_COLLECTION` / `CREATE_SUBTEMPLATE_COLLECTION` –∞–±–æ –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –ø–æ–≤–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ —ñ–∑ UI-–ø–µ—Ä–µ–º–∏–∫–∞—á–µ–º.
