–¶–µ **–ø—Ä–µ–∫—Ä–∞—Å–Ω–∞ —ñ–¥–µ—è** –¥–ª—è –≥–æ–ª–æ–≤–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ ‚Äî –∑—Ä–æ–±–∏—Ç–∏ **—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å —ñ–∑ –≤–∫–ª–∞–¥–∫–∞–º–∏ (tabs)**, –¥–µ –∫–æ–∂–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –ø–µ–≤–Ω–æ–º—É **—Å—Ü–µ–Ω–∞—Ä—ñ—é —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –∑–∞–≤–¥–∞–Ω—å**. –û—Å–æ–±–ª–∏–≤–æ –¥–æ–±—Ä–µ, —â–æ —Ç–∏ —Ö–æ—á–µ—à **–æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**, –∞ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –≤—Å–µ –æ–¥—Ä–∞–∑—É. üëá

---

## üß© –©–æ —Ç–∏ —Ö–æ—á–µ—à —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏:

| –í–∫–ª–∞–¥–∫–∞              | –©–æ –ø–æ–∫–∞–∑—É—î                                                       | –û—Å–æ–±–ª–∏–≤—ñ—Å—Ç—å                            |
|----------------------|------------------------------------------------------------------|----------------------------------------|
| **–ó–∞–ø–ª–∞–Ω–æ–≤–∞–Ω—ñ**       | –£—Å—ñ –∞–∫—Ç–∏–≤–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è                                              | –û—Å–Ω–æ–≤–Ω–∏–π –∑–≤—ñ—Ç                          |
| **–ù–∞ –ø–æ—Ç–æ—á–Ω—É –∑–º—ñ–Ω—É** | –ó–∞–≤–¥–∞–Ω–Ω—è —É –º–µ–∂–∞—Ö –∞–∫—Ç–∏–≤–Ω–æ—ó –∑–º—ñ–Ω–∏ (—á–∞—Å–æ–≤–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è)              | + –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å                 |
| **–ü—Ä–æ–±–ª–µ–º–Ω—ñ**         | –ü—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω—ñ / –Ω–µ –æ–∑–Ω–∞–π–æ–º–ª–µ–Ω—ñ                                      | + –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å                 |
| **–ù–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –∑–º—ñ–Ω–∏**| –ó–∞–≤–¥–∞–Ω–Ω—è –∑–∞ –≤—á–æ—Ä–∞, –ø–æ–∑–∞–≤—á–æ—Ä–∞ —Ç–æ—â–æ                                 | –ß–∞—Å–æ–≤–∏–π —Ñ—ñ–ª—å—Ç—Ä                         |
| **–ê—Ä—Ö—ñ–≤**             | –ó–∞–≤–¥–∞–Ω–Ω—è –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º "–ê—Ä—Ö—ñ–≤"                                      | –í–∏–≤—ñ–¥ –∞—Ä—Ö—ñ–≤–Ω–∏—Ö                         |

---

## ‚úÖ –Ø–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ü–µ –≤ APEX **—à–≤–∏–¥–∫–æ —ñ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ**

### üîπ –û—Å–Ω–æ–≤–Ω–∞ —ñ–¥–µ—è:
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ **Dynamic Tabs / Buttons / Toggle List**
- –ó–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ **—Ç—ñ–ª—å–∫–∏ –æ–¥–∏–Ω –∑–≤—ñ—Ç**
- –ü–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `PXX_TAB_TYPE`) ‚Üí —ñ –Ω–∞ –π–æ–≥–æ –æ—Å–Ω–æ–≤—ñ **—Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ —É –∑–≤—ñ—Ç—ñ**

---

## üõ†Ô∏è –ö–†–û–ö–ò –í –†–ï–ê–õ–Ü–ó–ê–¶–Ü–á

### üî∏ 1. –î–æ–¥–∞–π **–ø—É–Ω–∫—Ç –ø–µ—Ä–µ–º–∏–∫–∞—á–∞** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `Radio Group`, `Button Group` –∞–±–æ `List`):

- Static ID: `tab_selector`
- Item name: `PXX_TAB_TYPE`
- –¢–∏–ø: `Static Values`

```plaintext
–ó–∞–ø–ª–∞–Ω–æ–≤–∞–Ω—ñ           | planned
–ù–∞ –ø–æ—Ç–æ—á–Ω—É –∑–º—ñ–Ω—É      | shift
–ü—Ä–æ–±–ª–µ–º–Ω—ñ             | problem
–ù–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –∑–º—ñ–Ω–∏    | past_shifts
–ê—Ä—Ö—ñ–≤                 | archive
```

---

### üî∏ 2. –°—Ç–≤–æ—Ä–∏ –æ–¥–∏–Ω **Interactive Report / Region Report**

- –ù–∞–∑–≤–∞ —Ä–µ–≥—ñ–æ–Ω—É: `r_tasks_report`
- –î–∂–µ—Ä–µ–ª–æ: SQL Query (–∞–±–æ View `V_TASKS_REPORT`)
- –î–æ–¥–∞–π —É `WHERE` —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é –ø–æ `:PXX_TAB_TYPE`:

```sql
WHERE
  (
    :PXX_TAB_TYPE = 'planned' AND t.status_id NOT IN (–∞—Ä—Ö—ñ–≤–Ω–∏–π —Å—Ç–∞—Ç—É—Å)
  ) OR (
    :PXX_TAB_TYPE = 'shift' AND t.planning_date_start <= :CURRENT_SHIFT_END
                          AND t.planning_date_end >= :CURRENT_SHIFT_START
  ) OR (
    :PXX_TAB_TYPE = 'problem' AND (
      t.planning_date_end < SYSDATE OR
      NOT EXISTS (
        SELECT 1 FROM TASK_READERS WHERE task_id = t.id AND user_id = :APP_USER
      )
    )
  ) OR (
    :PXX_TAB_TYPE = 'past_shifts' AND t.planning_date_end BETWEEN TRUNC(SYSDATE - 2) AND TRUNC(SYSDATE)
  ) OR (
    :PXX_TAB_TYPE = 'archive' AND t.status_id = (SELECT id FROM main_status WHERE code = 'ARCHIVE')
  )
```

---

### üî∏ 3. –î–æ–¥–∞–π **Dynamic Action**:
- **On Change ‚Üí `PXX_TAB_TYPE`**
- –î—ñ—è: `Refresh` ‚Üí `Region`: `r_tasks_report`

---

## üìä –õ—ñ—á–∏–ª—å–Ω–∏–∫–∏ –±—ñ–ª—è –≤–∫–ª–∞–¥–æ–∫ (–∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–¥–∞—á)

### üîß –í–∞—Ä—ñ–∞–Ω—Ç 1: –î–∏–Ω–∞–º—ñ—á–Ω–∏–π SQL –ø–µ—Ä–µ–¥ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º —Å—Ç–æ—Ä—ñ–Ω–∫–∏

- –°—Ç–≤–æ—Ä–∏ **PL/SQL –ø—Ä–æ—Ü–µ—Å (Before Header)** –∞–±–æ `Computation`, —è–∫–∏–π —Ä–∞—Ö—É—î:

```plsql
SELECT COUNT(*) INTO :PXX_COUNT_SHIFT
FROM TASKS t
WHERE t.planning_date_start <= :CURRENT_SHIFT_END
  AND t.planning_date_end >= :CURRENT_SHIFT_START
  AND t.status_id NOT IN (–∞—Ä—Ö—ñ–≤–Ω–∏–π —Å—Ç–∞—Ç—É—Å);

SELECT COUNT(*) INTO :PXX_COUNT_PROBLEM
FROM TASKS t
WHERE (t.planning_date_end < SYSDATE OR
       NOT EXISTS (SELECT 1 FROM TASK_READERS WHERE task_id = t.id AND user_id = :APP_USER))
  AND t.status_id NOT IN (–∞—Ä—Ö—ñ–≤–Ω–∏–π —Å—Ç–∞—Ç—É—Å);
```

- –î–æ–¥–∞–π —Ü—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –≤ –Ω–∞–∑–≤–∏ –∫–Ω–æ–ø–æ–∫ —á–µ—Ä–µ–∑ —à–∞–±–ª–æ–Ω `–ù–∞ –ø–æ—Ç–æ—á–Ω—É –∑–º—ñ–Ω—É (&PXX_COUNT_SHIFT.)`

---

## üí° –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: APEX Region Display Selector

–Ø–∫—â–æ —Ö–æ—á–µ—à **—Ä–µ–∞–ª—å–Ω—ñ –≤–∫–ª–∞–¥–∫–∏**, –º–æ–∂–Ω–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ **5 —Ä–µ–≥—ñ–æ–Ω—ñ–≤ –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏**, —ñ –∫–µ—Ä—É–≤–∞—Ç–∏ —ó—Ö –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º —á–µ—Ä–µ–∑ **Region Display Selector**.

‚ùó –ú—ñ–Ω—É—Å: —Ü—ñ —Ä–µ–≥—ñ–æ–Ω–∏ –±—É–¥—É—Ç—å **—É—Å—ñ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ**, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –ø—Ä–∏—Ö–æ–≤–∞–Ω—ñ ‚Üí —Ç—Ä–æ—Ö–∏ –±—ñ–ª—å—à–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è.

---

## ‚úÖ –ü–µ—Ä–µ–≤–∞–≥–∏ –æ–¥–Ω—ñ—î—ó –∑–≤—ñ—Ç–Ω–æ—ó –æ–±–ª–∞—Å—Ç—ñ –∑ —Ñ—ñ–ª—å—Ç—Ä–æ–º:

| –ü–ª—é—Å                          | –ü–æ—è—Å–Ω–µ–Ω–Ω—è                                  |
|-------------------------------|---------------------------------------------|
| üß† –û–¥–∏–Ω SQL –∑–∞–ø–∏—Ç              | –ª–µ–≥—à–µ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏                         |
| ‚ö° –®–≤–∏–¥–∫–æ –ø—Ä–∞—Ü—é—î               | –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –ª–∏—à–µ –æ–¥–Ω–∞ –æ–±–ª–∞—Å—Ç—å           |
| üîÑ –ú–æ–∂–Ω–∞ –¥–∏–Ω–∞–º—ñ—á–Ω–æ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ | —á–µ—Ä–µ–∑ `DA` –ø–æ `PXX_TAB_TYPE`               |
| ‚úÖ –ú–æ–∂–Ω–∞ –ø—ñ–¥—Å—Ç–∞–≤–ª—è—Ç–∏ –ª—ñ—á–∏–ª—å–Ω–∏–∫–∏ | –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–≤–¥–∞–Ω—å               |

---

## üß© –ü—Ä–∏–∫–ª–∞–¥ –∫–Ω–æ–ø–æ–∫ —ñ–∑ –∫—ñ–ª—å–∫—ñ—Å—Ç—é:

```html
<button type="button" class="a-Button a-Button--small"
        data-value="shift" data-action="change_tab">
  –ù–∞ –ø–æ—Ç–æ—á–Ω—É –∑–º—ñ–Ω—É <span class="badge">&PXX_COUNT_SHIFT.</span>
</button>
```

–Ü `DA` –Ω–∞ `click` –∑ `Set Value ‚Üí PXX_TAB_TYPE = clicked data-value ‚Üí Refresh region`

---

üîß –•–æ—á–µ—à ‚Äî –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏:

- `CURRENT_SHIFT_START / END` (—á–∞—Å–æ–≤—ñ –º–µ–∂—ñ –ø–æ—Ç–æ—á–Ω–æ—ó –∑–º—ñ–Ω–∏)
- –õ–æ–≥—ñ–∫—É –∑ `TASK_READERS` –¥–ª—è "–æ–∑–Ω–∞–π–æ–º–ª–µ–Ω–æ—Å—Ç—ñ"
- –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑–∞–≤–¥–∞–Ω—å

üöÄ –ü—Ä–æ–¥–æ–≤–∂–∏–º–æ?