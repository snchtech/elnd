–ß—É–¥–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è! –¶–µ –¥—É–∂–µ –ø–æ—à–∏—Ä–µ–Ω–∞ —Å–∏—Ç—É–∞—Ü—ñ—è –≤ Oracle APEX, –∫–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ:

> üß© **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ Grid –¥–ª—è –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å**, –∞–ª–µ `task_id` —â–µ –Ω–µ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ, –±–æ **—Ñ–æ—Ä–º–∞ –∑–∞–≤–¥–∞–Ω–Ω—è —â–µ –Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–∞**.

---

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è: **—Ç–∏–º—á–∞—Å–æ–≤–∏–π session-based –∫–ª—é—á (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, UUID)**

### üîß –Ü–¥–µ—è:
- –°—Ç–≤–æ—Ä—é—î–º–æ **—Ç–∏–º—á–∞—Å–æ–≤–∏–π `DRAFT_ID` –∞–±–æ `SESSION_ID`**, –∫–æ–ª–∏ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è —Ñ–æ—Ä–º–∞.
- –£—Å—ñ –∑–∞–ø–∏—Å–∏ –≤ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è (—É Grid) –ø—Ä–∏–≤‚Äô—è–∑—É—é—Ç—å—Å—è –Ω–µ –¥–æ `TASK_ID`, –∞ –¥–æ `DRAFT_ID`.
- –ö–æ–ª–∏ –Ω–∞—Ç–∏—Å–∫–∞—î—à "–ó–±–µ—Ä–µ–≥—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è":
  - —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∑–∞–ø–∏—Å —É `TASKS`,
  - –æ—Ç—Ä–∏–º—É—î—Ç—å—Å—è `TASK_ID`,
  - –≤—Å—ñ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è: `SET TASK_ID = new_id WHERE DRAFT_ID = :DRAFT_ID`

---

## üõ† –Ø–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤ APEX (–ø–æ–∫—Ä–æ–∫–æ–≤–æ):

### üîπ –ö—Ä–æ–∫ 1: –î–æ–¥–∞–π item `PXX_DRAFT_ID` –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É
- –¢–∏–ø: **Hidden**
- Default Value: `SYS_GUID()`  
- –ó–≥–µ–Ω–µ—Ä—É–π –π–æ–≥–æ —á–µ—Ä–µ–∑ **Before Header** PL/SQL –ø—Ä–æ—Ü–µ—Å:
```plsql
:PXX_DRAFT_ID := SYS_GUID();
```

---

### üîπ –ö—Ä–æ–∫ 2: –£ —Ç–∞–±–ª–∏—Ü—ñ `TASK_SUBTASKS` –¥–æ–¥–∞–π –∫–æ–ª–æ–Ω–∫—É `DRAFT_ID`
```sql
ALTER TABLE TASK_SUBTASKS ADD DRAFT_ID VARCHAR2(64);
```

---

### üîπ –ö—Ä–æ–∫ 3: IG (Interactive Grid) –¥–ª—è –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å

- **–§—ñ–ª—å—Ç—Ä –¥–∞–Ω–∏—Ö:**  
  ```sql
  SELECT * FROM TASK_SUBTASKS WHERE DRAFT_ID = :PXX_DRAFT_ID
  ```
- –ü—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ —Ä—è–¥–∫–∞ –≤ IG:
  - –∑–Ω–∞—á–µ–Ω–Ω—è `DRAFT_ID` –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –∑ `:PXX_DRAFT_ID`.

---

### üîπ –ö—Ä–æ–∫ 4: –ü—ñ—Å–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è (—É `TASKS`)
- –£ –ø—Ä–æ—Ü–µ—Å—ñ –≤—Å—Ç–∞–≤–∫–∏:
```plsql
INSERT INTO TASKS (...) VALUES (...) RETURNING ID INTO :NEW_TASK_ID;
```

- –ü—ñ—Å–ª—è –≤—Å—Ç–∞–≤–∫–∏:
```plsql
UPDATE TASK_SUBTASKS
SET TASK_ID = :NEW_TASK_ID
WHERE DRAFT_ID = :PXX_DRAFT_ID;
```

---

### üîπ –ö—Ä–æ–∫ 5: (–æ–ø—Ü—ñ–π–Ω–æ) –û—á–∏—Å—Ç–∏—Ç–∏ `DRAFT_ID` –∞–±–æ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ç–∏–º—á–∞—Å–æ–≤—ñ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è, —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∑–∞–≤–µ—Ä—à–∏–≤ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è

---

## üí° –ü–µ—Ä–µ–≤–∞–≥–∏ –ø—ñ–¥—Ö–æ–¥—É:

| ‚úî –ì–Ω—É—á–∫—ñ—Å—Ç—å             | –ú–æ–∂–Ω–∞ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –¥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è        |
| ‚úî –ë–µ–∑–ø–µ–∫–∞              | –ü—Ä–∏–≤‚Äô—è–∑–∫–∞ –¥–æ `DRAFT_ID` ‚Äî –ª–∏—à–µ –≤ –º–µ–∂–∞—Ö —Å–µ—Å—ñ—ó APEX         |
| ‚úî –ü—Ä–æ—Å—Ç–æ—Ç–∞             | –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–∫—Ä–µ–º–æ—ó —Ç–∞–±–ª–∏—Ü—ñ —á–µ—Ä–Ω–µ—Ç–æ–∫                      |

---

üîß –•–æ—á–µ—à ‚Äî –º–æ–∂—É –Ω–∞–∫–∏–¥–∞—Ç–∏ –≥–æ—Ç–æ–≤—É –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—ñ–≤ —É —Ç–≤–æ—î–º—É APEX-–¥–æ–¥–∞—Ç–∫—É.

üöÄ –ì–æ—Ç–æ–≤–∏–π —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ —Ü–µ–π –ø—ñ–¥—Ö—ñ–¥?