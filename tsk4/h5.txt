–û–∫–µ–π! –ù–∏–∂—á–µ ‚Äî **–ø–æ–≤–Ω—ñ—Å—Ç—é –≥–æ—Ç–æ–≤–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è**, —è–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è –∑ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è–º–∏ (—á–µ—Ä–µ–∑ IG), –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ `TASK_ID` —â–µ –Ω–µ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ, ‚Äî –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é **—Ç–∏–º—á–∞—Å–æ–≤–æ–≥–æ `DRAFT_ID`**.

---

## üß© –°–¶–ï–ù–ê–†–Ü–ô: "–°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è + –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è"

---

## üß± –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

### üî∏ 1. –£ —Ç–∞–±–ª–∏—Ü—é `TASK_SUBTASKS` –¥–æ–¥–∞–π –∫–æ–ª–æ–Ω–∫—É:
```sql
ALTER TABLE TASK_SUBTASKS ADD DRAFT_ID VARCHAR2(64);
```

---

## üîß APEX: —Å—Ç–æ—Ä—ñ–Ω–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è

### üî∏ 2. –î–æ–¥–∞–π –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏–π Item
- **Name:** `PXX_DRAFT_ID`
- **Type:** `Hidden`
- **Value Protected:** No
- **Default:**  
  - **Type:** PL/SQL Function Body
  ```plsql
  return sys_guid();
  ```

---

### üî∏ 3. IG: –°–ø–∏—Å–æ–∫ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å

- **SQL Query:**
  ```sql
  SELECT
    ID,
    SUBTASK_CONTENT,
    PLANNING_DATE_END,
    PARENT_ID,
    SUBTASK_ORDER,
    DRAFT_ID
  FROM TASK_SUBTASKS
  WHERE DRAFT_ID = :PXX_DRAFT_ID
    AND TASK_ID IS NULL
  ```

- **Editable Columns:** –¥–æ–∑–≤–æ–ª–∏—Ç–∏ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø–æ—Ç—Ä—ñ–±–Ω–∏—Ö –ø–æ–ª—ñ–≤

- **Default –¥–ª—è `DRAFT_ID`:**
  - –£ –∫–æ–ª–æ–Ω—Ü—ñ `DRAFT_ID` ‚Üí Default ‚Üí `&PXX_DRAFT_ID.`

---

### üî∏ 4. –ö–Ω–æ–ø–∫–∞ "–°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è"

üëâ **–ü—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ:**

#### üîπ –ü—Ä–æ—Ü–µ—Å 1: Insert —É `TASKS`
```plsql
DECLARE
  v_task_id TASKS.ID%TYPE;
BEGIN
  INSERT INTO TASKS (
    DATE_CREATE,
    TASK_CONTENT,
    CREATOR_ID,
    PLANNING_DATE_END,
    STATUS_ID,
    DEPARTMENT_ID,
    UNIT_ID,
    TYPE_ID,
    ...
  ) VALUES (
    SYSDATE,
    :PXX_TASK_CONTENT,
    :APP_USER_ID,           -- —è–∫—â–æ —Ç—Ä–µ–±–∞
    :PXX_PLANNING_DATE_END,
    1,                      -- —Å—Ç–∞—Ç—É—Å "–Ω–æ–≤–∏–π"
    :PXX_DEPARTMENT_ID,
    :PXX_UNIT_ID,
    :PXX_TYPE_ID,
    ...
  )
  RETURNING ID INTO v_task_id;

  -- –æ–Ω–æ–≤–ª—é—î–º–æ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è
  UPDATE TASK_SUBTASKS
  SET TASK_ID = v_task_id,
      DRAFT_ID = NULL
  WHERE DRAFT_ID = :PXX_DRAFT_ID;

  -- –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –Ω–æ–≤–∏–π task_id, —è–∫—â–æ —Ç—Ä–µ–±–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç–∏ –Ω–∞ —ñ–Ω—à—É —Å—Ç–æ—Ä—ñ–Ω–∫—É
  :PXX_CREATED_TASK_ID := v_task_id;
END;
```

#### üîπ –ü—Ä–æ—Ü–µ—Å 2 (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ): –í–∏–¥–∞–ª–∏—Ç–∏ —Ç–∏–º—á–∞—Å–æ–≤—ñ –∑–∞–ø–∏—Å–∏ –±–µ–∑ task_id —á–µ—Ä–µ–∑ X —Ö–≤

---

### üî∏ 5. –ü—ñ—Å–ª—è –ø—Ä–æ—Ü–µ—Å—É
- –ú–æ–∂–µ—à –∑—Ä–æ–±–∏—Ç–∏ **Branch**:
  - –∞–±–æ **–∑–∞–ª–∏—à–∏—Ç–∏—Å—è –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ**
  - –∞–±–æ **–ø–µ—Ä–µ–π—Ç–∏ –¥–æ –∫–∞—Ä—Ç–∫–∏ –∑–∞–≤–¥–∞–Ω–Ω—è**, –ø–µ—Ä–µ–¥–∞–≤—à–∏ `PXX_CREATED_TASK_ID`

---

## üí° –î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–æ—Ä–∞–¥–∏

- –í `IG` –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ –ø–æ—Å—Ç–∞–≤ `DRAFT_ID` —è–∫ `hidden`, –∞–ª–µ editable (—â–æ–± –∑–Ω–∞—á–µ–Ω–Ω—è –ø–µ—Ä–µ–¥–∞–≤–∞–ª–æ—Å—å).
- –£ —Ñ–æ—Ä–º—ñ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è, —Ç–∞–∫–æ–∂ –º–æ–∂–µ—à –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –≤—ñ–¥–º—ñ—Ç–∫—É, —â–æ "–¥–æ–¥–∞—é—Ç—å—Å—è –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –¥–æ —Ç–∏–º—á–∞—Å–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω—É".

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ! –©–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ:

| ‚úÖ | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç |
|----|-----------|
| ‚úî | –ú–æ–∂–Ω–∞ –¥–æ–¥–∞–≤–∞—Ç–∏ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –¥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è `task` |
| ‚úî | –ü—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏–≤‚Äô—è–∑—É—é—Ç—å—Å—è –ø—Ä–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—ñ |
| ‚úî | `DRAFT_ID` —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π –Ω–∞ —Å–µ—Å—ñ—é |
| ‚úî | –ù–µ–º–∞—î –ø—Ä–æ–±–ª–µ–º —ñ–∑ `NULL task_id` |

---

üîß –•–æ—á–µ—à ‚Äî –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ –∑—Ä–æ–±–∏—Ç–∏ export/import —É —Ç–≤–æ—é APEX-—Å—Ç–æ—Ä—ñ–Ω–∫—É –∞–±–æ –æ—Ñ–æ—Ä–º–∏—Ç–∏ SQL-—Å–∫—Ä–∏–ø—Ç –¥–ª—è `INSERT + UPDATE` –Ω–∞ –≤–∏–ø–∞–¥–æ–∫ custom –ø—Ä–æ—Ü–µ—Å—ñ–≤.