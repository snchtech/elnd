–ß—É–¥–æ–≤–æ, –¥–∞–≤–∞–π –¥–µ—Ç–∞–ª—å–Ω–æ —Ä–æ–∑–ø–∏—à–µ–º–æ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–æ—ó –∫–∞—Ä—Ç–∫–∏ –∑–∞–≤–¥–∞–Ω–Ω—è —Ç–∞ –ª–æ–≥—ñ–∫—É –ø–µ—Ä–µ—Ö–æ–¥—É –¥–æ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è. üëá

---

## ‚úÖ 1. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–æ—ó –∫–∞—Ä—Ç–∫–∏ –∑–∞–≤–¥–∞–Ω–Ω—è (Modal Dialog)**

### üìç –ú–µ—Ç–∞: –í—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∑–∞–≤–¥–∞–Ω–Ω—è –≤ –¥—ñ–∞–ª–æ–≥–æ–≤–æ–º—É –≤—ñ–∫–Ω—ñ –∑ –¥–≤–æ–º–∞ —Ä–µ–∂–∏–º–∞–º–∏: –ø–µ—Ä–µ–≥–ª—è–¥ —Ç–∞ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è (—á–µ—Ä–µ–∑ –æ–∫—Ä–µ–º—É —Ñ–æ—Ä–º—É).

---

### üîπ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ–≥—ñ–æ–Ω—É —Ç–∏–ø—É **Inline Dialog**

- **Name:** `–ó–∞–≤–¥–∞–Ω–Ω—è: –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∞ –∫–∞—Ä—Ç–∫–∞`
- **Region Type:** `Static Content`
- **Static ID:** `R_TASK_CARD_MODAL`
- **Template:** `Inline Dialog`
- **CSS Classes:** `t-Region--noPadding` (–æ–ø—Ü—ñ–π–Ω–æ)

---

### üîπ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è `Hidden Item`:  
- `P_CARD_TASK_ID` (–¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ ID –∑–∞–≤–¥–∞–Ω–Ω—è –≤ –∫–∞—Ä—Ç–∫—É)

---

### üîπ –î–æ–¥–∞–π `PL/SQL Dynamic Content` –∞–±–æ `Static Content with Substitution`

#### ‚úÖ –í–∞—Ä—ñ–∞–Ω—Ç 1: **PL/SQL Dynamic Content**

```plsql
DECLARE
  v_task_type TASKS.TYPE_ID%TYPE;
  v_creator VARCHAR2(100);
BEGIN
  SELECT TYPE_ID INTO v_task_type FROM TASKS WHERE ID = :P_CARD_TASK_ID;

  :P_CARD_TASK_TYPE := v_task_type;

  HTP.P('<div class="t-Form-label">–°—Ç–≤–æ—Ä–µ–Ω–æ:</div>');
  SELECT TO_CHAR(DATE_CREATE, 'DD.MM.YYYY HH24:MI') || ' (ID: ' || CREATOR_ID || ')' 
  INTO :P_CARD_CREATED_BY 
  FROM TASKS WHERE ID = :P_CARD_TASK_ID;
  HTP.P('<div class="t-Form-field">' || :P_CARD_CREATED_BY || '</div>');

  HTP.P('<div class="t-Form-label">–ü–ª–∞–Ω–æ–≤–∞ –¥–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è:</div>');
  SELECT TO_CHAR(PLANNING_DATE_END, 'DD.MM.YYYY HH24:MI') 
  INTO :P_CARD_DATE_END 
  FROM TASKS WHERE ID = :P_CARD_TASK_ID;
  HTP.P('<div class="t-Form-field">' || :P_CARD_DATE_END || '</div>');

  -- Unit
  HTP.P('<div class="t-Form-label">–ü—ñ–¥—Ä–æ–∑–¥—ñ–ª:</div>');
  SELECT u.NAME INTO :P_CARD_UNIT
  FROM TASKS t 
  JOIN UNIT_FOR_CONFIRMLIST_V u ON u.ID = t.UNIT_ID
  WHERE t.ID = :P_CARD_TASK_ID;
  HTP.P('<div class="t-Form-field">' || :P_CARD_UNIT || '</div>');

  -- –ó–º—ñ—Å—Ç
  IF v_task_type = 1 THEN
    HTP.P('<div class="t-Form-label">–ó–º—ñ—Å—Ç:</div>');
    SELECT TASK_CONTENT INTO :P_CARD_CONTENT
    FROM TASKS WHERE ID = :P_CARD_TASK_ID;
    HTP.P('<div class="t-Form-field">' || :P_CARD_CONTENT || '</div>');
  ELSE
    HTP.P('<div class="t-Form-label">–ü—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è:</div>');
    HTP.P('<div id="readonly-subtasks-region">');
    HTP.P('<!-- –¢—É—Ç –±—É–¥–µ IG only read ‚Üí region –∑ view –∞–±–æ –∑–≤–∏—á–∞–π–Ω–∏–º SQL ‚Üí filtered by TASK_ID -->');
    HTP.P('</div>');
  END IF;
END;
```

---

## ‚úÖ 2. –ö–Ω–æ–ø–∫–∏ —É –Ω–∏–∂–Ω—ñ–π —á–∞—Å—Ç–∏–Ω—ñ –∫–∞—Ä—Ç–∫–∏

### –î–æ–¥–∞–π –¥–≤—ñ –∫–Ω–æ–ø–∫–∏:
- **`B_CLOSE_DIALOG`** ‚Äì `Cancel Dialog`
- **`B_EDIT_TASK`** ‚Äì `Redirect to Edit`, –∑ —É–º–æ–≤–æ—é:

#### Server-side Condition:
```plsql
:P0_USER_ROLE = 'editor' OR :APP_USER = (SELECT CREATOR_ID FROM TASKS WHERE ID = :P_CARD_TASK_ID)
```

---

## ‚úÖ 3. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–∏ –Ω–∞ —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è

### üîπ –©–æ —Ä–æ–±–∏–º–æ?

- **–ù–µ —Ä–µ–¥–∞–≥—É—î–º–æ –Ω–∞–ø—Ä—è–º—É –≤ –∫–∞—Ä—Ç—Ü—ñ**, –∞ –≤—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ **–æ–∫—Ä–µ–º—É —Å—Ç–æ—Ä—ñ–Ω–∫—É —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è** –∑–∞–≤–¥–∞–Ω–Ω—è.
- –¶—è —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –≤–∂–µ **–∑–Ω–∞—î `task_id`**, —ñ –ª–æ–≥—ñ–∫–∞ –º–æ–∂–µ –±—É—Ç–∏ —Å—Ö–æ–∂–∞ –Ω–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, –∞–ª–µ –∑ –æ–±–º–µ–∂–µ–Ω–Ω—è–º–∏.

---

## ‚úÖ 4. –Ø–∫ —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è

- –°–∫–æ–ø—ñ—é–π —Å—Ç–æ—Ä—ñ–Ω–∫—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `page 20`)
- –ù–∞–∑–≤–∏ —ó—ó `–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è`
- –î–æ–¥–∞–π `Item` ‚Üí `P20_TASK_ID`
- –ü—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (DA / –ø—Ä–æ—Ü–µ—Å) ‚Üí –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤—Å—ñ –ø–æ–ª—è –ø–æ `task_id`

---

### üîê –û–±–º–µ–∂ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –ø–æ–ª—ñ–≤:

#### –£ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—è—Ö Item'–∞:
- Read Only Condition:
```plsql
:P0_USER_ROLE != 'editor' AND :APP_USER != :P20_CREATOR_ID
```

> –î–ª—è –ø–æ–ª—ñ–≤, —è–∫—ñ –Ω–µ –º–æ–∂–Ω–∞ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `task_type` —á–∏ `creator_id`).

---

### üîÑ –í–∏–≤—ñ–¥ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å:
- IG ‚Üí –∑ –æ–±–º–µ–∂–µ–Ω–Ω—è–º `task_id = :P20_TASK_ID`
- –î–æ–∑–≤–æ–ª—å —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ª–∏—à–µ, —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–∞—î –ø—Ä–∞–≤–æ.

---

## ‚úÖ 5. –ü—ñ—Å–ª—è –Ω–∞—Ç–∏—Å–Ω–µ–Ω–Ω—è "–û–Ω–æ–≤–∏—Ç–∏"
- –ó–±–µ—Ä–µ–∂–∏ –∑–∞–≤–¥–∞–Ω–Ω—è —Ç–∞ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è (—è–∫ –º–∏ —Ä–æ–±–∏–ª–∏ —Ä–∞–Ω—ñ—à–µ)
- –î–æ–¥–∞–π `Branch` ‚Üí –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∂—É—Ä–Ω–∞–ª—É –∑–∞–≤–¥–∞–Ω—å

---

üîß –ì–æ—Ç–æ–≤–∏–π –¥–æ–ø–æ–º–æ–≥—Ç–∏ –∑ —Ñ–æ—Ä–º–æ—é —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è –∞–±–æ –∑ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è–º –∫–∞—Ä—Ç–∫–∏ —á–µ—Ä–µ–∑ `Dialog`.

–ë–∞–∂–∞—î—à, —â–æ–± –º–∏ —Ä–∞–∑–æ–º —Å—Ñ–æ—Ä–º—É–≤–∞–ª–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è?