üîß –Ü–∑ –∑–∞–¥–æ–≤–æ–ª–µ–Ω–Ω—è–º! –î–∞–≤–∞–π **—Ä–æ–∑—à–∏—Ä–∏–º–æ –Ω–∞—à–µ –≤–ª–∞—Å–Ω–µ –º–µ–Ω—é** —É `Interactive Grid`, –¥–æ–¥–∞–≤—à–∏ —â–µ –¥–≤–∞ –ø—É–Ω–∫—Ç–∏:

1. ‚úÖ **–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è** ‚Äî –≤—ñ–¥–∫—Ä–∏–≤–∞—î **–º–æ–¥–∞–ª—å–Ω—É —Ñ–æ—Ä–º—É**
2. ‚úÖ **–î—É–±–ª—é–≤–∞—Ç–∏ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è** ‚Äî —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π –∑–∞–ø–∏—Å —ñ–∑ –∫–æ–ø—ñ—î—é –≤–º—ñ—Å—Ç—É

---

## üß© –ö–†–û–ö 1. –û–Ω–æ–≤–∏ HTML-—à–∞–±–ª–æ–Ω –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –º–µ–Ω—é

```js
if (!document.getElementById("custom-ig-menu")) {
  const menu = document.createElement("ul");
  menu.id = "custom-ig-menu";
  menu.style = "position:absolute; display:none; background:white; border:1px solid #ccc; z-index:10000; list-style:none; padding:4px 0; margin:0;";
  menu.innerHTML = `
    <li id="menu-edit-subtask" style="padding:6px 12px; cursor:pointer;">‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è</li>
    <li id="menu-duplicate-subtask" style="padding:6px 12px; cursor:pointer;">üìÑ –î—É–±–ª—é–≤–∞—Ç–∏ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è</li>
    <li id="menu-delete-subtask" style="padding:6px 12px; cursor:pointer;">üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è</li>
  `;
  document.body.appendChild(menu);
}
```

---

## üß© –ö–†–û–ö 2. –ü–µ—Ä–µ–¥–∞–π `id` —É –≤—Å—ñ –ø—É–Ω–∫—Ç–∏ –º–µ–Ω—é –ø—Ä–∏ –∫–ª—ñ–∫—É

–£ —Ç–æ–º—É –∂ –º—ñ—Å—Ü—ñ, –¥–µ –ø–æ–∫–∞–∑—É—î—à –º–µ–Ω—é:

```js
document.getElementById("menu-edit-subtask").dataset.id = id;
document.getElementById("menu-duplicate-subtask").dataset.id = id;
document.getElementById("menu-delete-subtask").dataset.id = id;
```

---

## üß© –ö–†–û–ö 3. –û–±—Ä–æ–±–∫–∞ –ø—É–Ω–∫—Ç—É **"–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è"**

```js
document.getElementById("menu-edit-subtask").addEventListener("click", function () {
  const id = this.dataset.id;
  if (!id) return;

  // üîÅ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ –∑ –ø–µ—Ä–µ–¥–∞—á–µ—é ID
  apex.navigation.dialog(
    "f?p=&APP_ID.:SUBTASK_FORM:&SESSION.::NO::P6_ID:" + id,
    {
      title: "–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è",
      height: "auto",
      width: "600",
      modal: true
    }
  );

  document.getElementById("custom-ig-menu").style.display = "none";
});
```

> üìù –ó–∞–º—ñ–Ω—ñ `SUBTASK_FORM` –Ω–∞ `page number` —Ñ–æ—Ä–º–∏ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `6`)

---

## üß© –ö–†–û–ö 4. –û–±—Ä–æ–±–∫–∞ –ø—É–Ω–∫—Ç—É **"–î—É–±–ª—é–≤–∞—Ç–∏ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è"**

```js
document.getElementById("menu-duplicate-subtask").addEventListener("click", function () {
  const id = this.dataset.id;
  if (!id) return;

  // –ó—Ä–æ–±–∏–º–æ –∑–∞–ø–∏—Ç –Ω–∞ AJAX, —è–∫–∏–π —Å–∫–æ–ø—ñ—é—î –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è
  apex.server.process("DUPLICATE_SUBTASK", {
    x01: id
  }, {
    success: function () {
      apex.region("TASK_SUBTASKS_IG").refresh();
    },
    error: function () {
      alert("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –¥—É–±–ª—é–≤–∞–Ω–Ω—ñ");
    }
  });

  document.getElementById("custom-ig-menu").style.display = "none";
});
```

---

## üß© –ö–†–û–ö 5. –°–µ—Ä–≤–µ—Ä–Ω–∏–π –ø—Ä–æ—Ü–µ—Å `DUPLICATE_SUBTASK`

–£ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ (—Ç–∏–ø: `AJAX Callback`, —ñ–º‚Äô—è: `DUPLICATE_SUBTASK`):

```plsql
DECLARE
  v_new_id TASK_SUBTASKS.ID%TYPE;
BEGIN
  INSERT INTO TASK_SUBTASKS (
    TASK_ID,
    SUBTASK_CONTENT,
    STATUS_ID,
    PLANNING_DATE_END,
    PARENT_ID,
    SUBTASK_ORDER,
    TEMPLATE_SUBTASK_ID
  )
  SELECT
    TASK_ID,
    SUBTASK_CONTENT,
    1, -- —Å—Ç–∞—Ç—É—Å "–Ω–æ–≤–µ"
    PLANNING_DATE_END,
    PARENT_ID,
    SUBTASK_ORDER,
    TEMPLATE_SUBTASK_ID
  FROM TASK_SUBTASKS
  WHERE ID = APEX_APPLICATION.G_X01
  RETURNING ID INTO v_new_id;

  -- –í—ñ–¥–ø–æ–≤—ñ–¥—å
  APEX_JSON.OPEN_OBJECT;
  APEX_JSON.WRITE('status', 'ok');
  APEX_JSON.CLOSE_OBJECT;
END;
```

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:

| –î—ñ—è | –ü–æ–≤–µ–¥—ñ–Ω–∫–∞ |
|-----|-----------|
| ‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ | –≤—ñ–¥–∫—Ä–∏–≤–∞—î –º–æ–¥–∞–ª—å–Ω—É —Ñ–æ—Ä–º—É –∑ –ø–µ—Ä–µ–¥–∞–Ω–∏–º ID |
| üìÑ –î—É–±–ª—é–≤–∞—Ç–∏ | –≤—Å—Ç–∞–≤–ª—è—î –∫–æ–ø—ñ—é –ø–æ—Ç–æ—á–Ω–æ–≥–æ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è |
| üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏ | –≤–∏–¥–∞–ª—è—î –∑–∞–ø–∏—Å —á–µ—Ä–µ–∑ AJAX |

---

üí¨ –•–æ—á–µ—à ‚Äî –¥–æ–¥–∞–º–æ `toast-–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è` –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ—ó –¥—ñ—ó –∞–±–æ —Ä–æ–∑—à–∏—Ä–∏–º–æ –¥—É–±–ª—é–≤–∞–Ω–Ω—è –∑ –∫–æ–ø—ñ—î—é –ø—ñ–¥–ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å.