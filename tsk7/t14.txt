–ó —Ä–∞–¥—ñ—Å—Ç—é! üëá  
–ù–∏–∂—á–µ ‚Äî **—É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥**, —è–∫–∏–π –¥–æ–∑–≤–æ–ª—è—î –æ–Ω–æ–≤–∏—Ç–∏ –∫–æ–ª–æ–Ω–∫—É `SUBTASK_CONTENT` –≤ `Interactive Grid`, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏:

1. –°–ø–æ—á–∞—Ç–∫—É `ID` (—è–∫—â–æ –∑–∞–ø–∏—Å —É–∂–µ –∑–±–µ—Ä–µ–∂–µ–Ω–∏–π —É –ë–î)
2. –Ø–∫—â–æ `ID` –≤—ñ–¥—Å—É—Ç–Ω—ñ–π (—Ç–æ–±—Ç–æ –∑–∞–ø–∏—Å –Ω–æ–≤–∏–π) ‚Äî —Ç–æ–¥—ñ `TEMP_ROW_ID`

---

## ‚úÖ –ü–µ—Ä–µ–¥—É–º–æ–≤–∏:

- –£ —Ç–µ–±–µ —î **–¥–≤—ñ –∫–æ–ª–æ–Ω–∫–∏ –≤ IG**:
  - `ID` ‚Äî –ø–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á (–º–æ–∂–µ –±—É—Ç–∏ `null` –¥–ª—è –Ω–æ–≤–∏—Ö)
  - `TEMP_ROW_ID` ‚Äî —Ç–∏–º—á–∞—Å–æ–≤–∏–π ID (–≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ JS)
- –ü—ñ–¥ —á–∞—Å –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ —Ç–∏ –∑–±–µ—Ä—ñ–≥–∞—î—à **–∞–±–æ `ID`**, –∞–±–æ `TEMP_ROW_ID` –≤ page item (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `P50_CURRENT_ID` –∞–±–æ `P50_CURRENT_TEMP_ID`)

---

## ‚úÖ üîß –ö–æ–¥ JS (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –Ω–∞ "–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏"):

```js
const newContent = $v("P50_MODAL_SUBTASK_CONTENT");
const rowId = $v("P50_CURRENT_ID");
const tempId = $v("P50_CURRENT_TEMP_ID");

const ig$ = apex.region("ig_subtasks").call("getViews", "grid");
const model = ig$.model;

let record = null;

// üü¢ 1. –ü—Ä–æ–±—É—î–º–æ –∑–Ω–∞–π—Ç–∏ –∑–∞–ø–∏—Å –ø–æ ID (–∑–±–µ—Ä–µ–∂–µ–Ω–∏–π –∑–∞–ø–∏—Å)
if (rowId) {
  record = model.getRecords().find(r =>
    model.getValue(r, "ID") && model.getValue(r, "ID").toString() === rowId
  );
}

// üü† 2. –Ø–∫—â–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ ‚Äî –ø—Ä–æ–±—É—î–º–æ –ø–æ TEMP_ROW_ID
if (!record && tempId) {
  record = model.getRecords().find(r =>
    model.getValue(r, "TEMP_ROW_ID") === tempId
  );
}

// üü¢ –Ø–∫—â–æ –∑–Ω–∞–π–¥–µ–Ω–æ ‚Äî –æ–Ω–æ–≤–ª—é—î–º–æ SUBTASK_CONTENT
if (record) {
  model.setValue(record, "SUBTASK_CONTENT", newContent);
  apex.region("SUBTASK_POPUP").widget().dialog("close");
} else {
  apex.message.alert("–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–Ω–∞–π—Ç–∏ –∑–∞–ø–∏—Å –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è.");
}
```

---

## ‚úÖ –Ø–∫ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ ID —ñ TEMP_ROW_ID –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ –¥—ñ–∞–ª–æ–≥—É

### –ü—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞:

```js
const model = apex.region("ig_subtasks").call("getViews", "grid").model;
const record = model.getSelectedRecords()[0]; // –∞–±–æ –ø–æ is-active

const id = model.getValue(record, "ID");
const tempId = model.getValue(record, "TEMP_ROW_ID");

$s("P50_CURRENT_ID", id || "");
$s("P50_CURRENT_TEMP_ID", tempId || "");

$s("P50_MODAL_SUBTASK_CONTENT", model.getValue(record, "SUBTASK_CONTENT"));

// –í—ñ–¥–∫—Ä–∏—Ç–∏ –º–æ–¥–∞–ª–∫—É
apex.region("SUBTASK_POPUP").widget().dialog("open");
```

---

## üìå –ü—ñ–¥—Å—É–º–æ–∫:

| –©–æ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è       | –Ø–∫ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –∑–∞–ø–∏—Å                            |
|------------------------|--------------------------------------------------|
| –Ü—Å–Ω—É—é—á–∏–π –∑–∞–ø–∏—Å         | `model.getValue(r, "ID") === :P50_CURRENT_ID`   |
| –ù–æ–≤–∏–π, —â–µ –Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–∏–π| `model.getValue(r, "TEMP_ROW_ID") === :P50_CURRENT_TEMP_ID` |

---

üîÅ –Ø–∫—â–æ —Ö–æ—á–µ—à ‚Äî —è –º–æ–∂—É –¥–æ–¥–∞—Ç–∏ —Ç–∞–∫–æ–∂ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è `SUBTASK_CONTENT_DISPLAY` —É –∫–æ–ª–æ–Ω—Ü—ñ –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç—É. –ì–æ—Ç–æ–≤–æ –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏?