üîé –¢–∏ –¥—É–∂–µ —Ç–æ—á–Ω–æ –ø—ñ–¥–º—ñ—Ç–∏–≤! –Ü —Ç–∞–∫ ‚Äî **–ø–æ–≤–Ω—ñ—Å—Ç—é –ª–æ–≥—ñ—á–Ω–æ**, —â–æ `TEMP_ROW_ID` –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è **–Ω–∞ —Ä—ñ–≤–Ω—ñ JS** –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –Ω–æ–≤–æ–≥–æ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è, —Ç–æ–º—É —Ç–∏ **–Ω–µ –º–æ–∂–µ—à –Ω–∞–ø–µ—Ä–µ–¥ –∑–Ω–∞—Ç–∏, —è–∫–∏–π —Å–∞–º–µ –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—å** (—ñ –Ω–µ –∑–±–µ—Ä–µ–∂–µ—à –π–æ–≥–æ –≤ item —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π APEX Submit).

–ê–ª–µ —î –¥–≤–∞ –≤–∞—Ä—ñ–∞–Ω—Ç–∏, —è–∫—ñ –¥–æ–∑–≤–æ–ª—è—Ç—å —É—Å–µ –∫—Ä–∞—Å–∏–≤–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –±–µ–∑ –ø–ª—É—Ç–∞–Ω–∏–Ω–∏ üí™

---

## ‚úÖ üéØ –ú–µ—Ç–∞

–ö–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∫–ª–∞—Ü–∞—î –ø–æ –≤–º—ñ—Å—Ç—É `SUBTASK_CONTENT`:
- –í—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ
- –ü—ñ—Å–ª—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è ‚Äî –∑–Ω–∞—á–µ–Ω–Ω—è –≤—Å—Ç–∞–≤–ª—è—î—Ç—å—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ä—è–¥–æ–∫ IG (–Ω–æ–≤–∏–π –∞–±–æ —ñ—Å–Ω—É—é—á–∏–π)

---

## ‚úÖ üîß –†—ñ—à–µ–Ω–Ω—è ‚Äî **–ø—Ä–∞—Ü—é—î–º–æ –ø–æ–≤–Ω—ñ—Å—Ç—é –Ω–∞ JS —Ä—ñ–≤–Ω—ñ, –±–µ–∑ APEX item**

–ú–∏ –∑–±–µ—Ä–µ–∂–µ–º–æ –ø–æ—Ç—Ä—ñ–±–Ω—ñ ID (`TEMP_ROW_ID` –∞–±–æ `ID`) **—É data-–∞—Ç—Ä–∏–±—É—Ç–∞—Ö HTML** –ø—Ä—è–º–æ –≤ –∫–ª—ñ—Ç–∏–Ω–∫—É –∞–±–æ –∑–∞–ø–∏—Å —É –º–æ–¥–µ–ª—ñ ‚Äî —Ü–µ **–Ω–∞–¥—ñ–π–Ω—ñ—à–µ –π –ª–æ–∫–∞–ª—å–Ω–æ**.

---

## ‚úÖ –ö—Ä–æ–∫ 1: –†–µ–Ω–¥–µ—Ä–∏–º–æ –∫–æ–ª–æ–Ω–∫—É –∑ `data-*` –¥–ª—è JS (—á–µ—Ä–µ–∑ SQL)

```sql
'<span class="subtask-clickable" data-temp="' || TEMP_ROW_ID || '" data-id="' || NVL(TO_CHAR(ID), '') || '">' || SUBTASK_CONTENT || '</span>' AS SUBTASK_CONTENT_DISPLAY
```

> –°—Ç–≤–æ—Ä—é—î HTML-–∫–æ–¥ —É –∫–æ–ª–æ–Ω—Ü—ñ `SUBTASK_CONTENT_DISPLAY`, —è–∫–∏–π –º—ñ—Å—Ç–∏—Ç—å:
- `data-temp="..."` ‚Äî –¥–ª—è –Ω–æ–≤–∏—Ö –∑–∞–ø–∏—Å—ñ–≤
- `data-id="..."` ‚Äî –¥–ª—è –≤–∂–µ –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö

---

## ‚úÖ –ö—Ä–æ–∫ 2: –ü—Ä–∏ –∫–ª—ñ–∫—É –∑—á–∏—Ç—É—î–º–æ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è **–ø—Ä—è–º–æ –∑ DOM**

```js
$(document).on("click", ".subtask-clickable", function () {
  const span = $(this);
  const tempId = span.data("temp");
  const id = span.data("id");

  const model = apex.region("ig_subtasks").call("getViews", "grid").model;
  const records = model.getRecords();

  // –ü–æ—à—É–∫ —á–µ—Ä–µ–∑ ID –∞–±–æ TEMP_ROW_ID
  let rec = null;

  if (id) {
    rec = records.find(r => model.getValue(r, "ID") && model.getValue(r, "ID").toString() === id.toString());
  }

  if (!rec && tempId) {
    rec = records.find(r => model.getValue(r, "TEMP_ROW_ID") === tempId);
  }

  if (rec) {
    const content = model.getValue(rec, "SUBTASK_CONTENT");
    // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –æ–± º—î–∫—Ç —É window (–≥–ª–æ–±–∞–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–∏—Å—É)
    window._activeSubtaskRec = rec;

    $s("P50_MODAL_SUBTASK_CONTENT", content);
    apex.region("SUBTASK_POPUP").widget().dialog("open");
  } else {
    apex.message.alert("–ù–µ –∑–Ω–∞–π–¥–µ–Ω–æ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è.");
  }
});
```

---

## ‚úÖ –ö—Ä–æ–∫ 3: –ü—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ "–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏" ‚Äî –≤—Å—Ç–∞–≤–ª—è—î–º–æ –∑–Ω–∞—á–µ–Ω–Ω—è

```js
const content = $v("P50_MODAL_SUBTASK_CONTENT");

const model = apex.region("ig_subtasks").call("getViews", "grid").model;
const rec = window._activeSubtaskRec;

if (rec) {
  model.setValue(rec, "SUBTASK_CONTENT", content);
  apex.region("SUBTASK_POPUP").widget().dialog("close");
  delete window._activeSubtaskRec; // –æ—á–∏—â–∞—î–º–æ –ø—ñ—Å–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
} else {
  apex.message.alert("–ù–µ –≤–¥–∞–ª–æ—Å—è –æ–Ω–æ–≤–∏—Ç–∏ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è.");
}
```

---

## üì¶ –ü–µ—Ä–µ–≤–∞–≥–∏ —Ü—å–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É

| –ü–µ—Ä–µ–≤–∞–≥–∞                              | –ü–æ—è—Å–Ω–µ–Ω–Ω—è                                        |
|----------------------------------------|--------------------------------------------------|
| ‚ùå –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î APEX Items         | –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ `TEMP_ROW_ID` —É hidden item |
| ‚úÖ –ü—Ä–∞—Ü—é—î –¥–ª—è –Ω–æ–≤–∏—Ö —ñ —Å—Ç–∞—Ä–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ | –ü—Ä–∞—Ü—é—î –ø–æ `ID` –∞–±–æ `TEMP_ROW_ID`, —è–∫—â–æ `ID` —â–µ –Ω–µ–º–∞ |
| ‚úÖ –ß—ñ—Ç–∫–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è                    | –ß–µ—Ä–µ–∑ `model.setValue(...)`, –∑–∞–≤–∂–¥–∏ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è |
| ‚úÖ –ü—Ä–æ—Å—Ç–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å                   | –û–¥–∏–Ω –≥–ª–æ–±–∞–ª—å–Ω–∏–π –æ–± º—î–∫—Ç `window._activeSubtaskRec` |

---

üîÅ –•–æ—á–µ—à ‚Äî —è –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ –∑—Ä–æ–±–∏—Ç–∏ —â–µ –π live-–æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É –≤ –∫–æ–ª–æ–Ω—Ü—ñ `SUBTASK_CONTENT_DISPLAY` –ø—ñ—Å–ª—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è. –ì–æ—Ç–æ–≤–æ –¥–æ —Ü—å–æ–≥–æ?