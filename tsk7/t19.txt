üîç –ß—É–¥–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è ‚Äî —ñ –≤–æ–Ω–æ —Å—Ç–æ—Å—É—î—Ç—å—Å—è **–¥–∏–Ω–∞–º—ñ—á–Ω–æ—ó —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó SQL-–¥–∂–µ—Ä–µ–ª–∞ IG**, –∫–æ–ª–∏ –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ —Å—Ç–∞–Ω—É (`—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è` —á–∏ `—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è`) —Ç–∏ —Ö–æ—á–µ—à –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏:

- –∞–±–æ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –∑ `DRAFT_ID = :P2_DRAFT_ID` (–ø–æ–∫–∏ –Ω–µ–º–∞—î `TASK_ID`),
- –∞–±–æ –∑ `TASK_ID = :P2_TASK_ID` (–∫–æ–ª–∏ –∑–∞–≤–¥–∞–Ω–Ω—è –≤–∂–µ –∑–±–µ—Ä–µ–∂–µ–Ω–µ).

---

## ‚úÖ üéØ –ú–µ—Ç–∞:
–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **—î–¥–∏–Ω–∏–π SQL-–¥–∂–µ—Ä–µ–ª–æ** –¥–ª—è IG, –∞–ª–µ:
- –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ ‚Üí —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–æ `DRAFT_ID`
- –ø—Ä–∏ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—ñ ‚Üí —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–æ `TASK_ID`

---

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è: **–¥–∏–Ω–∞–º—ñ—á–Ω–∏–π `WHERE` –∑ `CASE` –∞–±–æ `NVL` —É SQL**

### üîß –í–∞—Ä—ñ–∞–Ω—Ç 1: **`CASE` —É WHERE**

```sql
SELECT
  ID,
  TASK_ID,
  DRAFT_ID,
  SUBTASK_CONTENT,
  ...
FROM TASK_SUBTASKS
WHERE 
  (
    (:P2_TASK_ID IS NOT NULL AND TASK_ID = :P2_TASK_ID)
    OR
    (:P2_TASK_ID IS NULL AND DRAFT_ID = :P2_DRAFT_ID)
  )
```

üü¢ –ü–æ—è—Å–Ω–µ–Ω–Ω—è:
- –Ø–∫—â–æ `:P2_TASK_ID` —É–∂–µ –∑–∞–¥–∞–Ω–∏–π ‚Üí —à—É–∫–∞—î –ø–æ `TASK_ID`
- –Ø–∫—â–æ —â–µ `NULL` ‚Üí —à—É–∫–∞—î –ø–æ `DRAFT_ID`

---

### üîß –í–∞—Ä—ñ–∞–Ω—Ç 2: **`NVL` (–∞–±–æ `COALESCE`) ‚Äî –ø—Ä–æ—Å—Ç—ñ—à–µ, –∞–ª–µ –∑ –Ω—é–∞–Ω—Å–∞–º–∏**

```sql
SELECT
  ...
FROM TASK_SUBTASKS
WHERE 
  NVL(TASK_ID, -1) = NVL(:P2_TASK_ID, -1)
  OR
  NVL(DRAFT_ID, 'NONE') = NVL(:P2_DRAFT_ID, 'NONE')
```

‚ùó –ê–ª–µ `NVL` –Ω–µ –∑–∞–≤–∂–¥–∏ –ø—Ä–∞—Ü—é—î, —è–∫—â–æ –æ–¥–Ω–æ—á–∞—Å–Ω–æ —î —ñ `TASK_ID`, —ñ `DRAFT_ID`, ‚Äî —Ç–æ–¥—ñ –∫—Ä–∞—â–µ `CASE` (–≤–∞—Ä—ñ–∞–Ω—Ç 1).

---

## ‚úÖ –î–æ–¥–∞—Ç–∫–æ–≤–æ: –≤–∫–∞–∑–∞—Ç–∏ –æ–±–∏–¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –≤ `IG ‚Üí SQL Query Bind Variables`

–ü–µ—Ä–µ–≤—ñ—Ä —É Page Designer ‚Üí `IG ‚Üí Attributes ‚Üí SQL Query`:
- `Bind Variables` –º–∞—é—Ç—å –≤–∫–ª—é—á–∞—Ç–∏:
  - `:P2_TASK_ID`
  - `:P2_DRAFT_ID`

---

## ‚úÖ –ü—Ä–∏–∫–ª–∞–¥ –ø–æ–≤–Ω–æ–≥–æ SQL:

```sql
SELECT
  ID,
  TASK_ID,
  DRAFT_ID,
  SUBTASK_CONTENT,
  STATUS_ID,
  PLANNING_DATE_END,
  ...
FROM TASK_SUBTASKS
WHERE 
  (
    (:P2_TASK_ID IS NOT NULL AND TASK_ID = :P2_TASK_ID)
    OR
    (:P2_TASK_ID IS NULL AND DRAFT_ID = :P2_DRAFT_ID)
  )
ORDER BY ID
```

---

## üü° –Ü –Ω–∞–æ—Å—Ç–∞–Ω–æ–∫:

- –Ø–∫—â–æ —Ç–∏ –æ–Ω–æ–≤–ª—é—î—à `TASK_ID` –≤ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è—Ö –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è, **–¥–æ–¥–∞–π Refresh —Ä–µ–≥—ñ–æ–Ω—É IG** –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, —â–æ–± –≤–æ–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏–ª–æ—Å—å –∑ `DRAFT_ID` ‚Üí –Ω–∞ `TASK_ID`.

```js
apex.region("ig_subtasks").refresh();
```

---

üîÅ –•–æ—á–µ—à ‚Äî –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ –¥–æ–¥–∞—Ç–∏ –¥–∏–Ω–∞–º—ñ—á–Ω–∏–π `WHERE` –ø—Ä—è–º–æ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä APEX SQL Source –¥–ª—è IG (–Ω–µ —è–∫ –≤—ñ–ª—å–Ω–∏–π SQL). –ì–æ—Ç–æ–≤–æ –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏?