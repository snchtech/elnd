–¢–∞–∫! –î—É–∂–µ —Å–ª—É—à–Ω–µ —É—Ç–æ—á–Ω–µ–Ω–Ω—è üëè ‚Äî —Ç–∏ –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∞–≤–∏–π: —É **APEX 22** (—ñ –∑–∞–≥–∞–ª–æ–º –∑ `Interactive Grid`), **`model.createRecord()` –±—ñ–ª—å—à–µ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –Ω–∞–ø—Ä—è–º—É**, –∞–±–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ —è–∫ —á–∞—Å—Ç–∏–Ω–∞ –æ—Ñ—ñ—Ü—ñ–π–Ω–æ–≥–æ API.

–ó–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ –¥–ª—è **–¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Ä—è–¥–∫–∞** —ñ –π–æ–≥–æ **—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è** –º–∏ –º–∞—î–º–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **action API APEX IG**, —è–∫–µ –∫–µ—Ä—É—î —Ü–∏–º –ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º.

---

## ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π —Å–ø–æ—Å—ñ–± –¥–æ–¥–∞—Ç–∏ –∑–∞–ø–∏—Å —ñ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø–æ–ª—è –≤ APEX 22 (—á–µ—Ä–µ–∑ –¥—ñ—ó IG)

### üîß –ö—Ä–æ–∫ 1: –î–æ–¥–∞—Ç–∏ –∑–∞–ø–∏—Å —á–µ—Ä–µ–∑ `selection-add-row`

```js
var ig$ = apex.region("subtask_ig").call("getViews", "grid");
ig$.view$.interactiveGrid("getActions").invoke("selection-add-row");
```

---

### üîß –ö—Ä–æ–∫ 2: –î–æ—á–µ–∫–∞—Ç–∏—Å—è, –ø–æ–∫–∏ —Ä—è–¥–æ–∫ –∑‚Äô—è–≤–∏—Ç—å—Å—è, —ñ –ø–æ—Ç—ñ–º –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ `DRAFT_ID`, `TEMP_ROW_ID`

```js
setTimeout(function () {
  var ig$ = apex.region("subtask_ig").call("getViews", "grid");
  var model = ig$.model;
  var records = model.getRecords();
  
  // –ó–Ω–∞—Ö–æ–¥–∏–º–æ –æ—Å—Ç–∞–Ω–Ω—ñ–π –¥–æ–¥–∞–Ω–∏–π –∑–∞–ø–∏—Å (–≤—ñ–Ω –±–µ–∑ ID —ñ –∑ –ø—É—Å—Ç–∏–º–∏ –ø–æ–ª—è–º–∏)
  var newRec = records[records.length - 1];

  // –ì–µ–Ω–µ—Ä—É—î–º–æ TEMP_ROW_ID
  var tempId = "tmp_" + new Date().getTime();

  // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –∑–Ω–∞—á–µ–Ω–Ω—è —á–µ—Ä–µ–∑ model.setValue
  model.setValue(newRec, "DRAFT_ID", $v("P50_DRAFT_ID"));
  model.setValue(newRec, "TEMP_ROW_ID", tempId);
  model.setValue(newRec, "STATUS_ID", 1); // –ø—Ä–∏–∫–ª–∞–¥
}, 100);
```

> –ß–æ–º—É `setTimeout`? ‚Äî –±–æ –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ä—è–¥–∫–∞ —á–µ—Ä–µ–∑ `selection-add-row` –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, —ñ –±–µ–∑ –∑–∞—Ç—Ä–∏–º–∫–∏ —Ç–∏ –Ω–µ –ø–æ–±–∞—á–∏—à –Ω–æ–≤–∏–π –∑–∞–ø–∏—Å —É `model.getRecords()`.

---

## üß™ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞: —á–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–±–µ—Ä–µ–∂—É—Ç—å—Å—è

1. –ü–æ–ª—è `DRAFT_ID`, `TEMP_ROW_ID` –º–∞—é—Ç—å –±—É—Ç–∏ –ø—Ä–∏—Å—É—Ç–Ω—ñ –≤ IG:
   - Type: `Text Field` –∞–±–æ `Display Only`
   - **Visible = No**, –∞–ª–µ –Ω–µ `Hidden`! (`Hidden` —á–∞—Å—Ç–æ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è —É submit)
   - Maintain Session State = `Yes`

2. –ü—ñ—Å–ª—è `Save` ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä —É –ë–î, –∑–Ω–∞—á–µ–Ω–Ω—è –º–∞—é—Ç—å –±—É—Ç–∏ –ø—Ä–∏—Å—É—Ç–Ω—ñ

---

## üì¶ –ü–æ–≤–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–î–æ–¥–∞—Ç–∏ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è"

```js
apex.region("subtask_ig").call("getViews", "grid").view$
  .interactiveGrid("getActions").invoke("selection-add-row");

setTimeout(function () {
  var ig$ = apex.region("subtask_ig").call("getViews", "grid");
  var model = ig$.model;
  var records = model.getRecords();

  var newRec = records[records.length - 1];
  var tempId = "tmp_" + new Date().getTime();

  model.setValue(newRec, "DRAFT_ID", $v("P50_DRAFT_ID"));
  model.setValue(newRec, "TEMP_ROW_ID", tempId);
  model.setValue(newRec, "STATUS_ID", 1);
}, 100);
```

---

‚úÖ **–¢–µ–ø–µ—Ä** —Ç–∏ –ø–æ–≤–Ω—ñ—Å—Ç—é –∫–µ—Ä—É—î—à –¥–æ–¥–∞–≤–∞–Ω–Ω—è–º —Ä—è–¥–∫—ñ–≤ –¥–æ IG —ñ–∑ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è–º –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–∏—Ö –ø–æ–ª—ñ–≤ (`DRAFT_ID`, `TEMP_ROW_ID`, ...) ‚Äî —ñ –≤–æ–Ω–∏ —Ç–æ—á–Ω–æ –ø–æ—Ç—Ä–∞–ø–ª—è—é—Ç—å —É –±–∞–∑—É.

üîÅ –•–æ—á–µ—à ‚Äî –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ `PARENT_TEMP_ID` –∞–±–æ LOV –¥–ª—è –Ω—å–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥ —á–∞—Å –¥–æ–¥–∞–≤–∞–Ω–Ω—è.