–ß—É–¥–æ–≤–æ! üî•  
–¢–æ–¥—ñ –¥–∞–≤–∞–π —Ä–æ–∑—à–∏—Ä–∏–º–æ –Ω–∞—à—É —Ñ—É–Ω–∫—Ü—ñ—é `validateRequiredFieldsWithApexMessages()`, —â–æ–± –≤–æ–Ω–∞ **—â–µ –π –ø–µ—Ä–µ–≤—ñ—Ä—è–ª–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä—è–¥–∫—ñ–≤ —É Interactive Grid (IG)**.

---

# üìã –ó–∞–≤–¥–∞–Ω–Ω—è:

‚úÖ –Ø–∫—â–æ `P5_SWITCH = 0` —ñ `P5_SELECT_TASK_TYPE = 2`  
‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ —É –≥—Ä—ñ–¥—ñ `TASK_SUBTASKS_IG_1` —î —Ö–æ—á–∞ –± 1 –∑–∞–ø–∏—Å  
‚úÖ –Ø–∫—â–æ –∑–∞–ø–∏—Å—ñ–≤ –Ω–µ–º–∞—î ‚Äî –ø–æ–∫–∞–∑–∞—Ç–∏ –ø–æ–º–∏–ª–∫—É —á–µ—Ä–µ–∑ `apex.message.showErrors()`

---

# ‚úÖ –û—Å—å –æ–Ω–æ–≤–ª–µ–Ω–∏–π –ø–æ–≤–Ω–∏–π –∫–æ–¥:

```javascript
function validateRequiredFieldsWithApexMessages() {
  var errors = [];

  // –û—á–∏—â–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
  apex.message.clearErrors();

  // –ü—Ä–æ—Ö–æ–¥–∏–º–æ –ø–æ –≤—Å—ñ—Ö –ø–æ–ª—è—Ö input —Ç–∞ textarea –∑ –∞—Ç—Ä–∏–±—É—Ç–æ–º required
  document.querySelectorAll('.t-Form-inputContainer input[required], .t-Form-inputContainer textarea[required]').forEach(function (el) {
    var value = el.value.trim();
    if (value === '') {
      var label = document.querySelector("label[for='" + el.id + "']");
      var labelText = label ? label.innerText.trim() : el.id;
      
      errors.push({
        type:       "error",
        location:   "inline",
        pageItem:   el.id,
        message:    "–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –ø–æ–ª–µ: " + labelText,
        unsafe:     false
      });
    }
  });

  // üî• –î–æ–¥–∞—Ç–∫–æ–≤–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–ª—è IG (TASK_SUBTASKS_IG_1)
  var switchValue = $v('P5_SWITCH');
  var taskTypeValue = $v('P5_SELECT_TASK_TYPE');

  if (switchValue === '0' && taskTypeValue === '2') {
    var model = apex.region('TASK_SUBTASKS_IG_1').widget().interactiveGrid('getViews', 'grid').model;
    var rowCount = model.getTotalRecords();

    if (rowCount === 0) {
      errors.push({
        type:       "error",
        location:   "page", // –ü–æ–∫–∞–∂–µ–º–æ –ø–æ–º–∏–ª–∫—É –Ω–∞–≥–æ—Ä—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
        message:    "–ü–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ —Ö–æ—á–∞ –± –æ–¥–Ω–µ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è.",
        unsafe:     false
      });
    }
  }

  if (errors.length > 0) {
    apex.message.showErrors(errors);

    // –§–æ–∫—É—Å—É—î–º–æ—Å—è –Ω–∞ –ø–µ—Ä—à–µ –Ω–µ–∑–∞–ø–æ–≤–Ω–µ–Ω–µ –ø–æ–ª–µ, —è–∫—â–æ —î
    var firstFieldError = errors.find(function(error) {
      return error.pageItem;
    });
    if (firstFieldError) {
      setTimeout(function () {
        var firstInvalid = document.getElementById(firstFieldError.pageItem);
        if (firstInvalid) {
          firstInvalid.focus();
        }
      }, 100);
    }
    return false; // –ó—É–ø–∏–Ω—è—î–º–æ —Å–∞–±–º—ñ—Ç
  }

  return true; // –£—Å–µ –∑–∞–ø–æ–≤–Ω–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
}
```

---

# üìà –Ø–∫ —Ç–µ–ø–µ—Ä –ø—Ä–∞—Ü—é—î:

| –ö—Ä–æ–∫ | –û–ø–∏—Å |
|------|------|
| 1 | –û—á–∏—â–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –ø–æ–º–∏–ª–∫–∏ |
| 2 | –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –≤—Å—ñ –ø–æ–ª—è –∑ `required` |
| 3 | –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —î –∑–∞–ø–∏—Å–∏ –≤ `TASK_SUBTASKS_IG_1` (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ) |
| 4 | –í–∏–≤–æ–¥–∏–º–æ –≤—Å—ñ –ø–æ–º–∏–ª–∫–∏ —á–µ—Ä–µ–∑ `apex.message.showErrors()` |
| 5 | –§–æ–∫—É—Å—É—î–º–æ—Å—è –Ω–∞ –ø–µ—Ä—à–µ –Ω–µ–∑–∞–ø–æ–≤–Ω–µ–Ω–µ –ø–æ–ª–µ |

---

# üî• –î–æ–¥–∞—Ç–∫–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏:

- –Ø–∫—â–æ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å –Ω–µ–º–∞—î ‚Üí –ø–æ–º–∏–ª–∫–∞ –≤–∏–≤–æ–¥–∏—Ç—å—Å—è –Ω–∞–≥–æ—Ä—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏, –∞ –Ω–µ inline –±—ñ–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—è.
- –Ø–∫—â–æ –ø–æ—Ä–æ–∂–Ω—ñ –ø–æ–ª—è ‚Üí –ø–æ–º–∏–ª–∫–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è inline –±—ñ–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ–ª—è.

---

# ‚úÖ –Ø–∫ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É:

**Dynamic Action** –Ω–∞ `Click` –ø–æ –∫–Ω–æ–ø—Ü—ñ ("Create", "Update"):

```javascript
if (validateRequiredFieldsWithApexMessages()) {
  apex.submit('CREATE_TASK');
}
```

(–∞–±–æ `UPDATE_TASK` ‚Äî –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∫–Ω–æ–ø–∫–∏)

---

# üìã –ü—ñ–¥—Å—É–º–æ–∫

| –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ | –Ø–∫ —Ä–µ–∞–≥—É—î–º–æ |
|----------------|-------------|
| –û–±–æ–≤'—è–∑–∫–æ–≤—ñ –ø–æ–ª—è –ø—É—Å—Ç—ñ | Inline –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—ñ–¥ –ø–æ–ª–µ–º |
| –ù–µ–º–∞—î –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å –≤ IG | –ü–æ–º–∏–ª–∫–∞ –Ω–∞–≥–æ—Ä—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ |

---

# üöÄ –Ø–∫—â–æ —Ö–æ—á–µ—à ‚Äî –º–æ–∂—É —â–µ —Å–∫–ª–∞—Å—Ç–∏ –≤–∞—Ä—ñ–∞–Ω—Ç, —è–∫ –ø—Ä–∏ —Å–∞–±–º—ñ—Ç—ñ –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ –ø–µ—Ä—à–æ—ó –ø–æ–º–∏–ª–∫–∏! (–æ—Å–æ–±–ª–∏–≤–æ –∫—Ä—É—Ç–æ, –∫–æ–ª–∏ —Ñ–æ—Ä–º–∞ –≤–µ–ª–∏–∫–∞) ‚úÖ  
–°–∫–∞–∑–∞—Ç–∏ "—Ç–∞–∫"? ‚úÖ
